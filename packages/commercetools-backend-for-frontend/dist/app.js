"use strict";var QN=Object.create;var Hu=Object.defineProperty;var ZN=Object.getOwnPropertyDescriptor;var ek=Object.getOwnPropertyNames;var tk=Object.getPrototypeOf,rk=Object.prototype.hasOwnProperty;var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nk=(e,t)=>{for(var r in t)Hu(e,r,{get:t[r],enumerable:!0})},C0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ek(t))!rk.call(e,i)&&i!==r&&Hu(e,i,{get:()=>t[i],enumerable:!(n=ZN(t,i))||n.enumerable});return e};var xc=(e,t,r)=>(r=e!=null?QN(tk(e)):{},C0(t||!e||!e.__esModule?Hu(r,"default",{value:e,enumerable:!0}):r,e)),ik=e=>C0(Hu({},"__esModule",{value:!0}),e);var N0=v((TX,I0)=>{"use strict";function sk(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}I0.exports=sk});var jc=v((OX,qc)=>{"use strict";var ok=N0();function k0(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=ok(ak),i=null,s=null,o=0,a=null,u={push:y,drain:Ar,saturated:Ar,pause:f,paused:!1,concurrency:r,running:l,resume:d,idle:p,length:c,getQueue:h,unshift:w,empty:Ar,kill:S,killAndDrain:g,error:m};return u;function l(){return o}function f(){u.paused=!0}function c(){for(var P=i,$=0;P;)P=P.next,$++;return $}function h(){for(var P=i,$=[];P;)$.push(P.value),P=P.next;return $}function d(){if(u.paused){u.paused=!1;for(var P=0;P<u.concurrency;P++)o++,_()}}function p(){return o===0&&u.length()===0}function y(P,$){var E=n.get();E.context=e,E.release=_,E.value=P,E.callback=$||Ar,E.errorHandler=a,o===u.concurrency||u.paused?s?(s.next=E,s=E):(i=E,s=E,u.saturated()):(o++,t.call(e,E.value,E.worked))}function w(P,$){var E=n.get();E.context=e,E.release=_,E.value=P,E.callback=$||Ar,o===u.concurrency||u.paused?i?(E.next=i,i=E):(i=E,s=E,u.saturated()):(o++,t.call(e,E.value,E.worked))}function _(P){P&&n.release(P);var $=i;$?u.paused?o--:(s===i&&(s=null),i=$.next,$.next=null,t.call(e,$.value,$.worked),s===null&&u.empty()):--o===0&&u.drain()}function S(){i=null,s=null,u.drain=Ar}function g(){i=null,s=null,u.drain(),u.drain=Ar}function m(P){a=P}}function Ar(){}function ak(){this.value=null,this.callback=Ar,this.next=null,this.release=Ar,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=Ar,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function uk(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(f,c){t.call(this,f).then(function(h){c(null,h)},c)}var i=k0(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=l,i;function a(f){var c=new Promise(function(h,d){s(f,function(p,y){if(p){d(p);return}h(y)})});return c.catch(Ar),c}function u(f){var c=new Promise(function(h,d){o(f,function(p,y){if(p){d(p);return}h(y)})});return c.catch(Ar),c}function l(){if(i.idle())return new Promise(function(h){h()});var f=i.drain,c=new Promise(function(h){i.drain=function(){f(),h()}});return c}}qc.exports=k0;qc.exports.promise=uk});var Lc=v((AX,x0)=>{"use strict";var{inherits:lk,format:Dc}=require("util");function Li(e,t,r=Error){if(!e)throw new Error("Avvio error code must not be empty");if(!t)throw new Error("Avvio base error message must not be empty");function n(i,s,o){if(!new.target)return new n(i,s,o);Error.captureStackTrace(this,n),this.code=e,this.message=t,this.name="AvvioError",i&&s&&o?this.message=Dc(t,i,s,o):i&&s?this.message=Dc(t,i,s):i?this.message=Dc(t,i):this.message=t}return n.prototype[Symbol.toStringTag]="Error",n.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},lk(n,r),n}x0.exports={createError:Li,AVV_ERR_EXPOSE_ALREADY_DEFINED:Li("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' () is already defined, specify an expose option"),AVV_ERR_CALLBACK_NOT_FN:Li("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Li("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Li("AVV_ERR_PLUGIN_NOT_VALID","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Li("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Li("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var j0=v(($X,q0)=>{q0.exports=function e(t,r,n){r===void 0&&(r=""),n||(n={});var i=function(u){var l={"\u2502":"|","\u2514":"`","\u251C":"+","\u2500":"-","\u252C":"-"};return n.unicode===!1?l[u]:u};typeof t=="string"&&(t={label:t});var s=t.nodes||[],o=(t.label||"").split(`
`),a=`
`+r+(s.length?i("\u2502"):" ")+" ";return r+o.join(a)+`
`+s.map(function(u,l){var f=l===s.length-1,c=u.nodes&&u.nodes.length,h=r+(f?" ":i("\u2502"))+" ";return r+i(f?"\u2514":"\u251C")+i("\u2500")+i(c?"\u252C":"\u2500")+" "+e(u,h,n).slice(r.length+2)}).join("")}});var H0=v((CX,M0)=>{"use strict";var fk=j0(),D0=Symbol("avvio.TimeTree.untrackNode"),Fc=Symbol("avvio.TimeTree.trackNode"),L0=Symbol("avvio.TimeTree.getParent"),F0=Symbol("avvio.TimeTree.getNode"),z0=Symbol("avvio.TimeTree.addNode"),zc=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Fc](t){this.tableId.set(t.id,t),this.tableLabel.has(t.label)?this.tableLabel.get(t.label).push(t):this.tableLabel.set(t.label,[t])}[D0](t){this.tableId.delete(t.id);let r=this.tableLabel.get(t.label);if(r.id){this.tableLabel.delete(t.label);return}r.pop(),r.length===0&&this.tableLabel.delete(t.label)}[L0](t){if(t===null)return this.root;let r=this.tableLabel.get(t);return r.id?r:r[r.length-1]}[F0](t){return this.tableId.get(t)}[z0](t,r,n){if(t===null)return this.root={id:"root",label:r,start:n,nodes:[]},this[Fc](this.root),this.root.id;let s=this[L0](t),o=`${r}-${Math.random()}`,a={id:o,parent:t,start:n,label:r,nodes:[]};return s.nodes.push(a),this[Fc](a),o}start(t,r,n=Date.now()){return this[z0](t,r,n)}stop(t,r=Date.now()){let n=this[F0](t);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[D0](n))}toJSON(){return Object.assign({},this.root)}prittyPrint(){let t=n=>(n.label=`${n.label} ${n.diff} ms`,n.nodes.length>0&&(n.nodes=n.nodes.map(i=>t(i))),n),r=t(this.toJSON());return fk(r)}};M0.exports=zc});var U0=v((IX,V0)=>{var Rs=1e3,Ps=Rs*60,Ts=Ps*60,Fi=Ts*24,ck=Fi*7,hk=Fi*365.25;V0.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return dk(e);if(r==="number"&&isFinite(e))return t.long?mk(e):pk(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function dk(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hk;case"weeks":case"week":case"w":return r*ck;case"days":case"day":case"d":return r*Fi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ts;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ps;case"seconds":case"second":case"secs":case"sec":case"s":return r*Rs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function pk(e){var t=Math.abs(e);return t>=Fi?Math.round(e/Fi)+"d":t>=Ts?Math.round(e/Ts)+"h":t>=Ps?Math.round(e/Ps)+"m":t>=Rs?Math.round(e/Rs)+"s":e+"ms"}function mk(e){var t=Math.abs(e);return t>=Fi?Vu(e,t,Fi,"day"):t>=Ts?Vu(e,t,Ts,"hour"):t>=Ps?Vu(e,t,Ps,"minute"):t>=Rs?Vu(e,t,Rs,"second"):e+" ms"}function Vu(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Mc=v((NX,B0)=>{function yk(e){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=U0(),r.destroy=l,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let c=0;for(let h=0;h<f.length;h++)c=(c<<5)-c+f.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=t;function r(f){let c,h=null,d,p;function y(...w){if(!y.enabled)return;let _=y,S=Number(new Date),g=S-(c||S);_.diff=g,_.prev=c,_.curr=S,c=S,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let m=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,($,E)=>{if($==="%%")return"%";m++;let O=r.formatters[E];if(typeof O=="function"){let k=w[m];$=O.call(_,k),w.splice(m,1),m--}return $}),r.formatArgs.call(_,w),(_.log||r.log).apply(_,w)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:w=>{h=w}}),typeof r.init=="function"&&r.init(y),y}function n(f,c){let h=r(this.namespace+(typeof c>"u"?":":c)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let c,h=(typeof f=="string"?f:"").split(/[\s,]+/),d=h.length;for(c=0;c<d;c++)h[c]&&(f=h[c].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(c=>"-"+c)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let c,h;for(c=0,h=r.skips.length;c<h;c++)if(r.skips[c].test(f))return!1;for(c=0,h=r.names.length;c<h;c++)if(r.names[c].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}B0.exports=yk});var G0=v((vr,Uu)=>{vr.formatArgs=vk;vr.save=_k;vr.load=wk;vr.useColors=gk;vr.storage=Sk();vr.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gk(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vk(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Uu.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}vr.log=console.debug||console.log||(()=>{});function _k(e){try{e?vr.storage.setItem("debug",e):vr.storage.removeItem("debug")}catch{}}function wk(){let e;try{e=vr.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Sk(){try{return localStorage}catch{}}Uu.exports=Mc()(vr);var{formatters:bk}=Uu.exports;bk.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var J0=v((kX,K0)=>{"use strict";K0.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var X0=v((xX,W0)=>{"use strict";var Ek=require("os"),Y0=require("tty"),$r=J0(),{env:wt}=process,ni;$r("no-color")||$r("no-colors")||$r("color=false")||$r("color=never")?ni=0:($r("color")||$r("colors")||$r("color=true")||$r("color=always"))&&(ni=1);"FORCE_COLOR"in wt&&(wt.FORCE_COLOR==="true"?ni=1:wt.FORCE_COLOR==="false"?ni=0:ni=wt.FORCE_COLOR.length===0?1:Math.min(parseInt(wt.FORCE_COLOR,10),3));function Hc(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Vc(e,t){if(ni===0)return 0;if($r("color=16m")||$r("color=full")||$r("color=truecolor"))return 3;if($r("color=256"))return 2;if(e&&!t&&ni===void 0)return 0;let r=ni||0;if(wt.TERM==="dumb")return r;if(process.platform==="win32"){let n=Ek.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in wt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in wt)||wt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in wt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(wt.TEAMCITY_VERSION)?1:0;if(wt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in wt){let n=parseInt((wt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(wt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(wt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(wt.TERM)||"COLORTERM"in wt?1:r}function Rk(e){let t=Vc(e,e&&e.isTTY);return Hc(t)}W0.exports={supportsColor:Rk,stdout:Hc(Vc(!0,Y0.isatty(1))),stderr:Hc(Vc(!0,Y0.isatty(2)))}});var Z0=v((Nt,Gu)=>{var Pk=require("tty"),Bu=require("util");Nt.init=Nk;Nt.log=$k;Nt.formatArgs=Ok;Nt.save=Ck;Nt.load=Ik;Nt.useColors=Tk;Nt.destroy=Bu.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Nt.colors=[6,2,3,4,5,1];try{let e=X0();e&&(e.stderr||e).level>=2&&(Nt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Nt.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function Tk(){return"colors"in Nt.inspectOpts?Boolean(Nt.inspectOpts.colors):Pk.isatty(process.stderr.fd)}function Ok(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Gu.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Ak()+t+" "+e[0]}function Ak(){return Nt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function $k(...e){return process.stderr.write(Bu.format(...e)+`
`)}function Ck(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Ik(){return process.env.DEBUG}function Nk(e){e.inspectOpts={};let t=Object.keys(Nt.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Nt.inspectOpts[t[r]]}Gu.exports=Mc()(Nt);var{formatters:Q0}=Gu.exports;Q0.o=function(e){return this.inspectOpts.colors=this.useColors,Bu.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Q0.O=function(e){return this.inspectOpts.colors=this.useColors,Bu.inspect(e,this.inspectOpts)}});var Bc=v((qX,Uc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Uc.exports=G0():Uc.exports=Z0()});var ev=v((jX,Jc)=>{"use strict";var kk=jc(),xk=require("events").EventEmitter,qk=require("util").inherits,St=Bc()("avvio"),{AVV_ERR_READY_TIMEOUT:jk}=Lc(),Gc=Symbol.for("plugin-meta");function Dk(e,t){return e[Gc]&&e[Gc].name?e[Gc].name:typeof t<"u"&&typeof t!="function"&&t.name?t.name:e.name?e.name:e.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}function Lk(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}function Os(e,t,r,n,i){this.started=!1,this.func=t,this.opts=r,this.onFinish=null,this.parent=e,this.timeout=i===void 0?e._timeout:i,this.name=Dk(t,r),this.isAfter=n,this.q=kk(e,Fk,1),this.q.pause(),this._error=null,this.loaded=!1,this._promise=null}qk(Os,xk);Os.prototype.exec=function(e,t){let r=this.func,n=!1,i=this.name;if(this.parent._error&&!this.isAfter){St("skipping loading of plugin as parent errored and it is not an after",i),process.nextTick(t);return}if(this.isAfter)this.server=e;else try{this.server=this.parent.override(e,r,this.opts)}catch(u){return St("override errored",i),t(u)}this.opts=typeof this.opts=="function"?this.opts(this.server):this.opts,St("exec",i);let s,o=u=>{if(n){St("loading complete",i);return}this._error=u,St(u?"exec errored":"exec completed",i),n=!0,s&&clearTimeout(s),t(u)};this.timeout>0&&(St("setting up timeout",i,this.timeout),s=setTimeout(function(){St("timed out",i),s=null;let u=new jk(i);u.fn=r,o(u)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.opts,o);a&&typeof a.then=="function"&&(St("exec: resolving promise",i),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u)))};Os.prototype.loadedSoFar=function(){if(this.loaded)return Promise.resolve();let e=()=>{this.server.after((r,n)=>{this._error=r,this.q.pause(),r?(St("rejecting promise",this.name,r),this._promise.reject(r)):(St("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.q.resume()},t;return this._promise?t=Promise.resolve():(this._promise=Lk(),t=this._promise.promise,this.server?e():this.on("start",e)),t};Os.prototype.enqueue=function(e,t){St("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.q.push(e,t)};Os.prototype.finish=function(e,t){St("finish",this.name,e);let r=()=>{this.loaded||(St("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e){this._promise&&(this._promise.reject(e),this._promise=null),r();return}let n=()=>{if(St("check",this.name,this.q.length(),this.q.running(),this._promise),this.q.length()===0&&this.q.running()===0)if(this._promise){let i=()=>{St("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(i,i),this._promise=null}else r();else St("delayed",this.name),this.q.drain=()=>{St("drain",this.name),this.q.drain=zk,queueMicrotask(n)}};queueMicrotask(n),this.q.resume()};function Fk(e,t){let r=this;process.nextTick(Kc.bind(r),e,t)}function Kc(e,t){if(typeof e.func.then=="function"){e.func.then(n=>{typeof n.default=="function"&&(n=n.default),e.func=n,Kc.call(this,e,t)},t);return}let r=this._current[0];this._current.unshift(e),e.exec(r&&r.server||this._server,n=>{e.finish(n,i=>{this._current.shift(),t(i)})})}function zk(){}Jc.exports=Os;Jc.exports.loadPlugin=Kc});var sv=v((DX,Zc)=>{"use strict";var tv=jc(),Mk=require("events").EventEmitter,Hk=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Yc,AVV_ERR_CALLBACK_NOT_FN:Qo,AVV_ERR_PLUGIN_NOT_VALID:Vk,AVV_ERR_ROOT_PLG_BOOTED:Uk,AVV_ERR_READY_TIMEOUT:Bk}=Lc(),Gk=H0(),Qc=ev(),As=Bc()("avvio"),Ku=Symbol("kAvvio"),Wc=Symbol("kThenifyDoNotWrap");function Kk(e,t,r){let n=t.expose||{},i=n.use||"use",s=n.after||"after",o=n.ready||"ready",a=n.onClose||"onClose",u=n.close||"close";if(e[i])throw new Yc(i);if(e[s])throw new Yc(s);if(e[o])throw new Yc(o);e[i]=function(l,f){return r.use(l,f),this},Object.defineProperty(e,"then",{get:nv.bind(r)}),e[Ku]=!0,e[s]=function(l){return typeof l!="function"?r._loadRegistered():(r.after(Xc(l,this)),this)},e[o]=function(l){if(l&&typeof l!="function")throw new Qo(o,typeof l);return r.ready(l?Xc(l,this):void 0)},e[a]=function(l){if(typeof l!="function")throw new Qo(a,typeof l);return r.onClose(Qk(l,this)),this},e[u]=function(l){if(l&&typeof l!="function")throw new Qo(u,typeof l);return l?(r.close(Xc(l,this)),this):r.close()}}function bt(e,t,r){if(typeof e=="function"&&arguments.length===1&&(r=e,t={},e=null),typeof t=="function"&&(r=t,t={}),t=t||{},!(this instanceof bt)){let n=new bt(e,t,r);return e&&Kk(e,t,n),n}t.autostart!==!1&&(t.autostart=!0),e=e||this,this._timeout=Number(t.timeout)||0,this._server=e,this._current=[],this._error=null,this._isOnCloseHandlerKey=Symbol("isOnCloseHandler"),this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new Gk,this._readyQ=tv(this,iv,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=rv},this._closeQ=tv(this,Xk,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=rv},this._doStart=null,this._root=new Qc(this,Jk.bind(this),t,!1,0),this._root.once("start",(n,i,s)=>{let o=this.pluginTree.start(null,i,s);this._root.once("loaded",(a,u,l)=>{this.pluginTree.stop(o,l)})}),Qc.loadPlugin.call(this,this._root,n=>{As("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){n=n||this._error||i}if(n){if(this._error=n,this._readyQ.length()===0)throw n}else this.booted=!0;this._readyQ.resume()})}function Jk(e,t,r){this._doStart=r,t.autostart&&this.start()}Hk(bt,Mk);bt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};bt.prototype.override=function(e,t,r){return e};function Yk(e){if(e&&typeof e=="object"&&typeof e.default=="function"&&(e=e.default),!(e&&(typeof e=="function"||typeof e.then=="function")))throw new Vk(typeof e);return e}bt.prototype[Ku]=!0;bt.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this};bt.prototype._loadRegistered=function(){let e=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.q.resume()),e?e.loadedSoFar():Promise.resolve()};Object.defineProperty(bt.prototype,"then",{get:nv});bt.prototype._addPlugin=function(e,t,r){if(e=Yk(e),t=t||{},this.booted)throw new Uk;let n=this._current[0],i=new Qc(this,e,t,r);if(i.once("start",(s,o,a)=>{let u=this.pluginTree.start(n.name,o,a);i.once("loaded",(l,f,c)=>{this.pluginTree.stop(u,c)})}),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,s=>{s&&(this._error=s)}),i};bt.prototype.after=function(e){if(!e)return this._loadRegistered();this._addPlugin(t.bind(this),{},!0);function t(r,n,i){iv.call(this,e,i)}return this};bt.prototype.onClose=function(e){if(typeof e!="function")throw new Error("not a function");e[this._isOnCloseHandlerKey]=!0,this._closeQ.unshift(e,t.bind(this));function t(r){r&&(this._error=r)}return this};bt.prototype.close=function(e){let t;if(e){if(typeof e!="function")throw new Qo("close",typeof e)}else t=new Promise(function(r,n){e=function(i){if(i)return n(i);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),t};bt.prototype.ready=function(e){if(e){if(typeof e!="function")throw new Qo("ready",typeof e);this._readyQ.push(e),queueMicrotask(this.start.bind(this));return}return new Promise((t,r)=>{this._readyQ.push(i),this.start();let n=this._current[0].server;function i(s,o,a){s?r(s):t(n),process.nextTick(a)}})};bt.prototype.prettyPrint=function(){return this.pluginTree.prittyPrint()};bt.prototype.toJSON=function(){return this.pluginTree.toJSON()};function rv(){}function nv(){if(this.booted){As("thenify returning null because we are already booted");return}if(this[Wc]){this[Wc]=!1;return}return As("thenify"),(e,t)=>this._loadRegistered().then(()=>(this[Wc]=!0,e(this._server)),t)}function iv(e,t){let r=this._server,n=this._error,i;if(this._error=null,e.length===0)this._error=n,i=e(),i&&!i[Ku]&&typeof i.then=="function"?i.then(()=>process.nextTick(t),s=>process.nextTick(t,s)):process.nextTick(t);else if(e.length===1)i=e(n),i&&!i[Ku]&&typeof i.then=="function"?i.then(()=>process.nextTick(t),s=>process.nextTick(t,s)):process.nextTick(t);else if(this._timeout===0){let s=o=>{this._error=o,t(this._error)};e.length===2?e(n,s):e(n,r,s)}else Wk.call(this,e,n,r,t)}function Wk(e,t,r,n){let i=e.name;As("setting up ready timeout",i,this._timeout);let s=setTimeout(()=>{As("timed out",i),s=null;let a=new Bk(i);a.fn=e,this._error=a,n(a)},this._timeout);e.length===2?e(t,o.bind(this)):e(t,r,o.bind(this));function o(a){s&&(clearTimeout(s),this._error=a,n(this._error))}}function Xk(e,t){let r=this._server,n=e[this._isOnCloseHandlerKey];if(e.length===0||e.length===1){let i;n?i=e(r):i=e(this._error),i&&typeof i.then=="function"?(As("resolving close/onClose promise"),i.then(()=>process.nextTick(t),s=>process.nextTick(t,s))):process.nextTick(t)}else e.length===2?e(n?r:this._error,t):n?e(r,t):e(this._error,r,t)}function Qk(e,t){return r.bind(t);function r(n,i){let s;e.length===0?(s=e(),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e.length===1?(s=e(this),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e(this,i)}}function Xc(e,t){return r.bind(t);function r(n,i){let s;e?e.length===0?(s=e(),s&&s.then?s.then(function(){process.nextTick(i,n)},i):process.nextTick(i,n)):e.length===1?(s=e(n),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e.length===2?e(n,i):e(n,this,i):process.nextTick(i)}}Zc.exports=bt;Zc.exports.express=function(e){return bt(e,{expose:{use:"load"}})}});var Et=v((LX,ov)=>{"use strict";var Zk={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};ov.exports=Zk});var rh=v((FX,Ju)=>{"use strict";var{format:eh}=require("util");function th(){let e={},t=new Map,r=Object.create(null);function n(s,o,a,{unlimited:u=!1}={}){if(!s)throw new Error("Warning name must not be empty");if(!o)throw new Error("Warning code must not be empty");if(!a)throw new Error("Warning message must not be empty");if(typeof u!="boolean")throw new Error("Warning opts.unlimited must be a boolean");if(o=o.toUpperCase(),e[o]!==void 0)throw new Error(`The code '${o}' already exist`);function l(f,c,h){let d;return f&&c&&h?d=eh(a,f,c,h):f&&c?d=eh(a,f,c):f?d=eh(a,f):d=a,{code:o,name:s,message:d}}return Object.assign(r,{unlimited:u}),t.set(o,u),e[o]=l,e[o]}function i(s,o,a,u){if(t.get(s)===!0&&r.unlimited===!1)return;if(e[s]===void 0)throw new Error(`The code '${s}' does not exist`);t.set(s,!0);let l=e[s](o,a,u);process.emitWarning(l.message,l.name,l.code)}return{create:n,emit:i,emitted:t}}Ju.exports=th;Ju.exports.default=th;Ju.exports.processWarning=th});var ii=v((zX,av)=>{"use strict";var Cr=rh()();Cr.create("FastifyDeprecation","FSTDEP005",'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.');Cr.create("FastifyDeprecation","FSTDEP006","You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s");Cr.create("FastifyDeprecation","FSTDEP007",'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.');Cr.create("FastifyDeprecation","FSTDEP008",'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.');Cr.create("FastifyDeprecation","FSTDEP009",'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.');Cr.create("FastifyDeprecation","FSTDEP010",'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.');Cr.create("FastifyDeprecation","FSTDEP011",'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.');Cr.create("FastifyDeprecation","FSTDEP012",'Request#context property access is deprecated. Please use "Request#routeConfig" or "Request#routeSchema" instead for accessing Route settings. The "Request#context" will be removed in `fastify@5`.');Cr.create("FastifyDeprecation","FSTDEP013",'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.');Cr.create("FastifyDeprecation","FSTDEP014","You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes.");Cr.create("FastifyWarning","FSTWRN001","The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",{unlimited:!0});av.exports=Cr});var uv=v((MX,Yu)=>{"use strict";var{format:ex}=require("util");function tx(){return`${this.name} [${this.code}]: ${this.message}`}function nh(e,t,r=500,n=Error){if(!e)throw new Error("Fastify error code must not be empty");if(!t)throw new Error("Fastify error message must not be empty");e=e.toUpperCase(),!r&&(r=void 0);function i(...s){if(!new.target)return new i(...s);this.code=e,this.name="FastifyError",this.statusCode=r,this.message=ex(t,...s),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,i)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),i.prototype[Symbol.toStringTag]="Error",i.prototype.toString=tx,i}Yu.exports=nh;Yu.exports.default=nh;Yu.exports.createError=nh});var zt=v((HX,Wu)=>{"use strict";var z=uv(),$s={FST_ERR_NOT_FOUND:z("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:z("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:z("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:z("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:z("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:z("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:z("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VERSION_CONSTRAINT_NOT_STR:z("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500,TypeError),FST_ERR_VALIDATION:z("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:z("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:z("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:z("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:z("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:z("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:z("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:z("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:z("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:z("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:z("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:z("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:z("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:z("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:z("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:z("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:z("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:z("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:z("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:z("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:z("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.io/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:z("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:z("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:z("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:z("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_ALREADY_SENT:z("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:z("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:z("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:z("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:z("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:z("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:z("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:z("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:z("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:z("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:z("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:z("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:z("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:z("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:z("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:z("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:z("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:z("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:z("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:z("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:z("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:z("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:z("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:z("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:z("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:z("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:z("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:z("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:z("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:z("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:z("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:z("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:z("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:z("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:z("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:z("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:z("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:z("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:z("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:z("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:z("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:z("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:z("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:z("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:z("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function rx(e,t){return t.cause=e,t}Wu.exports=$s;Wu.exports.appendStackTrace=rx;Wu.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:$s.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:$s.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:$s.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:$s.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:$s.FST_ERR_PLUGIN_TIMEOUT}});var vv=v((VX,sh)=>{"use strict";var nx=require("http"),ix=require("https"),sx=require("dns"),lv=ii(),{kState:Mt,kOptions:ox,kServerBindings:ax}=Et(),{FST_ERR_HTTP2_INVALID_VERSION:ux,FST_ERR_REOPENED_CLOSE_SERVER:hv,FST_ERR_REOPENED_SERVER:dv,FST_ERR_LISTEN_OPTIONS_INVALID:lx}=zt();sh.exports.createServer=fx;sh.exports.compileValidateHTTPVersion=hx;function pv(e){return`Server listening at ${e}`}function fx(e,t){let r=yv(e,t);function n(i,...s){let o=s.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)i=ih([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")lv.emit("FSTDEP011"),i=ih(Array.from(arguments)),o=i.cb;else if(s.length>1){lv.emit("FSTDEP011");let l=i.path?[i.path]:[i.port??0,i.host??"localhost"];Object.assign(i,ih([...l,...s]))}else i.cb=o;if(i.signal){if(typeof i.signal.on!="function"&&typeof i.signal.addEventListener!="function")throw new lx("Invalid options.signal");if(i.signal.aborted)this.close();else{let l=()=>{this.close()};i.signal.addEventListener("abort",l,{once:!0})}}let u;if(i.path==null?u=i.host??"localhost":u=i.host,Object.prototype.hasOwnProperty.call(i,"host")===!1&&(i.host=u),u==="localhost"&&(i.cb=(l,f)=>{if(l){o(l,f);return}fv.call(this,r,t,e,i,()=>{this[Mt].listening=!0,o(null,f)})}),o===void 0){let l=cx.call(this,r,i);return u==="localhost"?l.then(f=>new Promise((c,h)=>{fv.call(this,r,t,e,i,()=>{this[Mt].listening=!0,c(f)})})):l}this.ready(mv.call(this,r,i))}return{server:r,listen:n}}function fv(e,t,r,n,i){this[Mt].listening=!1,sx.lookup(n.host,{all:!0},(s,o)=>{if(s){i();return}let a=e.listening&&r.serverFactory,u=0,l=0;if(!a){let c=e.address();for(let h of o)if(h.address!==c.address){u++;let d=Object.assign({},n,{host:h.address,port:c.port,cb:w=>{l++,w||(this[ax].push(p),this.onClose((_,S)=>{_[Mt].listening?(p.close(()=>S()),r.forceCloseConnections==="idle"?p.closeIdleConnections():typeof p.closeAllConnections=="function"&&r.forceCloseConnections&&p.closeAllConnections()):S()})),l===u&&i()}}),p=yv(r,t),y=()=>{p.close(()=>{})};p.on("upgrade",e.emit.bind(e,"upgrade")),e.on("unref",y),e.on("close",y),e.on("error",y),this[Mt].listening=!1,mv.call(this,p,d)()}}if(u===0){i();return}let f=e.unref;e.unref=function(){f.call(e),e.emit("unref")}})}function mv(e,t){let r=n=>{if(e.removeListener("error",r),n)this[Mt].listening=!1,t.cb(n,null);else{let i=gv.call(this,e,t.listenTextResolver||pv);t.cb(null,i)}};return n=>{if(n!=null)return t.cb(n);if(this[Mt].listening&&this[Mt].closing)return t.cb(new hv,null);if(this[Mt].listening)return t.cb(new dv,null);e.once("error",r),this[Mt].closing||(e.listen(t,r),this[Mt].listening=!0)}}function cx(e,t){return this[Mt].listening&&this[Mt].closing?Promise.reject(new hv):this[Mt].listening?Promise.reject(new dv):this.ready().then(()=>{let r,n=new Promise((s,o)=>{r=a=>{this[Mt].listening=!1,o(a)},e.once("error",r)}),i=new Promise((s,o)=>{e.listen(t,()=>{e.removeListener("error",r),s(gv.call(this,e,t.listenTextResolver||pv))}),this[Mt].listening=!0});return Promise.race([n,i])})}function hx(e){let t=!1,r=new Map;return e.serverFactory&&(t=!0),e.http2?(r.set("2.0",!0),e.https&&e.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(i){return t||r.has(i)}}function yv(e,t){let r=null,n=e.https===!0?{}:e.https;return e.serverFactory?r=e.serverFactory(t,e):e.http2?(typeof n=="object"?r=cv().createSecureServer(n,t):r=cv().createServer(t),r.on("session",px(e.http2SessionTimeout))):(n?r=ix.createServer(n,t):r=nx.createServer(e.http,t),r.keepAliveTimeout=e.keepAliveTimeout,r.requestTimeout=e.requestTimeout,e.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=e.maxRequestsPerSocket)),e.serverFactory||r.setTimeout(e.connectionTimeout),r}function ih(e){if(e.length===0)return{port:0,host:"localhost"};let r={cb:typeof e[e.length-1]=="function"?e.pop():void 0},n=e[0],i=e.length,s=e[i-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=i>1?s:void 0):(r.port=i>=1&&Number.isInteger(n)?n:dx(n),r.host=i>=2&&e[1]?e[1]:"localhost",r.backlog=i>=3?e[2]:void 0),r}function dx(e){let t=Number(e);return t>=0&&!Number.isNaN(t)&&Number.isInteger(t)?t:0}function gv(e,t){let r=e.address(),n=typeof r=="string";n||(r.address.indexOf(":")===-1?r=r.address+":"+r.port:r="["+r.address+"]:"+r.port),r=(n?"":"http"+(this[ox].https?"s":"")+"://")+r;let i=t(r);return this.log.info(i),r}function cv(){try{return require("http2")}catch{throw new ux}}function px(e){return function(t){t.setTimeout(e,mx)}}function mx(){this.close()}});var zi=v((UX,Rv)=>{"use strict";var yx=["onRoute","onRegister","onReady","preClose","onClose"],bv=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],gx=bv.concat(yx),{FST_ERR_HOOK_INVALID_TYPE:vx,FST_ERR_HOOK_INVALID_HANDLER:_x,FST_ERR_SEND_UNDEFINED_ERR:Xu,FST_ERR_HOOK_TIMEOUT:wx,FST_ERR_HOOK_NOT_SUPPORTED:Sx,AVVIO_ERRORS_MAP:_v,appendStackTrace:wv}=zt(),{kChildren:oh,kHooks:bx,kRequestPayloadStream:Sv}=Et();function Zo(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}Zo.prototype=Object.create(null);Zo.prototype.validate=function(e,t){if(typeof e!="string")throw new vx;if(Array.isArray(this[e])===!1)throw new Sx(e);if(typeof t!="function")throw new _x(e,Object.prototype.toString.call(t))};Zo.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};function Ex(e){let t=new Zo;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.preClose=[],t}function Ev(e,t,r,n){let i=r[bx][e],s=0,o=0;u();function a(f){if(f){f.code==="AVV_ERR_READY_TIMEOUT"?f=wv(f,new wx(e)):f=_v[f.code]!=null?wv(f,new _v[f.code](f.message)):f,n(f);return}n()}function u(f){if(f){a(f);return}if(s===i.length&&o===r[oh].length){s===0&&o===0?a():t(function(h,d){a(h),d(h)});return}if(s===i.length&&o<r[oh].length){let c=r[oh][o++];Ev(e,t,c,u);return}t(l(i[s++],r)),u()}function l(f,c){return function(h,d){if(h){d(h);return}if(f.length===1){try{f.call(c,d)}catch(p){d(p)}return}try{let p=f.call(c);if(p&&typeof p.then=="function"){p.then(d,d);return}}catch(p){h=p}d(h)}}}function Cs(e){return function(r,n,i,s){let o=0;function a(f){if(f||o===r.length){s(f,n,i);return}let c;try{c=e(r[o++],n,i,a)}catch(h){s(h,n,i);return}c&&typeof c.then=="function"&&c.then(u,l)}function u(){a()}function l(f){f||(f=new Xu),s(f,n,i)}a()}}function Rx(e,t,r,n){return e(t,r,n)}var Px=Cs(Rx),Tx=Cs(ea),Ox=Cs(ea),Ax=Cs(ea),$x=Cs(ea);function Cx(e,t,r,n,i){let s=0;function o(l,f){if(l){i(l,t,r,n);return}if(f!==void 0&&(n=f),s===e.length){i(null,t,r,n);return}let c;try{c=e[s++](t,r,n,o)}catch(h){i(h,t,r);return}c&&typeof c.then=="function"&&c.then(a,u)}function a(l){o(null,l)}function u(l){l||(l=new Xu),i(l,t,r,n)}o()}function Ix(e,t,r,n){let i=0;function s(u,l){if(r.sent)return;if(typeof l<"u"&&(t[Sv]=l),u||i===e.length){n(u,t,r);return}let f;try{f=e[i++](t,r,t[Sv],s)}catch(c){n(c,t,r);return}f&&typeof f.then=="function"&&f.then(o,a)}function o(u){s(null,u)}function a(u){u||(u=new Xu),n(u,t,r)}s()}function Nx(e,t,r){let n=0;function i(a){if(a||n===e.length){r(a,t);return}let u;try{u=e[n++](t,i)}catch(l){r(l,t);return}u&&typeof u.then=="function"&&u.then(s,o)}function s(){i()}function o(a){a||(a=new Xu),r(a,t)}i()}function ea(e,t,r,n){if(r.sent!==!0)return e(t,r,n)}Rv.exports={Hooks:Zo,buildHooks:Ex,hookRunnerGenerator:Cs,preParsingHookRunner:Ix,onResponseHookRunner:Px,onSendHookRunner:Cx,onRequestAbortHookRunner:Nx,hookIterator:ea,hookRunnerApplication:Ev,onPreHandlerHookRunner:Ox,onPreValidationHookRunner:Tx,onRequestHookRunner:$x,onTimeoutHookRunner:Ax,lifecycleHooks:bv,supportedHooks:gx}});var fh=v((BX,Tv)=>{"use strict";var{kSchemaHeaders:el,kSchemaParams:ah,kSchemaQuerystring:uh,kSchemaBody:lh,kSchemaResponse:Pv}=Et(),kx=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:xx}=zt(),Qu=ii();function qx(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[Pv]=Object.keys(e.schema.response).reduce(function(i,s){let o=e.schema.response[s];if(s=s.toLowerCase(),!kx.exec(s))throw new xx;if(o.content){let a={};for(let u of Object.keys(o.content)){let l=o.content[u].schema;a[u]=t({schema:l,url:n,method:r,httpStatus:s,contentType:u})}i[s]=a}else i[s]=t({schema:o,url:n,method:r,httpStatus:s});return i},{})}function jx(e,t,r){let{schema:n}=e;if(!n)return;let{method:i,url:s}=e.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))e[el]=t({schema:o,method:i,url:s,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(u=>{a[u]=o[u]}),a.required instanceof Array&&(a.required=a.required.map(u=>u.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(u=>{a.properties[u.toLowerCase()]=o.properties[u]})),e[el]=t({schema:a,method:i,url:s,httpPart:"headers"})}else Object.prototype.hasOwnProperty.call(n,"headers")&&Qu.emit("FSTWRN001","headers",i,s);n.body?e[lh]=t({schema:n.body,method:i,url:s,httpPart:"body"}):Object.prototype.hasOwnProperty.call(n,"body")&&Qu.emit("FSTWRN001","body",i,s),n.querystring?e[uh]=t({schema:n.querystring,method:i,url:s,httpPart:"querystring"}):Object.prototype.hasOwnProperty.call(n,"querystring")&&Qu.emit("FSTWRN001","querystring",i,s),n.params?e[ah]=t({schema:n.params,method:i,url:s,httpPart:"params"}):Object.prototype.hasOwnProperty.call(n,"params")&&Qu.emit("FSTWRN001","params",i,s)}function Zu(e,t,r){let n=t[r]===void 0,i=e&&e(n?null:t[r]);if(i!=null&&i.then)return i.then(o=>s(o)).catch(o=>o);return s(i);function s(o){return o===!1?e.errors:o&&o.error?o.error:(o&&o.value&&(t[r]=o.value),!1)}}function tl(e,t,r){let n=r===void 0;if(n||!r.skipParams){let s=Zu(e[ah],t,"params");if(s)return typeof s.then!="function"?si(s,"params",e.schemaErrorFormatter):Dx(s,e,t)}if(n||!r.skipBody){let s=Zu(e[lh],t,"body");if(s)return typeof s.then!="function"?si(s,"body",e.schemaErrorFormatter):Lx(s,e,t)}if(n||!r.skipQuery){let s=Zu(e[uh],t,"query");if(s)return typeof s.then!="function"?si(s,"querystring",e.schemaErrorFormatter):Fx(s,e,t)}let i=Zu(e[el],t,"headers");return i?typeof i.then!="function"?si(i,"headers",e.schemaErrorFormatter):zx(i,e,t):!1}function Dx(e,t,r){return e.then(n=>n?si(n,"params",t.schemaErrorFormatter):tl(t,r,{skipParams:!0}))}function Lx(e,t,r){return e.then(n=>n?si(n,"body",t.schemaErrorFormatter):tl(t,r,{skipParams:!0,skipBody:!0}))}function Fx(e,t,r){return e.then(n=>n?si(n,"querystring",t.schemaErrorFormatter):tl(t,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function zx(e,t,r){return e.then(n=>n?si(n,"headers",t.schemaErrorFormatter):!1)}function si(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=e,n.validationContext=t,n}Tv.exports={symbols:{bodySchema:lh,querystringSchema:uh,responseSchema:Pv,paramsSchema:ah,headersSchema:el},compileSchemasForValidation:jx,compileSchemasForSerialization:qx,validate:tl}});var ch=v((GX,Av)=>{"use strict";var{kReplyIsError:Ov,kReplyHijacked:Mx}=Et();function Hx(e,t){e.then(function(r){if(t[Mx]!==!0&&(r!==void 0||t.sent===!1&&t.raw.headersSent===!1&&t.request.raw.aborted===!1))try{t.send(r)}catch(n){t[Ov]=!0,t.send(n)}},function(r){if(t.sent===!0){t.log.error({err:r},"Promise errored, but reply.sent = true was set");return}t[Ov]=!0;try{t.send(r)}catch(n){t.send(n)}})}Av.exports=Hx});var mh=v((KX,ph)=>{"use strict";var{validate:Vx}=fh(),{onPreValidationHookRunner:Ux,onPreHandlerHookRunner:Bx}=zi(),Gx=ch(),{kReplyIsError:rl,kRouteContext:ai}=Et();function Kx(e,t,r){if(r.sent===!0)return;if(e!=null){r[rl]=!0,r.send(e);return}let n=t.raw.method,i=t.headers,s=t[ai];if(n==="GET"||n==="HEAD"){oi(t,r);return}let o=i["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"||n==="SEARCH"){o===void 0?i["transfer-encoding"]===void 0&&(i["content-length"]==="0"||i["content-length"]===void 0)?oi(t,r):s.contentTypeParser.run("",oi,t,r):s.contentTypeParser.run(o,oi,t,r);return}if(n==="OPTIONS"||n==="DELETE"){o!==void 0&&(i["transfer-encoding"]!==void 0||i["content-length"]!==void 0)?s.contentTypeParser.run(o,oi,t,r):oi(t,r);return}oi(t,r)}function oi(e,t){try{e[ai].preValidation!==null?Ux(e[ai].preValidation,e,t,hh):hh(null,e,t)}catch(r){hh(r,e,t)}}function hh(e,t,r){if(r.sent===!0)return;if(e!=null){r[rl]=!0,r.send(e);return}let n=Vx(r[ai],t);if(n&&typeof n.then=="function"||!1){let s=$v.bind(null,t,r);n.then(s,s)}else $v(t,r,n)}function $v(e,t,r){if(r){if(t[ai].attachValidation===!1){t.send(r);return}t.request.validationError=r}e[ai].preHandler!==null?Bx(e[ai].preHandler,e,t,dh):dh(null,e,t)}function dh(e,t,r){if(r.sent)return;if(e!=null){r[rl]=!0,r.send(e);return}let n;try{n=t[ai].handler(t,r)}catch(i){r[rl]=!0,r.send(i);return}n!==void 0&&(n!==null&&typeof n.then=="function"?Gx(n,r):r.send(n))}ph.exports=Kx;ph.exports[Symbol.for("internals")]={handler:oi,preHandlerCallback:dh}});var Iv=v((JX,Cv)=>{"use strict";function Is(){}var Jx={fatal:Is,error:Is,warn:Is,info:Is,debug:Is,trace:Is};Object.defineProperty(Cv,"exports",{get(){return Object.create(Jx)}})});var gh=v((YX,xv)=>{"use strict";var ta=e=>e&&typeof e.message=="string",yh=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return ta(r)?r:void 0}else return ta(t)?t:void 0},Nv=(e,t)=>{if(!ta(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=yh(e);return n?(t.add(e),r+`
caused by: `+Nv(n,t)):r},Yx=e=>Nv(e,new Set),kv=(e,t,r)=>{if(!ta(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=yh(e);if(i){t.add(e);let s=typeof e.cause=="function";return n+(s?"":": ")+kv(i,t,s)}else return n},Wx=e=>kv(e,new Set);xv.exports={isErrorLike:ta,getErrorCause:yh,stackWithCauses:Yx,messageWithCauses:Wx}});var vh=v((WX,jv)=>{"use strict";var Xx=Symbol("circular-ref-tag"),nl=Symbol("pino-raw-err-ref"),qv=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[nl]},set:function(e){this[nl]=e}}});Object.defineProperty(qv,nl,{writable:!0,value:{}});jv.exports={pinoErrProto:qv,pinoErrorSymbols:{seen:Xx,rawSymbol:nl}}});var Fv=v((XX,Lv)=>{"use strict";Lv.exports=wh;var{messageWithCauses:Qx,stackWithCauses:Zx,isErrorLike:Dv}=gh(),{pinoErrProto:eq,pinoErrorSymbols:tq}=vh(),{seen:_h}=tq,{toString:rq}=Object.prototype;function wh(e){if(!Dv(e))return e;e[_h]=void 0;let t=Object.create(eq);t.type=rq.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=Qx(e),t.stack=Zx(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>wh(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Dv(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,_h)&&(t[r]=wh(n)):t[r]=n}return delete e[_h],t.raw=e,t}});var Mv=v((QX,zv)=>{"use strict";zv.exports=sl;var{isErrorLike:Sh}=gh(),{pinoErrProto:nq,pinoErrorSymbols:iq}=vh(),{seen:il}=iq,{toString:sq}=Object.prototype;function sl(e){if(!Sh(e))return e;e[il]=void 0;let t=Object.create(nq);t.type=sq.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>sl(r))),Sh(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,il)&&(t.cause=sl(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Sh(n)?Object.prototype.hasOwnProperty.call(n,il)||(t[r]=sl(n)):t[r]=n}return delete e[il],t.raw=e,t}});var Bv=v((ZX,Uv)=>{"use strict";Uv.exports={mapHttpRequest:oq,reqSerializer:Vv};var bh=Symbol("pino-raw-req-ref"),Hv=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[bh]},set:function(e){this[bh]=e}}});Object.defineProperty(Hv,bh,{writable:!0,value:{}});function Vv(e){let t=e.info||e.socket,r=Object.create(Hv);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function oq(e){return{req:Vv(e)}}});var Yv=v((eQ,Jv)=>{"use strict";Jv.exports={mapHttpResponse:aq,resSerializer:Kv};var Eh=Symbol("pino-raw-res-ref"),Gv=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Eh]},set:function(e){this[Eh]=e}}});Object.defineProperty(Gv,Eh,{writable:!0,value:{}});function Kv(e){let t=Object.create(Gv);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function aq(e){return{res:Kv(e)}}});var Ph=v((tQ,Wv)=>{"use strict";var Rh=Fv(),uq=Mv(),ol=Bv(),al=Yv();Wv.exports={err:Rh,errWithCause:uq,mapHttpRequest:ol.mapHttpRequest,mapHttpResponse:al.mapHttpResponse,req:ol.reqSerializer,res:al.resSerializer,wrapErrorSerializer:function(t){return t===Rh?t:function(n){return t(Rh(n))}},wrapRequestSerializer:function(t){return t===ol.reqSerializer?t:function(n){return t(ol.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===al.resSerializer?t:function(n){return t(al.resSerializer(n))}}}});var Th=v((rQ,Xv)=>{"use strict";function lq(e,t){return t}Xv.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=lq;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)s&&i.push(s.getFileName());return i}});var Zv=v((nQ,Qv)=>{"use strict";Qv.exports=fq;function fq(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(t());try{if(/〇/.test(s))throw Error();let o=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(s))}})}}});var ul=v((iQ,e_)=>{"use strict";e_.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var r_=v((sQ,t_)=>{"use strict";var cq=ul();t_.exports=hq;function hq({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,s,o){var a=s.match(cq).map(f=>f.replace(/'|"|`/g,""));let u=s[0]==="[";a=a.map(f=>f[0]==="["?f.substr(1,f.length-2):f);let l=a.indexOf("*");if(l>-1){let f=a.slice(0,l),c=f.join("."),h=a.slice(l+1,a.length),d=h.length>0;r++,t.push({before:f,beforeStr:c,after:h,nested:d})}else i[s]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:u};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var i_=v((oQ,n_)=>{"use strict";var dq=ul();n_.exports=pq;function pq({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${vq(n,t)}
    }
    const { censor, secret } = this
    ${mq(e,i,s)}
    this.compileRestore()
    ${yq(r>0,i,s)}
    ${gq(t)}
  `).bind(o);return t===!1&&(a.restore=u=>o.restore(u)),a}function mq(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:s,path:o}=e[n],a=s?1:0,u=s?"":".",l=[];for(var f;(f=dq.exec(n))!==null;){let[,p]=f,{index:y,input:w}=f;y>a&&l.push(w.substring(0,y-(p?0:1)))}var c=l.map(p=>`o${u}${p}`).join(" && ");c.length===0?c+=`o${u}${n} != null`:c+=` && o${u}${n} != null`;let h=`
      switch (true) {
        ${l.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${i}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${c}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${u}${n} = ${t?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function yq(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function gq(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function vq(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Ah=v((aQ,a_)=>{"use strict";a_.exports={groupRedact:wq,groupRestore:_q,nestedRedact:bq,nestedRestore:Sq};function _q({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let s=e[i];r[s]=t[i]}}function wq(e,t,r,n,i){let s=s_(e,t);if(s==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(s),a=o.length,u=t.length,l=i?[...t]:void 0,f=new Array(a);for(var c=0;c<a;c++){let h=o[c];f[c]=s[h],i?(l[u]=h,s[h]=r(s[h],l)):n?s[h]=r(s[h]):s[h]=r}return{keys:o,values:f,target:s,flat:!0}}function Sq(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],s=r;for(let o=n.length-1;o>0;o--)s=s[n[o]];s[n[0]]=i}}function bq(e,t,r,n,i,s,o){let a=s_(t,r);if(a==null)return;let u=Object.keys(a),l=u.length;for(var f=0;f<l;f++){let c=u[f];Eq(e,a,c,r,n,i,s,o)}return e}function Oh(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function Eq(e,t,r,n,i,s,o,a){let u=i.length,l=u-1,f=r;var c=-1,h,d,p,y=null,w=null,_,S,g=!1,m=0,P=0,$=Rq();if(p=h=t[r],typeof h=="object"){for(;h!=null&&++c<u&&(P+=1,r=i[c],y=p,!(r!=="*"&&!w&&!(typeof h=="object"&&r in h)));)if(!(r==="*"&&(w==="*"&&(g=!0),w=r,c!==l))){if(w){let O=Object.keys(h);for(var E=0;E<O.length;E++){let k=O[E];if(S=h[k],_=r==="*",g)$=xn($,k,P),m=c,p=o_(S,m-1,r,n,i,s,o,a,f,h,d,p,_,k,c,l,$,e,t[f],P+1);else if(_||typeof S=="object"&&S!==null&&r in S){if(_?p=S:p=S[r],d=c!==l?p:o?a?s(p,[...n,f,...i]):s(p):s,_){let R=ra(xn($,k,P),p,t[f]);e.push(R),h[k]=d}else if(S[r]!==d)if(d===void 0&&s!==void 0||Oh(S,r)&&d===p)$=xn($,k,P);else{$=xn($,k,P);let R=ra(xn($,r,P+1),p,t[f]);e.push(R),S[r]=d}}}w=null}else{if(p=h[r],$=xn($,r,P),d=c!==l?p:o?a?s(p,[...n,f,...i]):s(p):s,!(Oh(h,r)&&d===p||d===void 0&&s!==void 0)){let O=ra($,p,t[f]);e.push(O),h[r]=d}h=h[r]}if(typeof h!="object")break}}}function s_(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}function o_(e,t,r,n,i,s,o,a,u,l,f,c,h,d,p,y,w,_,S,g){if(t===0&&(h||typeof e=="object"&&e!==null&&r in e)){if(h?c=e:c=e[r],f=p!==y?c:o?a?s(c,[...n,u,...i]):s(c):s,h){let m=ra(w,c,S);_.push(m),l[d]=f}else if(e[r]!==f){if(!(f===void 0&&s!==void 0||Oh(e,r)&&f===c)){let m=ra(xn(w,r,g+1),c,S);_.push(m),e[r]=f}}}for(let m in e)typeof e[m]=="object"&&(w=xn(w,m,g),o_(e[m],t-1,r,n,i,s,o,a,u,l,f,c,h,d,p,y,w,_,S,g+1))}function Rq(){return{parent:null,key:null,children:[],depth:0}}function xn(e,t,r){if(e.depth===r)return xn(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function ra(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return{path:i,value:t,target:r}}});var l_=v((uQ,u_)=>{"use strict";var{groupRestore:Pq,nestedRestore:Tq}=Ah();u_.exports=Oq;function Oq({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=Aq(e,n),s=t>0,o=s?{secret:e,groupRestore:Pq,nestedRestore:Tq}:{secret:e};this.restore=Function("o",$q(i,n,s)).bind(o)}}function Aq(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=e[r],a=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,u=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function $q(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var c_=v((lQ,f_)=>{"use strict";f_.exports=Cq;function Cq(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:o,wildcards:a,wcLen:u}=e,l=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&l.push({serialize:i}),u>0&&l.push({groupRedact:s,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...l)}});var p_=v((fQ,d_)=>{"use strict";var h_=Zv(),Iq=r_(),Nq=i_(),kq=l_(),{groupRedact:xq,nestedRedact:qq}=Ah(),jq=c_(),Dq=ul(),Lq=h_(),$h=e=>e;$h.restore=$h;var Fq="[REDACTED]";Ch.rx=Dq;Ch.validator=h_;d_.exports=Ch;function Ch(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:Fq,s=typeof i=="function",o=s&&i.length>1;if(t.length===0)return r||$h;Lq({paths:t,serialize:r,censor:i});let{wildcards:a,wcLen:u,secret:l}=Iq({paths:t,censor:i}),f=kq({secret:l,wcLen:u}),c="strict"in e?e.strict:!0;return Nq({secret:l,wcLen:u,serialize:r,strict:c,isCensorFct:s,censorFctTakesPath:o},jq({secret:l,censor:i,compileRestore:f,serialize:r,groupRedact:xq,nestedRedact:qq,wildcards:a,wcLen:u}))}});var Ns=v((cQ,m_)=>{"use strict";var zq=Symbol("pino.setLevel"),Mq=Symbol("pino.getLevel"),Hq=Symbol("pino.levelVal"),Vq=Symbol("pino.useLevelLabels"),Uq=Symbol("pino.useOnlyCustomLevels"),Bq=Symbol("pino.mixin"),Gq=Symbol("pino.lsCache"),Kq=Symbol("pino.chindings"),Jq=Symbol("pino.asJson"),Yq=Symbol("pino.write"),Wq=Symbol("pino.redactFmt"),Xq=Symbol("pino.time"),Qq=Symbol("pino.timeSliceIndex"),Zq=Symbol("pino.stream"),ej=Symbol("pino.stringify"),tj=Symbol("pino.stringifySafe"),rj=Symbol("pino.stringifiers"),nj=Symbol("pino.end"),ij=Symbol("pino.formatOpts"),sj=Symbol("pino.messageKey"),oj=Symbol("pino.errorKey"),aj=Symbol("pino.nestedKey"),uj=Symbol("pino.nestedKeyStr"),lj=Symbol("pino.mixinMergeStrategy"),fj=Symbol("pino.msgPrefix"),cj=Symbol("pino.wildcardFirst"),hj=Symbol.for("pino.serializers"),dj=Symbol.for("pino.formatters"),pj=Symbol.for("pino.hooks"),mj=Symbol.for("pino.metadata");m_.exports={setLevelSym:zq,getLevelSym:Mq,levelValSym:Hq,useLevelLabelsSym:Vq,mixinSym:Bq,lsCacheSym:Gq,chindingsSym:Kq,asJsonSym:Jq,writeSym:Yq,serializersSym:hj,redactFmtSym:Wq,timeSym:Xq,timeSliceIndexSym:Qq,streamSym:Zq,stringifySym:ej,stringifySafeSym:tj,stringifiersSym:rj,endSym:nj,formatOptsSym:ij,messageKeySym:sj,errorKeySym:oj,nestedKeySym:aj,wildcardFirstSym:cj,needsMetadataGsym:mj,useOnlyCustomLevelsSym:Uq,formattersSym:dj,hooksSym:pj,nestedKeyStrSym:uj,mixinMergeStrategySym:lj,msgPrefixSym:fj}});var kh=v((hQ,__)=>{"use strict";var Nh=p_(),{redactFmtSym:yj,wildcardFirstSym:ll}=Ns(),{rx:Ih,validator:gj}=Nh,y_=gj({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),g_="[Redacted]",v_=!1;function vj(e,t){let{paths:r,censor:n}=_j(e),i=r.reduce((a,u)=>{Ih.lastIndex=0;let l=Ih.exec(u),f=Ih.exec(u),c=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(c==="*"&&(c=ll),f===null)return a[c]=null,a;if(a[c]===null)return a;let{index:h}=f,d=`${u.substr(h,u.length-1)}`;return a[c]=a[c]||[],c!==ll&&a[c].length===0&&a[c].push(...a[ll]||[]),c===ll&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(d)}),a[c].push(d),a},{}),s={[yj]:Nh({paths:r,censor:n,serialize:t,strict:v_})},o=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((a,u)=>{if(i[u]===null)a[u]=l=>o(l,[u]);else{let l=typeof n=="function"?(f,c)=>n(f,[u,...c]):n;a[u]=Nh({paths:i[u],censor:l,serialize:t,strict:v_})}return a},s)}function _j(e){if(Array.isArray(e))return e={paths:e,censor:g_},y_(e),e;let{paths:t,censor:r=g_,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),y_({paths:t,censor:r}),{paths:t,censor:r}}__.exports=vj});var S_=v((dQ,w_)=>{"use strict";var wj=()=>"",Sj=()=>`,"time":${Date.now()}`,bj=()=>`,"time":${Math.round(Date.now()/1e3)}`,Ej=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;w_.exports={nullTime:wj,epochTime:Sj,unixTime:bj,isoTime:Ej}});var E_=v((pQ,b_)=>{"use strict";function Rj(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}b_.exports=Pj;function Pj(e,t,r){var n=r&&r.stringify||Rj,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var l="",f=1-i,c=-1,h=e&&e.length||0,d=0;d<h;){if(e.charCodeAt(d)===37&&d+1<h){switch(c=c>-1?c:0,e.charCodeAt(d+1)){case 100:case 102:if(f>=u||t[f]==null)break;c<d&&(l+=e.slice(c,d)),l+=Number(t[f]),c=d+2,d++;break;case 105:if(f>=u||t[f]==null)break;c<d&&(l+=e.slice(c,d)),l+=Math.floor(Number(t[f])),c=d+2,d++;break;case 79:case 111:case 106:if(f>=u||t[f]===void 0)break;c<d&&(l+=e.slice(c,d));var p=typeof t[f];if(p==="string"){l+="'"+t[f]+"'",c=d+2,d++;break}if(p==="function"){l+=t[f].name||"<anonymous>",c=d+2,d++;break}l+=n(t[f]),c=d+2,d++;break;case 115:if(f>=u)break;c<d&&(l+=e.slice(c,d)),l+=String(t[f]),c=d+2,d++;break;case 37:c<d&&(l+=e.slice(c,d)),l+="%",c=d+2,d++,f--;break}++f}++d}return c===-1?e:(c<h&&(l+=e.slice(c)),l)}});var qh=v((mQ,xh)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));xh.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};xh.exports=e}});var A_=v((yQ,O_)=>{"use strict";var sr=require("fs"),Tj=require("events"),Oj=require("util").inherits,R_=require("path"),P_=qh(),jh=100,Aj=16*1024;function T_(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(s,o){if(s){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",s)}):t.emit("error",s);return}t.fd=o,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t._reopening&&!t._writing&&t._len>t.minLength&&!t.destroyed&&ks(t)}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&sr.mkdirSync(R_.dirname(e),{recursive:!0});let s=sr.openSync(e,n,i);r(null,s)}catch(s){throw r(s),s}else t.mkdir?sr.mkdir(R_.dirname(e),{recursive:!0},s=>{if(s)return r(s);sr.open(e,n,i,r)}):sr.open(e,n,i,r)}function or(e){if(!(this instanceof or))return new or(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:s,sync:o,append:a=!0,mode:u,mkdir:l,retryEAGAIN:f,fsync:c}=e||{};if(t=t||r,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||Aj,this.sync=o||!1,this._fsync=c||!1,this.append=a||!1,this.mode=u,this.retryEAGAIN=f||(()=>!0),this.mkdir=l||!1,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")T_(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(h,d)=>{if(h){if((h.code==="EAGAIN"||h.code==="EBUSY")&&this.retryEAGAIN(h,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{P_(jh),this.release(void 0,0)}catch(y){this.release(y)}else setTimeout(()=>{sr.write(this.fd,this._writingBuf,"utf8",this.release)},jh);else this._writing=!1,this.emit("error",h);return}if(this.emit("write",d),this._len-=d,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(d),this._writingBuf.length){if(!this.sync){sr.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let y=sr.writeSync(this.fd,this._writingBuf,"utf8");this._len-=y,this._writingBuf=this._writingBuf.slice(y)}while(this._writingBuf)}catch(y){this.release(y);return}}this._fsync&&sr.fsyncSync(this.fd);let p=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):p>this.minLength?ks(this):this._ending?p>0?ks(this):(this._writing=!1,fl(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick($j,this)):this.emit("drain"))},this.on("newListener",function(h){h==="drain"&&(this._asyncDrainScheduled=!1)})}function $j(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}Oj(or,Tj);or.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&ks(this),this._len<this._hwm)};or.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||(this._bufs.length===0&&this._bufs.push(""),ks(this))};or.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&sr.close(t,r=>{if(r)return this.emit("error",r)})}),T_(e||this.file,this)};or.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?ks(this):fl(this)))};or.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e.length;){e.length<=0&&(e=this._bufs[0]);try{let t=sr.writeSync(this.fd,e,"utf8");e=e.slice(t),this._len=Math.max(this._len-t,0),e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;P_(jh)}}};or.prototype.destroy=function(){this.destroyed||fl(this)};function ks(e){let t=e.release;if(e._writing=!0,e._writingBuf=e._writingBuf||e._bufs.shift()||"",e.sync)try{let r=sr.writeSync(e.fd,e._writingBuf,"utf8");t(null,r)}catch(r){t(r)}else sr.write(e.fd,e._writingBuf,"utf8",t)}function fl(e){if(e.fd===-1){e.once("ready",fl.bind(null,e));return}e.destroyed=!0,e._bufs=[],e.fd!==1&&e.fd!==2?sr.close(e.fd,t):setImmediate(t);function t(r){if(r){e.emit("error",r);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}or.SonicBoom=or;or.default=or;O_.exports=or});var Dh=v((gQ,x_)=>{"use strict";var ui={exit:[],beforeExit:[]},$_={exit:Ij,beforeExit:Nj},C_=new FinalizationRegistry(kj);function Cj(e){ui[e].length>0||process.on(e,$_[e])}function I_(e){ui[e].length>0||process.removeListener(e,$_[e])}function Ij(){N_("exit")}function Nj(){N_("beforeExit")}function N_(e){for(let t of ui[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}}function kj(e){for(let t of["exit","beforeExit"]){let r=ui[t].indexOf(e);ui[t].splice(r,r+1),I_(t)}}function k_(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");Cj(e);let n=new WeakRef(t);n.fn=r,C_.register(t,n),ui[e].push(n)}function xj(e,t){k_("exit",e,t)}function qj(e,t){k_("beforeExit",e,t)}function jj(e){C_.unregister(e);for(let t of["exit","beforeExit"])ui[t]=ui[t].filter(r=>{let n=r.deref();return n&&n!==e}),I_(t)}x_.exports={register:xj,registerBeforeExit:qj,unregister:jj}});var q_=v((vQ,Dj)=>{Dj.exports={name:"thread-stream",version:"2.3.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^18.0.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var D_=v((_Q,j_)=>{"use strict";function Lj(e,t,r,n,i){let s=Date.now()+n,o=Atomics.load(e,t);if(o===r){i(null,"ok");return}let a=o,u=l=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(e,t),o===a?u(l>=1e3?1e3:l*2):o===r?i(null,"ok"):i(null,"not-equal")},l)};u(1)}function Fj(e,t,r,n,i){let s=Date.now()+n,o=Atomics.load(e,t);if(o!==r){i(null,"ok");return}let a=u=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{o=Atomics.load(e,t),o!==r?i(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}j_.exports={wait:Lj,waitDiff:Fj}});var F_=v((wQ,L_)=>{"use strict";L_.exports={WRITE_INDEX:4,READ_INDEX:8}});var U_=v((bQ,V_)=>{"use strict";var{version:zj}=q_(),{EventEmitter:Mj}=require("events"),{Worker:Hj}=require("worker_threads"),{join:Vj}=require("path"),{pathToFileURL:Uj}=require("url"),{wait:Bj}=D_(),{WRITE_INDEX:ar,READ_INDEX:an}=F_(),Gj=require("buffer"),Kj=require("assert"),q=Symbol("kImpl"),Jj=Gj.constants.MAX_STRING_LENGTH,hl=class{constructor(t){this._value=t}deref(){return this._value}},Yj=global.FinalizationRegistry||class{register(){}unregister(){}},Wj=global.WeakRef||hl,z_=new Yj(e=>{e.exited||e.terminate()});function Xj(e,t){let{filename:r,workerData:n}=t,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Vj(__dirname,"lib","worker.js"),o=new Hj(s,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:Uj(r).href,dataBuf:e[q].dataBuf,stateBuf:e[q].stateBuf,workerData:{$context:{threadStreamVersion:zj},...n}}});return o.stream=new hl(e),o.on("message",Qj),o.on("exit",H_),z_.register(e,o),o}function M_(e){Kj(!e[q].sync),e[q].needDrain&&(e[q].needDrain=!1,e.emit("drain"))}function cl(e){let t=Atomics.load(e[q].state,ar),r=e[q].data.length-t;if(r>0){if(e[q].buf.length===0){e[q].flushing=!1,e[q].ending?Hh(e):e[q].needDrain&&process.nextTick(M_,e);return}let n=e[q].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[q].buf=e[q].buf.slice(r),dl(e,n,cl.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[q].state,an,0),Atomics.store(e[q].state,ar,0);i>e[q].data.length;)r=r/2,n=e[q].buf.slice(0,r),i=Buffer.byteLength(n);e[q].buf=e[q].buf.slice(r),dl(e,n,cl.bind(null,e))}})}else if(r===0){if(t===0&&e[q].buf.length===0)return;e.flush(()=>{Atomics.store(e[q].state,an,0),Atomics.store(e[q].state,ar,0),cl(e)})}else un(e,new Error("overwritten"))}function Qj(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new Wj(t),t.flush(()=>{t[q].ready=!0,t.emit("ready")});break;case"ERROR":un(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;default:un(t,new Error("this should not happen: "+e.code))}}function H_(e){let t=this.stream.deref();t!==void 0&&(z_.unregister(t),t.worker.exited=!0,t.worker.off("exit",H_),un(t,e!==0?new Error("the worker thread exited"):null))}var Fh=class extends Mj{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[q]={},this[q].stateBuf=new SharedArrayBuffer(128),this[q].state=new Int32Array(this[q].stateBuf),this[q].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[q].data=Buffer.from(this[q].dataBuf),this[q].sync=t.sync||!1,this[q].ending=!1,this[q].ended=!1,this[q].needDrain=!1,this[q].destroyed=!1,this[q].flushing=!1,this[q].ready=!1,this[q].finished=!1,this[q].errored=null,this[q].closed=!1,this[q].buf="",this.worker=Xj(this,t)}write(t){if(this[q].destroyed)return zh(this,new Error("the worker has exited")),!1;if(this[q].ending)return zh(this,new Error("the worker is ending")),!1;if(this[q].flushing&&this[q].buf.length+t.length>=Jj)try{Lh(this),this[q].flushing=!0}catch(r){return un(this,r),!1}if(this[q].buf+=t,this[q].sync)try{return Lh(this),!0}catch(r){return un(this,r),!1}return this[q].flushing||(this[q].flushing=!0,setImmediate(cl,this)),this[q].needDrain=this[q].data.length-this[q].buf.length-Atomics.load(this[q].state,ar)<=0,!this[q].needDrain}end(){this[q].destroyed||(this[q].ending=!0,Hh(this))}flush(t){if(this[q].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[q].state,ar);Bj(this[q].state,an,r,1/0,(n,i)=>{if(n){un(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[q].destroyed||(Lh(this),Mh(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[q].ready}get destroyed(){return this[q].destroyed}get closed(){return this[q].closed}get writable(){return!this[q].destroyed&&!this[q].ending}get writableEnded(){return this[q].ending}get writableFinished(){return this[q].finished}get writableNeedDrain(){return this[q].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[q].errored}};function zh(e,t){setImmediate(()=>{e.emit("error",t)})}function un(e,t){e[q].destroyed||(e[q].destroyed=!0,t&&(e[q].errored=t,zh(e,t)),e.worker.exited?setImmediate(()=>{e[q].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[q].closed=!0,e.emit("close")}))}function dl(e,t,r){let n=Atomics.load(e[q].state,ar),i=Buffer.byteLength(t);return e[q].data.write(t,n),Atomics.store(e[q].state,ar,n+i),Atomics.notify(e[q].state,ar),r(),!0}function Hh(e){if(!(e[q].ended||!e[q].ending||e[q].flushing)){e[q].ended=!0;try{e.flushSync();let t=Atomics.load(e[q].state,an);Atomics.store(e[q].state,ar,-1),Atomics.notify(e[q].state,ar);let r=0;for(;t!==-1;){if(Atomics.wait(e[q].state,an,t,1e3),t=Atomics.load(e[q].state,an),t===-2){un(e,new Error("end() failed"));return}if(++r===10){un(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[q].finished=!0,e.emit("finish")})}catch(t){un(e,t)}}}function Lh(e){let t=()=>{e[q].ending?Hh(e):e[q].needDrain&&process.nextTick(M_,e)};for(e[q].flushing=!1;e[q].buf.length!==0;){let r=Atomics.load(e[q].state,ar),n=e[q].data.length-r;if(n===0){Mh(e),Atomics.store(e[q].state,an,0),Atomics.store(e[q].state,ar,0);continue}else if(n<0)throw new Error("overwritten");let i=e[q].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)e[q].buf=e[q].buf.slice(n),dl(e,i,t);else{for(Mh(e),Atomics.store(e[q].state,an,0),Atomics.store(e[q].state,ar,0);s>e[q].buf.length;)n=n/2,i=e[q].buf.slice(0,n),s=Buffer.byteLength(i);e[q].buf=e[q].buf.slice(n),dl(e,i,t)}}}function Mh(e){if(e[q].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[q].state,ar),r=0;for(;;){let n=Atomics.load(e[q].state,an);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[q].state,an,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}V_.exports=Fh});var Bh=v((EQ,B_)=>{"use strict";var{createRequire:Zj}=require("module"),eD=Th(),{join:Vh,isAbsolute:tD,sep:rD}=require("path"),nD=qh(),Uh=Dh(),iD=U_();function sD(e){Uh.register(e,aD),Uh.registerBeforeExit(e,uD),e.on("close",function(){Uh.unregister(e)})}function oD(e,t,r){let n=new iD({filename:e,workerData:t,workerOpts:r});n.on("ready",i),n.on("close",function(){process.removeListener("exit",s)}),process.on("exit",s);function i(){process.removeListener("exit",s),n.unref(),r.autoEnd!==!1&&sD(n)}function s(){n.closed||(n.flushSync(),nD(100),n.end())}return n}function aD(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function uD(e){e.flushSync()}function lD(e){let{pipeline:t,targets:r,levels:n,dedupe:i,options:s={},worker:o={},caller:a=eD()}=e,u=typeof a=="string"?[a]:a,l="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},f=e.target;if(f&&r)throw new Error("only one of target or targets can be specified");return r?(f=l["pino-worker"]||Vh(__dirname,"worker.js"),s.targets=r.map(h=>({...h,target:c(h.target)}))):t&&(f=l["pino-pipeline-worker"]||Vh(__dirname,"worker-pipeline.js"),s.targets=t.map(h=>({...h,target:c(h.target)}))),n&&(s.levels=n),i&&(s.dedupe=i),oD(c(f),s,o);function c(h){if(h=l[h]||h,tD(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return Vh(__dirname,"..","file.js");let d;for(let p of u)try{let y=p==="node:repl"?process.cwd()+rD:p;d=Zj(y).resolve(h);break}catch{continue}if(!d)throw new Error(`unable to determine transport target for "${h}"`);return d}}B_.exports=lD});var yl=v((RQ,nw)=>{"use strict";var G_=E_(),{mapHttpRequest:fD,mapHttpResponse:cD}=Ph(),Gh=A_(),K_=Dh(),{lsCacheSym:hD,chindingsSym:X_,writeSym:J_,serializersSym:Q_,formatOptsSym:Y_,endSym:dD,stringifiersSym:Z_,stringifySym:ew,stringifySafeSym:Kh,wildcardFirstSym:tw,nestedKeySym:pD,formattersSym:rw,messageKeySym:mD,errorKeySym:yD,nestedKeyStrSym:gD,msgPrefixSym:pl}=Ns(),{isMainThread:vD}=require("worker_threads"),_D=Bh();function xs(){}function wD(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=fD(n):typeof n.setHeader=="function"&&(n=cD(n)));let o;s===null&&i.length===0?o=[null]:(s=i.shift(),o=i),typeof this[pl]=="string"&&s!==void 0&&s!==null&&(s=this[pl]+s),this[J_](n,G_(s,o,this[Y_]),e)}else{let s=n===void 0?i.shift():n;typeof this[pl]=="string"&&s!==void 0&&s!==null&&(s=this[pl]+s),this[J_](null,G_(s,i,this[Y_]),e)}}}function W_(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var o=0;o<s&&i>=32;o++)i=e.charCodeAt(o),(i===34||i===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function SD(e,t,r,n){let i=this[ew],s=this[Kh],o=this[Z_],a=this[dD],u=this[X_],l=this[Q_],f=this[rw],c=this[mD],h=this[yD],d=this[hD][r]+n;d=d+u;let p;f.log&&(e=f.log(e));let y=o[tw],w="";for(let S in e)if(p=e[S],Object.prototype.hasOwnProperty.call(e,S)&&p!==void 0){l[S]?p=l[S](p):S===h&&l.err&&(p=l.err(p));let g=o[S]||y;switch(typeof p){case"undefined":case"function":continue;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":g&&(p=g(p));break;case"string":p=(g||W_)(p);break;default:p=(g||i)(p,s)}if(p===void 0)continue;w+=',"'+S+'":'+p}let _="";if(t!==void 0){p=l[c]?l[c](t):t;let S=o[c]||y;switch(typeof p){case"function":break;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":S&&(p=S(p)),_=',"'+c+'":'+p;break;case"string":p=(S||W_)(p),_=',"'+c+'":'+p;break;default:p=(S||i)(p,s),_=',"'+c+'":'+p}}return this[pD]&&w?d+this[gD]+w.slice(1)+"}"+_+a:d+w+_+a}function bD(e,t){let r,n=e[X_],i=e[ew],s=e[Kh],o=e[Z_],a=o[tw],u=e[Q_],l=e[rw].bindings;t=l(t);for(let f in t)if(r=t[f],(f!=="level"&&f!=="serializers"&&f!=="formatters"&&f!=="customLevels"&&t.hasOwnProperty(f)&&r!==void 0)===!0){if(r=u[f]?u[f](r):r,r=(o[f]||a||i)(r,s),r===void 0)continue;n+=',"'+f+'":'+r}return n}function ED(e){return e.write!==e.constructor.prototype.write}function ml(e){let t=new Gh(e);return t.on("error",r),!e.sync&&vD&&(K_.register(t,RD),t.on("close",function(){K_.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=xs,t.end=xs,t.flushSync=xs,t.destroy=xs;return}t.removeListener("error",r),t.emit("error",n)}}function RD(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function PD(e){return function(r,n,i={},s){if(typeof i=="string")s=ml({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=ml({dest:s})}else if(i instanceof Gh||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof Gh||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let u;i.customLevels&&(u=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=_D({caller:n,...i.transport,levels:u})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=i;return o===!1&&(i.level="silent"),a||(i.onChild=xs),s||(ED(process.stdout)?s=process.stdout:s=ml({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function TD(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Kh])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function OD(e,t,r){return{level:e,bindings:t,log:r}}function AD(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}nw.exports={noop:xs,buildSafeSonicBoom:ml,asChindings:bD,asJson:SD,genLog:wD,createArgsNormalizer:PD,stringify:TD,buildFormatters:OD,normalizeDestFileDescriptor:AD}});var gl=v((PQ,sw)=>{"use strict";var{lsCacheSym:$D,levelValSym:Jh,useOnlyCustomLevelsSym:CD,streamSym:ID,formattersSym:ND,hooksSym:kD}=Ns(),{noop:xD,genLog:Mi}=yl(),Ur={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},iw={fatal:e=>{let t=Mi(Ur.fatal,e);return function(...r){let n=this[ID];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>Mi(Ur.error,e),warn:e=>Mi(Ur.warn,e),info:e=>Mi(Ur.info,e),debug:e=>Mi(Ur.debug,e),trace:e=>Mi(Ur.trace,e)},Yh=Object.keys(Ur).reduce((e,t)=>(e[Ur[t]]=t,e),{}),qD=Object.keys(Yh).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function jD(e){let t=e[ND].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1)}return e[$D]=n,e}function DD(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function LD(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Jh],i=this[Jh]=r[e],s=this[CD],o=this[kD].logMethod;for(let a in r){if(i>r[a]){this[a]=xD;continue}this[a]=DD(a,s)?iw[a](o):Mi(r[a],o)}this.emit("level-change",e,i,t[n],n,this)}function FD(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function zD(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Jh]}function MD(e=null,t=!1){let r=e?Object.keys(e).reduce((s,o)=>(s[e[o]]=o,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Yh,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:Ur,e);return{labels:n,values:i}}function HD(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(Yh).map(s=>+s),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:Ur,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function VD(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}sw.exports={initialLsCache:qD,genLsCache:jD,levelMethods:iw,getLevel:FD,setLevel:LD,isLevelEnabled:zD,mappings:MD,levels:Ur,assertNoLevelCollisions:VD,assertDefaultLevelFound:HD}});var Wh=v((TQ,ow)=>{"use strict";ow.exports={version:"8.14.2"}});var gw=v((AQ,yw)=>{"use strict";var{EventEmitter:UD}=require("events"),{lsCacheSym:BD,levelValSym:GD,setLevelSym:Qh,getLevelSym:aw,chindingsSym:Zh,parsedChindingsSym:KD,mixinSym:JD,asJsonSym:hw,writeSym:YD,mixinMergeStrategySym:WD,timeSym:XD,timeSliceIndexSym:QD,streamSym:dw,serializersSym:Hi,formattersSym:Xh,errorKeySym:ZD,messageKeySym:eL,useOnlyCustomLevelsSym:tL,needsMetadataGsym:rL,redactFmtSym:nL,stringifySym:iL,formatOptsSym:sL,stringifiersSym:oL,msgPrefixSym:uw}=Ns(),{getLevel:aL,setLevel:uL,isLevelEnabled:lL,mappings:fL,initialLsCache:cL,genLsCache:hL,assertNoLevelCollisions:dL}=gl(),{asChindings:pw,asJson:pL,buildFormatters:lw,stringify:fw}=yl(),{version:mL}=Wh(),yL=kh(),gL=class{},mw={constructor:gL,child:vL,bindings:_L,setBindings:wL,flush:RL,isLevelEnabled:lL,version:mL,get level(){return this[aw]()},set level(e){this[Qh](e)},get levelVal(){return this[GD]},set levelVal(e){throw Error("levelVal is read-only")},[BD]:cL,[YD]:bL,[hw]:pL,[aw]:aL,[Qh]:uL};Object.setPrototypeOf(mw,UD.prototype);yw.exports=function(){return Object.create(mw)};var cw=e=>e;function vL(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Hi],n=this[Xh],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[Hi]=Object.create(null);for(let f in r)i[Hi][f]=r[f];let u=Object.getOwnPropertySymbols(r);for(var s=0;s<u.length;s++){let f=u[s];i[Hi][f]=r[f]}for(let f in t.serializers)i[Hi][f]=t.serializers[f];let l=Object.getOwnPropertySymbols(t.serializers);for(var o=0;o<l.length;o++){let f=l[o];i[Hi][f]=t.serializers[f]}}else i[Hi]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:l,log:f}=t.formatters;i[Xh]=lw(u||n.level,l||cw,f||n.log)}else i[Xh]=lw(n.level,cw,n.log);if(t.hasOwnProperty("customLevels")===!0&&(dL(this.levels,t.customLevels),i.levels=fL(t.customLevels,i[tL]),hL(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let u=yL(i.redact,fw),l={stringify:u[nL]};i[iL]=fw,i[oL]=u,i[sL]=l}typeof t.msgPrefix=="string"&&(i[uw]=(this[uw]||"")+t.msgPrefix),i[Zh]=pw(i,e);let a=t.level||this.level;return i[Qh](a),this.onChild(i),i}function _L(){let t=`{${this[Zh].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function wL(e){let t=pw(this,e);this[Zh]=t,delete this[KD]}function SL(e,t){return Object.assign(t,e)}function bL(e,t,r){let n=this[XD](),i=this[JD],s=this[ZD],o=this[eL],a=this[WD]||SL,u;e==null?u={}:e instanceof Error?(u={[s]:e},t===void 0&&(t=e.message)):(u=e,t===void 0&&e[o]===void 0&&e[s]&&(t=e[s].message)),i&&(u=a(u,i(u,r,this)));let l=this[hw](u,t,r,n),f=this[dw];f[rL]===!0&&(f.lastLevel=r,f.lastObj=u,f.lastMsg=t,f.lastTime=n.slice(this[QD]),f.lastLogger=this),f.write(l)}function EL(){}function RL(){let e=this[dw];"flush"in e&&e.flush(EL)}});var bw=v((nd,Sw)=>{"use strict";var{hasOwnProperty:vl}=Object.prototype,Ui=rd();Ui.configure=rd;Ui.stringify=Ui;Ui.default=Ui;nd.stringify=Ui;nd.configure=rd;Sw.exports=Ui;var PL=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function li(e){return e.length<5e3&&!PL.test(e)?`"${e}"`:JSON.stringify(e)}function ed(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var TL=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function td(e){return TL.call(e)!==void 0&&e.length!==0}function vw(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function OL(e){if(vl.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function _w(e,t){let r;if(vl.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function ww(e,t){let r;if(vl.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Vi(e){return e===1?"1 item":`${e} items`}function AL(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function $L(e){if(vl.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function rd(e){e={...e};let t=$L(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=OL(e),n=_w(e,"bigint"),i=_w(e,"deterministic"),s=ww(e,"maximumDepth"),o=ww(e,"maximumBreadth");function a(h,d,p,y,w,_){let S=d[h];switch(typeof S=="object"&&S!==null&&typeof S.toJSON=="function"&&(S=S.toJSON(h)),S=y.call(d,h,S),typeof S){case"string":return li(S);case"object":{if(S===null)return"null";if(p.indexOf(S)!==-1)return r;let g="",m=",",P=_;if(Array.isArray(S)){if(S.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(S),w!==""&&(_+=w,g+=`
${_}`,m=`,
${_}`);let D=Math.min(S.length,o),j=0;for(;j<D-1;j++){let ee=a(String(j),S,p,y,w,_);g+=ee!==void 0?ee:"null",g+=m}let L=a(String(j),S,p,y,w,_);if(g+=L!==void 0?L:"null",S.length-1>o){let ee=S.length-o-1;g+=`${m}"... ${Vi(ee)} not stringified"`}return w!==""&&(g+=`
${P}`),p.pop(),`[${g}]`}let $=Object.keys(S),E=$.length;if(E===0)return"{}";if(s<p.length+1)return'"[Object]"';let O="",k="";w!==""&&(_+=w,m=`,
${_}`,O=" ");let R=Math.min(E,o);i&&!td(S)&&($=ed($)),p.push(S);for(let D=0;D<R;D++){let j=$[D],L=a(j,S,p,y,w,_);L!==void 0&&(g+=`${k}${li(j)}:${O}${L}`,k=m)}if(E>o){let D=E-o;g+=`${k}"...":${O}"${Vi(D)} not stringified"`,k=m}return w!==""&&k.length>1&&(g=`
${_}${g}
${P}`),p.pop(),`{${g}}`}case"number":return isFinite(S)?String(S):t?t(S):"null";case"boolean":return S===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(S);default:return t?t(S):void 0}}function u(h,d,p,y,w,_){switch(typeof d=="object"&&d!==null&&typeof d.toJSON=="function"&&(d=d.toJSON(h)),typeof d){case"string":return li(d);case"object":{if(d===null)return"null";if(p.indexOf(d)!==-1)return r;let S=_,g="",m=",";if(Array.isArray(d)){if(d.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(d),w!==""&&(_+=w,g+=`
${_}`,m=`,
${_}`);let E=Math.min(d.length,o),O=0;for(;O<E-1;O++){let R=u(String(O),d[O],p,y,w,_);g+=R!==void 0?R:"null",g+=m}let k=u(String(O),d[O],p,y,w,_);if(g+=k!==void 0?k:"null",d.length-1>o){let R=d.length-o-1;g+=`${m}"... ${Vi(R)} not stringified"`}return w!==""&&(g+=`
${S}`),p.pop(),`[${g}]`}p.push(d);let P="";w!==""&&(_+=w,m=`,
${_}`,P=" ");let $="";for(let E of y){let O=u(E,d[E],p,y,w,_);O!==void 0&&(g+=`${$}${li(E)}:${P}${O}`,$=m)}return w!==""&&$.length>1&&(g=`
${_}${g}
${S}`),p.pop(),`{${g}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function l(h,d,p,y,w){switch(typeof d){case"string":return li(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return l(h,d,p,y,w);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let _=w;if(Array.isArray(d)){if(d.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(d),w+=y;let O=`
${w}`,k=`,
${w}`,R=Math.min(d.length,o),D=0;for(;D<R-1;D++){let L=l(String(D),d[D],p,y,w);O+=L!==void 0?L:"null",O+=k}let j=l(String(D),d[D],p,y,w);if(O+=j!==void 0?j:"null",d.length-1>o){let L=d.length-o-1;O+=`${k}"... ${Vi(L)} not stringified"`}return O+=`
${_}`,p.pop(),`[${O}]`}let S=Object.keys(d),g=S.length;if(g===0)return"{}";if(s<p.length+1)return'"[Object]"';w+=y;let m=`,
${w}`,P="",$="",E=Math.min(g,o);td(d)&&(P+=vw(d,m,o),S=S.slice(d.length),E-=d.length,$=m),i&&(S=ed(S)),p.push(d);for(let O=0;O<E;O++){let k=S[O],R=l(k,d[k],p,y,w);R!==void 0&&(P+=`${$}${li(k)}: ${R}`,$=m)}if(g>o){let O=g-o;P+=`${$}"...": "${Vi(O)} not stringified"`,$=m}return $!==""&&(P=`
${w}${P}
${_}`),p.pop(),`{${P}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function f(h,d,p){switch(typeof d){case"string":return li(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return f(h,d,p);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let y="";if(Array.isArray(d)){if(d.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(d);let m=Math.min(d.length,o),P=0;for(;P<m-1;P++){let E=f(String(P),d[P],p);y+=E!==void 0?E:"null",y+=","}let $=f(String(P),d[P],p);if(y+=$!==void 0?$:"null",d.length-1>o){let E=d.length-o-1;y+=`,"... ${Vi(E)} not stringified"`}return p.pop(),`[${y}]`}let w=Object.keys(d),_=w.length;if(_===0)return"{}";if(s<p.length+1)return'"[Object]"';let S="",g=Math.min(_,o);td(d)&&(y+=vw(d,",",o),w=w.slice(d.length),g-=d.length,S=","),i&&(w=ed(w)),p.push(d);for(let m=0;m<g;m++){let P=w[m],$=f(P,d[P],p);$!==void 0&&(y+=`${S}${li(P)}:${$}`,S=",")}if(_>o){let m=_-o;y+=`${S}"...":"${Vi(m)} not stringified"`}return p.pop(),`{${y}}`}case"number":return isFinite(d)?String(d):t?t(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return t?t(d):void 0}}function c(h,d,p){if(arguments.length>1){let y="";if(typeof p=="number"?y=" ".repeat(Math.min(p,10)):typeof p=="string"&&(y=p.slice(0,10)),d!=null){if(typeof d=="function")return a("",{"":h},[],d,y,"");if(Array.isArray(d))return u("",h,[],AL(d),y,"")}if(y.length!==0)return l("",h,[],y,"")}return f("",h,[])}return c}});var Tw=v(($Q,Pw)=>{"use strict";var id=Symbol.for("pino.metadata"),{levels:Ew}=gl(),Rw=Object.create(Ew);Rw.silent=1/0;var CL=Ew.info;function IL(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Rw;t.levels&&typeof t.levels=="object"&&(n=t.levels);let i={write:s,add:a,flushSync:o,end:u,minLevel:0,streams:[],clone:l,[id]:!0};return Array.isArray(e)?e.forEach(a,i):a.call(i,e),e=null,i;function s(f){let c,h=this.lastLevel,{streams:d}=this,p=0,y;for(let w=kL(d.length,t.dedupe);qL(w,d.length,t.dedupe);w=xL(w,t.dedupe))if(c=d[w],c.level<=h){if(p!==0&&p!==c.level)break;if(y=c.stream,y[id]){let{lastTime:_,lastMsg:S,lastObj:g,lastLogger:m}=this;y.lastLevel=h,y.lastTime=_,y.lastMsg=S,y.lastObj=g,y.lastLogger=m}y.write(f),t.dedupe&&(p=c.level)}else if(!t.dedupe)break}function o(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync()}function a(f){if(!f)return i;let c=typeof f.write=="function"||f.stream,h=f.write?f:f.stream;if(!c)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:d}=this,p;typeof f.levelVal=="number"?p=f.levelVal:typeof f.level=="string"?p=n[f.level]:typeof f.level=="number"?p=f.level:p=CL;let y={stream:h,level:p,levelVal:void 0,id:r++};return d.unshift(y),d.sort(NL),this.minLevel=d[0].level,i}function u(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync(),f.end()}function l(f){let c=new Array(this.streams.length);for(let h=0;h<c.length;h++)c[h]={level:f,stream:this.streams[h].stream};return{write:s,add:a,minLevel:f,streams:c,clone:l,flushSync:o,[id]:!0}}}function NL(e,t){return e.level-t.level}function kL(e,t){return t?e-1:0}function xL(e,t){return t?e-1:e+1}function qL(e,t,r){return r?e>=0:e<t}Pw.exports=IL});var Fw=v((CQ,Ir)=>{"use strict";var jL=require("os"),xw=Ph(),DL=Th(),LL=kh(),qw=S_(),FL=gw(),jw=Ns(),{configure:zL}=bw(),{assertDefaultLevelFound:ML,mappings:Dw,genLsCache:HL,levels:VL}=gl(),{createArgsNormalizer:UL,asChindings:BL,buildSafeSonicBoom:Ow,buildFormatters:GL,stringify:sd,normalizeDestFileDescriptor:Aw,noop:KL}=yl(),{version:JL}=Wh(),{chindingsSym:$w,redactFmtSym:YL,serializersSym:Cw,timeSym:WL,timeSliceIndexSym:XL,streamSym:QL,stringifySym:Iw,stringifySafeSym:od,stringifiersSym:Nw,setLevelSym:ZL,endSym:eF,formatOptsSym:tF,messageKeySym:rF,errorKeySym:nF,nestedKeySym:iF,mixinSym:sF,useOnlyCustomLevelsSym:oF,formattersSym:kw,hooksSym:aF,nestedKeyStrSym:uF,mixinMergeStrategySym:lF,msgPrefixSym:fF}=jw,{epochTime:Lw,nullTime:cF}=qw,{pid:hF}=process,dF=jL.hostname(),pF=xw.err,mF={level:"info",levels:VL,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:hF,hostname:dF},serializers:Object.assign(Object.create(null),{err:pF}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:Lw,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},yF=UL(mF),gF=Object.assign(Object.create(null),xw);function ad(...e){let t={},{opts:r,stream:n}=yF(t,DL(),...e),{redact:i,crlf:s,serializers:o,timestamp:a,messageKey:u,errorKey:l,nestedKey:f,base:c,name:h,level:d,customLevels:p,mixin:y,mixinMergeStrategy:w,useOnlyCustomLevels:_,formatters:S,hooks:g,depthLimit:m,edgeLimit:P,onChild:$,msgPrefix:E}=r,O=zL({maximumDepth:m,maximumBreadth:P}),k=GL(S.level,S.bindings,S.log),R=sd.bind({[od]:O}),D=i?LL(i,R):{},j=i?{stringify:D[YL]}:{stringify:R},L="}"+(s?`\r
`:`
`),ee=BL.bind(null,{[$w]:"",[Cw]:o,[Nw]:D,[Iw]:sd,[od]:O,[kw]:k}),te="";c!==null&&(h===void 0?te=ee(c):te=ee(Object.assign({},c,{name:h})));let M=a instanceof Function?a:a?Lw:cF,Q=M().indexOf(":")+1;if(_&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(E&&typeof E!="string")throw Error(`Unknown msgPrefix type "${typeof E}" - expected "string"`);ML(d,p,_);let Ae=Dw(p,_);return Object.assign(t,{levels:Ae,[oF]:_,[QL]:n,[WL]:M,[XL]:Q,[Iw]:sd,[od]:O,[Nw]:D,[eF]:L,[tF]:j,[rF]:u,[nF]:l,[iF]:f,[uF]:f?`,${JSON.stringify(f)}:{`:"",[Cw]:o,[sF]:y,[lF]:w,[$w]:te,[kw]:k,[aF]:g,silent:KL,onChild:$,[fF]:E}),Object.setPrototypeOf(t,FL()),HL(t),t[ZL](d),t}Ir.exports=ad;Ir.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=Aw(e.dest||process.stdout.fd),Ow(e)):Ow({dest:Aw(e),minLength:0});Ir.exports.transport=Bh();Ir.exports.multistream=Tw();Ir.exports.levels=Dw();Ir.exports.stdSerializers=gF;Ir.exports.stdTimeFunctions=Object.assign({},qw);Ir.exports.symbols=jw;Ir.exports.version=JL;Ir.exports.default=ad;Ir.exports.pino=ad});var na=v((IQ,Uw)=>{"use strict";var vF=Iv(),_l=Fw(),{serializersSym:zw}=_l.symbols,{FST_ERR_LOG_INVALID_DESTINATION:_F,FST_ERR_LOG_INVALID_LOGGER:wF}=zt();function Mw(e){if(e.stream&&e.file)throw new _F;e.file&&(e.stream=_l.destination(e.file),delete e.file);let t=e.logger,r=e.genReqId,n=null;return t?(e.logger=void 0,e.genReqId=void 0,t[zw]&&(e.serializers=Object.assign({},e.serializers,t[zw])),n=t.child({},e),e.logger=t,e.genReqId=r):n=_l(e,e.stream),n}var ud={req:function(t){return{method:t.method,url:t.url,version:t.headers&&t.headers["accept-version"],hostname:t.hostname,remoteAddress:t.ip,remotePort:t.socket?t.socket.remotePort:void 0}},err:_l.stdSerializers.err,res:function(t){return{statusCode:t.statusCode}}};function SF(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}function bF(e){if(!e.logger){let n=vF;return n.child=()=>n,{logger:n,hasLogger:!1}}if(Hw(e.logger))return{logger:Mw({logger:e.logger,serializers:Object.assign({},ud,e.logger.serializers)}),hasLogger:!0};let t={};return Object.prototype.toString.call(e.logger)==="[object Object]"&&Reflect.ownKeys(e.logger).forEach(n=>{Object.defineProperty(t,n,{value:e.logger[n],writable:!0,enumerable:!0,configurable:!0})}),t.level=t.level||"info",t.serializers=Object.assign({},ud,t.serializers),e.logger=t,{logger:Mw(e.logger),hasLogger:!0}}function Hw(e,t){let r=["info","error","debug","fatal","warn","trace","child"],n=e?r.filter(i=>!e[i]||typeof e[i]!="function"):r;if(n.length){if(n.length===r.length&&!t)return!1;throw wF(n.join(","))}else return!0}function EF(e,t,r,n,i){let s={[e.requestIdLogLabel]:n},o=e.childLoggerFactory.call(e.server,t,s,i||{},r);return e.childLoggerFactory!==Vw&&Hw(o,!0),o}function Vw(e,t,r){return e.child(t,r)}Uw.exports={createLogger:bF,createChildLogger:EF,defaultChildLoggerFactory:Vw,serializers:ud,now:SF}});var ia=v((NQ,Bw)=>{"use strict";Bw.exports=RF;function qs(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function RF(e){if(e=e||{},e.circles)return PF(e);return e.proto?n:r;function t(i,s){for(var o=Object.keys(i),a=new Array(o.length),u=0;u<o.length;u++){var l=o[u],f=i[l];typeof f!="object"||f===null?a[l]=f:f instanceof Date?a[l]=new Date(f):ArrayBuffer.isView(f)?a[l]=qs(f):a[l]=s(f)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var s={};for(var o in i)if(Object.hasOwnProperty.call(i,o)!==!1){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),r)):a instanceof Set?s[o]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?s[o]=qs(a):s[o]=r(a)}return s}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var s={};for(var o in i){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),n)):a instanceof Set?s[o]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?s[o]=qs(a):s[o]=n(a)}return s}}function PF(e){var t=[],r=[];return e.proto?s:i;function n(o,a){for(var u=Object.keys(o),l=new Array(u.length),f=0;f<u.length;f++){var c=u[f],h=o[c];if(typeof h!="object"||h===null)l[c]=h;else if(h instanceof Date)l[c]=new Date(h);else if(ArrayBuffer.isView(h))l[c]=qs(h);else{var d=t.indexOf(h);d!==-1?l[c]=r[d]:l[c]=a(h)}}return l}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};t.push(o),r.push(a);for(var u in o)if(Object.hasOwnProperty.call(o,u)!==!1){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))a[u]=qs(l);else{var f=t.indexOf(l);f!==-1?a[u]=r[f]:a[u]=i(l)}}return t.pop(),r.pop(),a}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};t.push(o),r.push(a);for(var u in o){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),s));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),s));else if(ArrayBuffer.isView(l))a[u]=qs(l);else{var f=t.indexOf(l);f!==-1?a[u]=r[f]:a[u]=s(l)}}return t.pop(),r.pop(),a}}});var sa=v((kQ,Yw)=>{"use strict";var TF=ia()({circles:!1,proto:!0}),{kSchemaVisited:Gw,kSchemaResponse:OF}=Et(),fd=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:AF,FST_ERR_SCH_ALREADY_PRESENT:$F,FST_ERR_SCH_DUPLICATE:CF,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:IF}=zt(),Jw=["params","body","querystring","query","headers"];function wl(e){this.store=e||{}}wl.prototype.add=function(e){let t=TF(e.isFluentSchema||e.isFluentJSONSchema||e[fd]?e.valueOf():e),r=t.$id;if(!r)throw new AF;if(this.store[r])throw new $F(r);this.store[r]=t};wl.prototype.getSchemas=function(){return Object.assign({},this.store)};wl.prototype.getSchema=function(e){return this.store[e]};function Kw(e){return typeof e=="object"&&Object.getPrototypeOf(e)!==Object.prototype}function NF(e,t){if(e[Gw])return e;if(e.query){if(e.querystring)throw new CF("querystring");e.querystring=e.query}kF(e);for(let r of Jw){let n=e[r];n&&!Kw(n)&&(e[r]=ld(n,t.jsonShorthand))}if(e.response){let r=Object.keys(e.response);for(let n of r){if(Kw(e.response[n]))continue;let i=e.response[n].content,s=!1;if(i){let o=Object.keys(i);for(let a=0;a<o.length;a++){let u=o[a];if(!i[u].schema){if(o.length===1)break;throw new IF(u)}e.response[n].content[u].schema=ld(i[u].schema,t.jsonShorthand),a===o.length-1&&(s=!0)}}s||(e.response[n]=ld(e.response[n],t.jsonShorthand))}}return e[Gw]=!0,e}function kF(e){for(let t of Jw)e[t]&&(e[t].isFluentSchema||e[t][fd])&&(e[t]=e[t].valueOf());if(e.response){let t=Object.keys(e.response);for(let r of t)(e.response[r].isFluentSchema||e.response[r][fd])&&(e.response[r]=e.response[r].valueOf())}}function ld(e,t){return!t||e.$ref||e.oneOf||e.allOf||e.anyOf||e.$merge||e.$patch?e:!e.type&&!e.properties?{type:"object",properties:e}:e}function xF(e,t,r){let n=e[OF];if(!n)return!1;if(n[t]){if(n[t].constructor===Object&&r){let s=r.split(";")[0];return n[t][s]?n[t][s]:!1}return n[t]}let i=(t+"")[0]+"xx";if(n[i]){if(n[i].constructor===Object&&r){let s=r.split(";")[0];return n[i][s]?n[i][s]:!1}return n[i]}if(n.default){if(n.default.constructor===Object&&r){let s=r.split(";")[0];return n.default[s]?n.default[s]:!1}return n.default}return!1}Yw.exports={buildSchemas(e){return new wl(e)},getSchemaSerializer:xF,normalizeSchema:NF}});var cd=v((xQ,Xw)=>{"use strict";var qF=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;Xw.exports=class Ww{constructor(t){switch(t&&t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=t}asInteger(t){if(typeof t=="number"){if(t===1/0||t===-1/0)throw new Error(`The value "${t}" cannot be converted to an integer.`);if(Number.isInteger(t))return""+t;if(Number.isNaN(t))throw new Error(`The value "${t}" cannot be converted to an integer.`);return this.parseInteger(t)}else{if(t===null)return"0";if(typeof t=="bigint")return t.toString();{let r=this.parseInteger(t);if(Number.isFinite(r))return""+r;throw new Error(`The value "${t}" cannot be converted to an integer.`)}}}asNumber(t){let r=Number(t);if(Number.isNaN(r))throw new Error(`The value "${t}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:"null"}asBoolean(t){return t&&"true"||"false"}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asString(t){if(typeof t!="string"){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';t instanceof RegExp?t=t.source:t=t.toString()}return qF.test(t)?t.length<42?this.asStringSmall(t):JSON.stringify(t):'"'+t+'"'}asStringSmall(t){let r=t.length,n="",i=0,s=!1,o=!1,a=255;for(var u=0;u<r&&a>=32;u++)a=t.charCodeAt(u),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=t.slice(i,u)+"\\",i=u,s=!0);return s?n+=t.slice(i):n=t,a<32||o===!0?JSON.stringify(t):'"'+n+'"'}getState(){return this._options}static restoreFromState(t){return new Ww(t)}}});var js=v(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.regexpCode=we.getEsmExportName=we.getProperty=we.safeStringify=we.stringify=we.strConcat=we.addCodeArg=we.str=we._=we.nil=we._Code=we.Name=we.IDENTIFIER=we._CodeOrName=void 0;var oa=class{};we._CodeOrName=oa;we.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Bi=class extends oa{constructor(t){if(super(),!we.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};we.Name=Bi;var Nr=class extends oa{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof Bi&&(r[n.str]=(r[n.str]||0)+1),r),{})}};we._Code=Nr;we.nil=new Nr("");function Qw(e,...t){let r=[e[0]],n=0;for(;n<t.length;)dd(r,t[n]),r.push(e[++n]);return new Nr(r)}we._=Qw;var hd=new Nr("+");function Zw(e,...t){let r=[aa(e[0])],n=0;for(;n<t.length;)r.push(hd),dd(r,t[n]),r.push(hd,aa(e[++n]));return jF(r),new Nr(r)}we.str=Zw;function dd(e,t){t instanceof Nr?e.push(...t._items):t instanceof Bi?e.push(t):e.push(FF(t))}we.addCodeArg=dd;function jF(e){let t=1;for(;t<e.length-1;){if(e[t]===hd){let r=DF(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function DF(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Bi||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Bi))return`"${e}${t.slice(1)}`}function LF(e,t){return t.emptyStr()?e:e.emptyStr()?t:Zw`${e}${t}`}we.strConcat=LF;function FF(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:aa(Array.isArray(e)?e.join(","):e)}function zF(e){return new Nr(aa(e))}we.stringify=zF;function aa(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}we.safeStringify=aa;function MF(e){return typeof e=="string"&&we.IDENTIFIER.test(e)?new Nr(`.${e}`):Qw`[${e}]`}we.getProperty=MF;function HF(e){if(typeof e=="string"&&we.IDENTIFIER.test(e))return new Nr(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}we.getEsmExportName=HF;function VF(e){return new Nr(e.toString())}we.regexpCode=VF});var El=v(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.ValueScope=Yt.ValueScopeName=Yt.Scope=Yt.varKinds=Yt.UsedValueState=void 0;var ur=js(),pd=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},md;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(md=Yt.UsedValueState||(Yt.UsedValueState={}));Yt.varKinds={const:new ur.Name("const"),let:new ur.Name("let"),var:new ur.Name("var")};var Sl=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof ur.Name?t:this.name(t)}name(t){return new ur.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Yt.Scope=Sl;var bl=class extends ur.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,ur._)`.${new ur.Name(r)}[${n}]`}};Yt.ValueScopeName=bl;var UF=(0,ur._)`\n`,yd=class extends Sl{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?UF:ur.nil}}get(){return this._scope}name(t){return new bl(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let f=a.get(o);if(f)return f}else a=this._values[s]=new Map;a.set(o,i);let u=this._scope[s]||(this._scope[s]=[]),l=u.length;return u[l]=r.ref,i.setValue(r,{property:s,itemIndex:l}),i}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,ur._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(t,r,n={},i){let s=ur.nil;for(let o in t){let a=t[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(l=>{if(u.has(l))return;u.set(l,md.Started);let f=r(l);if(f){let c=this.opts.es5?Yt.varKinds.var:Yt.varKinds.const;s=(0,ur._)`${s}${c} ${l} = ${f};${this.opts._n}`}else if(f=i==null?void 0:i(l))s=(0,ur._)`${s}${f}${this.opts._n}`;else throw new pd(l);u.set(l,md.Completed)})}return s}};Yt.ValueScope=yd});var Z=v(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.or=le.and=le.not=le.CodeGen=le.operators=le.varKinds=le.ValueScopeName=le.ValueScope=le.Scope=le.Name=le.regexpCode=le.stringify=le.getProperty=le.nil=le.strConcat=le.str=le._=void 0;var pe=js(),Br=El(),fi=js();Object.defineProperty(le,"_",{enumerable:!0,get:function(){return fi._}});Object.defineProperty(le,"str",{enumerable:!0,get:function(){return fi.str}});Object.defineProperty(le,"strConcat",{enumerable:!0,get:function(){return fi.strConcat}});Object.defineProperty(le,"nil",{enumerable:!0,get:function(){return fi.nil}});Object.defineProperty(le,"getProperty",{enumerable:!0,get:function(){return fi.getProperty}});Object.defineProperty(le,"stringify",{enumerable:!0,get:function(){return fi.stringify}});Object.defineProperty(le,"regexpCode",{enumerable:!0,get:function(){return fi.regexpCode}});Object.defineProperty(le,"Name",{enumerable:!0,get:function(){return fi.Name}});var Ol=El();Object.defineProperty(le,"Scope",{enumerable:!0,get:function(){return Ol.Scope}});Object.defineProperty(le,"ValueScope",{enumerable:!0,get:function(){return Ol.ValueScope}});Object.defineProperty(le,"ValueScopeName",{enumerable:!0,get:function(){return Ol.ValueScopeName}});Object.defineProperty(le,"varKinds",{enumerable:!0,get:function(){return Ol.varKinds}});le.operators={GT:new pe._Code(">"),GTE:new pe._Code(">="),LT:new pe._Code("<"),LTE:new pe._Code("<="),EQ:new pe._Code("==="),NEQ:new pe._Code("!=="),NOT:new pe._Code("!"),OR:new pe._Code("||"),AND:new pe._Code("&&"),ADD:new pe._Code("+")};var qn=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},gd=class extends qn{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?Br.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Ls(this.rhs,t,r)),this}get names(){return this.rhs instanceof pe._CodeOrName?this.rhs.names:{}}},Rl=class extends qn{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof pe.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Ls(this.rhs,t,r),this}get names(){let t=this.lhs instanceof pe.Name?{}:{...this.lhs.names};return Tl(t,this.rhs)}},vd=class extends Rl{constructor(t,r,n,i){super(t,n,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},_d=class extends qn{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},wd=class extends qn{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Sd=class extends qn{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},bd=class extends qn{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Ls(this.code,t,r),this}get names(){return this.code instanceof pe._CodeOrName?this.code.names:{}}},ua=class extends qn{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(t,r)||(BF(t,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Ki(t,r.names),{})}},jn=class extends ua{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Ed=class extends ua{},Ds=class extends jn{};Ds.kind="else";var Gr=class extends jn{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Ds(n):n}if(r)return t===!1?r instanceof Gr?r:r.nodes:this.nodes.length?this:new Gr(eS(t),r instanceof Gr?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Ls(this.condition,t,r),this}get names(){let t=super.names;return Tl(t,this.condition),this.else&&Ki(t,this.else.names),t}};Gr.kind="if";var Gi=class extends jn{};Gi.kind="for";var Rd=class extends Gi{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Ls(this.iteration,t,r),this}get names(){return Ki(super.names,this.iteration.names)}},Pd=class extends Gi{constructor(t,r,n,i){super(),this.varKind=t,this.name=r,this.from=n,this.to=i}render(t){let r=t.es5?Br.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(t)}get names(){let t=Tl(super.names,this.from);return Tl(t,this.to)}},Pl=class extends Gi{constructor(t,r,n,i){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Ls(this.iterable,t,r),this}get names(){return Ki(super.names,this.iterable.names)}},la=class extends jn{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};la.kind="func";var fa=class extends ua{render(t){return"return "+super.render(t)}};fa.kind="return";var Td=class extends jn{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,i;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Ki(t,this.catch.names),this.finally&&Ki(t,this.finally.names),t}},ca=class extends jn{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};ca.kind="catch";var ha=class extends jn{render(t){return"finally"+super.render(t)}};ha.kind="finally";var Od=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new Br.Scope({parent:t}),this._nodes=[new Ed]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new gd(t,s,n)),s}const(t,r,n){return this._def(Br.varKinds.const,t,r,n)}let(t,r,n){return this._def(Br.varKinds.let,t,r,n)}var(t,r,n){return this._def(Br.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new Rl(t,r,n))}add(t,r){return this._leafNode(new vd(t,le.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==pe.nil&&this._leafNode(new bd(t)),this}object(...t){let r=["{"];for(let[n,i]of t)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,pe.addCodeArg)(r,i));return r.push("}"),new pe._Code(r)}if(t,r,n){if(this._blockNode(new Gr(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Gr(t))}else(){return this._elseNode(new Ds)}endIf(){return this._endBlockNode(Gr,Ds)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Rd(t),r)}forRange(t,r,n,i,s=this.opts.es5?Br.varKinds.var:Br.varKinds.let){let o=this._scope.toName(t);return this._for(new Pd(s,o,r,n),()=>i(o))}forOf(t,r,n,i=Br.varKinds.const){let s=this._scope.toName(t);if(this.opts.es5){let o=r instanceof pe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,pe._)`${o}.length`,a=>{this.var(s,(0,pe._)`${o}[${a}]`),n(s)})}return this._for(new Pl("of",i,s,r),()=>n(s))}forIn(t,r,n,i=this.opts.es5?Br.varKinds.var:Br.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,pe._)`Object.keys(${r})`,n);let s=this._scope.toName(t);return this._for(new Pl("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(Gi)}label(t){return this._leafNode(new _d(t))}break(t){return this._leafNode(new wd(t))}return(t){let r=new fa;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(fa)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new Td;if(this._blockNode(i),this.code(t),r){let s=this.name("e");this._currNode=i.catch=new ca(s),r(s)}return n&&(this._currNode=i.finally=new ha,this.code(n)),this._endBlockNode(ca,ha)}throw(t){return this._leafNode(new Sd(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=pe.nil,n,i){return this._blockNode(new la(t,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(la)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof Gr))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};le.CodeGen=Od;function Ki(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function Tl(e,t){return t instanceof pe._CodeOrName?Ki(e,t.names):e}function Ls(e,t,r){if(e instanceof pe.Name)return n(e);if(!i(e))return e;return new pe._Code(e._items.reduce((s,o)=>(o instanceof pe.Name&&(o=n(o)),o instanceof pe._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||t[s.str]!==1?s:(delete t[s.str],o)}function i(s){return s instanceof pe._Code&&s._items.some(o=>o instanceof pe.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function BF(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function eS(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,pe._)`!${Ad(e)}`}le.not=eS;var GF=tS(le.operators.AND);function KF(...e){return e.reduce(GF)}le.and=KF;var JF=tS(le.operators.OR);function YF(...e){return e.reduce(JF)}le.or=YF;function tS(e){return(t,r)=>t===pe.nil?r:r===pe.nil?t:(0,pe._)`${Ad(t)} ${e} ${Ad(r)}`}function Ad(e){return e instanceof pe.Name?e:(0,pe._)`(${e})`}});var oe=v(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.checkStrictMode=fe.getErrorPath=fe.Type=fe.useFunc=fe.setEvaluated=fe.evaluatedPropsToName=fe.mergeEvaluated=fe.eachItem=fe.unescapeJsonPointer=fe.escapeJsonPointer=fe.escapeFragment=fe.unescapeFragment=fe.schemaRefOrVal=fe.schemaHasRulesButRef=fe.schemaHasRules=fe.checkUnknownRules=fe.alwaysValidSchema=fe.toHash=void 0;var ke=Z(),WF=js();function XF(e){let t={};for(let r of e)t[r]=!0;return t}fe.toHash=XF;function QF(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(iS(e,t),!sS(t,e.self.RULES.all))}fe.alwaysValidSchema=QF;function iS(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=n.RULES.keywords;for(let s in t)i[s]||lS(e,`unknown keyword: "${s}"`)}fe.checkUnknownRules=iS;function sS(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}fe.schemaHasRules=sS;function ZF(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}fe.schemaHasRulesButRef=ZF;function ez({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ke._)`${r}`}return(0,ke._)`${e}${t}${(0,ke.getProperty)(n)}`}fe.schemaRefOrVal=ez;function tz(e){return oS(decodeURIComponent(e))}fe.unescapeFragment=tz;function rz(e){return encodeURIComponent($d(e))}fe.escapeFragment=rz;function $d(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}fe.escapeJsonPointer=$d;function oS(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}fe.unescapeJsonPointer=oS;function nz(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}fe.eachItem=nz;function rS({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let u=o===void 0?s:o instanceof ke.Name?(s instanceof ke.Name?e(i,s,o):t(i,s,o),o):s instanceof ke.Name?(t(i,o,s),s):r(s,o);return a===ke.Name&&!(u instanceof ke.Name)?n(i,u):u}}fe.mergeEvaluated={props:rS({mergeNames:(e,t,r)=>e.if((0,ke._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,ke._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,ke._)`${r} || {}`).code((0,ke._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,ke._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,ke._)`${r} || {}`),Cd(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:aS}),items:rS({mergeNames:(e,t,r)=>e.if((0,ke._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,ke._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,ke._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,ke._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function aS(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,ke._)`{}`);return t!==void 0&&Cd(e,r,t),r}fe.evaluatedPropsToName=aS;function Cd(e,t,r){Object.keys(r).forEach(n=>e.assign((0,ke._)`${t}${(0,ke.getProperty)(n)}`,!0))}fe.setEvaluated=Cd;var nS={};function iz(e,t){return e.scopeValue("func",{ref:t,code:nS[t.code]||(nS[t.code]=new WF._Code(t.code))})}fe.useFunc=iz;var uS;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(uS=fe.Type||(fe.Type={}));function sz(e,t,r){if(e instanceof ke.Name){let n=t===uS.Num;return r?n?(0,ke._)`"[" + ${e} + "]"`:(0,ke._)`"['" + ${e} + "']"`:n?(0,ke._)`"/" + ${e}`:(0,ke._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ke.getProperty)(e).toString():"/"+$d(e)}fe.getErrorPath=sz;function lS(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}fe.checkStrictMode=lS});var kr=v(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var Ht=Z(),oz={data:new Ht.Name("data"),valCxt:new Ht.Name("valCxt"),instancePath:new Ht.Name("instancePath"),parentData:new Ht.Name("parentData"),parentDataProperty:new Ht.Name("parentDataProperty"),rootData:new Ht.Name("rootData"),dynamicAnchors:new Ht.Name("dynamicAnchors"),vErrors:new Ht.Name("vErrors"),errors:new Ht.Name("errors"),this:new Ht.Name("this"),self:new Ht.Name("self"),scope:new Ht.Name("scope"),json:new Ht.Name("json"),jsonPos:new Ht.Name("jsonPos"),jsonLen:new Ht.Name("jsonLen"),jsonPart:new Ht.Name("jsonPart")};Id.default=oz});var da=v(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.extendErrors=Vt.resetErrorsCount=Vt.reportExtraError=Vt.reportError=Vt.keyword$DataError=Vt.keywordError=void 0;var ge=Z(),Al=oe(),Wt=kr();Vt.keywordError={message:({keyword:e})=>(0,ge.str)`must pass "${e}" keyword validation`};Vt.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,ge.str)`"${e}" keyword must be ${t} ($data)`:(0,ge.str)`"${e}" keyword is invalid ($data)`};function az(e,t=Vt.keywordError,r,n){let{it:i}=e,{gen:s,compositeRule:o,allErrors:a}=i,u=hS(e,t,r);n??(o||a)?fS(s,u):cS(i,(0,ge._)`[${u}]`)}Vt.reportError=az;function uz(e,t=Vt.keywordError,r){let{it:n}=e,{gen:i,compositeRule:s,allErrors:o}=n,a=hS(e,t,r);fS(i,a),s||o||cS(n,Wt.default.vErrors)}Vt.reportExtraError=uz;function lz(e,t){e.assign(Wt.default.errors,t),e.if((0,ge._)`${Wt.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,ge._)`${Wt.default.vErrors}.length`,t),()=>e.assign(Wt.default.vErrors,null)))}Vt.resetErrorsCount=lz;function fz({gen:e,keyword:t,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",i,Wt.default.errors,a=>{e.const(o,(0,ge._)`${Wt.default.vErrors}[${a}]`),e.if((0,ge._)`${o}.instancePath === undefined`,()=>e.assign((0,ge._)`${o}.instancePath`,(0,ge.strConcat)(Wt.default.instancePath,s.errorPath))),e.assign((0,ge._)`${o}.schemaPath`,(0,ge.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,ge._)`${o}.schema`,r),e.assign((0,ge._)`${o}.data`,n))})}Vt.extendErrors=fz;function fS(e,t){let r=e.const("err",t);e.if((0,ge._)`${Wt.default.vErrors} === null`,()=>e.assign(Wt.default.vErrors,(0,ge._)`[${r}]`),(0,ge._)`${Wt.default.vErrors}.push(${r})`),e.code((0,ge._)`${Wt.default.errors}++`)}function cS(e,t){let{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw((0,ge._)`new ${e.ValidationError}(${t})`):(r.assign((0,ge._)`${n}.errors`,t),r.return(!1))}var Ji={keyword:new ge.Name("keyword"),schemaPath:new ge.Name("schemaPath"),params:new ge.Name("params"),propertyName:new ge.Name("propertyName"),message:new ge.Name("message"),schema:new ge.Name("schema"),parentSchema:new ge.Name("parentSchema")};function hS(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,ge._)`{}`:cz(e,t,r)}function cz(e,t,r={}){let{gen:n,it:i}=e,s=[hz(i,r),dz(e,r)];return pz(e,t,s),n.object(...s)}function hz({errorPath:e},{instancePath:t}){let r=t?(0,ge.str)`${e}${(0,Al.getErrorPath)(t,Al.Type.Str)}`:e;return[Wt.default.instancePath,(0,ge.strConcat)(Wt.default.instancePath,r)]}function dz({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,ge.str)`${t}/${e}`;return r&&(i=(0,ge.str)`${i}${(0,Al.getErrorPath)(r,Al.Type.Str)}`),[Ji.schemaPath,i]}function pz(e,{params:t,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=e,{opts:u,propertyName:l,topSchemaRef:f,schemaPath:c}=a;n.push([Ji.keyword,i],[Ji.params,typeof t=="function"?t(e):t||(0,ge._)`{}`]),u.messages&&n.push([Ji.message,typeof r=="function"?r(e):r]),u.verbose&&n.push([Ji.schema,o],[Ji.parentSchema,(0,ge._)`${f}${c}`],[Wt.default.data,s]),l&&n.push([Ji.propertyName,l])}});var pS=v(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.boolOrEmptySchema=Fs.topBoolOrEmptySchema=void 0;var mz=da(),yz=Z(),gz=kr(),vz={message:"boolean schema is false"};function _z(e){let{gen:t,schema:r,validateName:n}=e;r===!1?dS(e,!1):typeof r=="object"&&r.$async===!0?t.return(gz.default.data):(t.assign((0,yz._)`${n}.errors`,null),t.return(!0))}Fs.topBoolOrEmptySchema=_z;function wz(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),dS(e)):r.var(t,!0)}Fs.boolOrEmptySchema=wz;function dS(e,t){let{gen:r,data:n}=e,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,mz.reportError)(i,vz,void 0,t)}});var Nd=v(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.getRules=zs.isJSONType=void 0;var Sz=["string","number","integer","boolean","null","object","array"],bz=new Set(Sz);function Ez(e){return typeof e=="string"&&bz.has(e)}zs.isJSONType=Ez;function Rz(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}zs.getRules=Rz});var kd=v(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.shouldUseRule=ci.shouldUseGroup=ci.schemaHasRulesForType=void 0;function Pz({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&mS(e,n)}ci.schemaHasRulesForType=Pz;function mS(e,t){return t.rules.some(r=>yS(e,r))}ci.shouldUseGroup=mS;function yS(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}ci.shouldUseRule=yS});var ma=v(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.reportTypeError=kt.checkDataTypes=kt.checkDataType=kt.coerceAndCheckDataType=kt.getJSONTypes=kt.getSchemaTypes=kt.DataType=void 0;var Tz=Nd(),Oz=kd(),Az=da(),se=Z(),gS=oe(),pa;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(pa=kt.DataType||(kt.DataType={}));function $z(e){let t=vS(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}kt.getSchemaTypes=$z;function vS(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(Tz.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}kt.getJSONTypes=vS;function Cz(e,t){let{gen:r,data:n,opts:i}=e,s=Iz(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Oz.schemaHasRulesForType)(e,t[0]));if(o){let a=qd(t,n,i.strictNumbers,pa.Wrong);r.if(a,()=>{s.length?Nz(e,t,s):jd(e)})}return o}kt.coerceAndCheckDataType=Cz;var _S=new Set(["string","number","integer","boolean","null"]);function Iz(e,t){return t?e.filter(r=>_S.has(r)||t==="array"&&r==="array"):[]}function Nz(e,t,r){let{gen:n,data:i,opts:s}=e,o=n.let("dataType",(0,se._)`typeof ${i}`),a=n.let("coerced",(0,se._)`undefined`);s.coerceTypes==="array"&&n.if((0,se._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,se._)`${i}[0]`).assign(o,(0,se._)`typeof ${i}`).if(qd(t,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,se._)`${a} !== undefined`);for(let l of r)(_S.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);n.else(),jd(e),n.endIf(),n.if((0,se._)`${a} !== undefined`,()=>{n.assign(i,a),kz(e,a)});function u(l){switch(l){case"string":n.elseIf((0,se._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,se._)`"" + ${i}`).elseIf((0,se._)`${i} === null`).assign(a,(0,se._)`""`);return;case"number":n.elseIf((0,se._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,se._)`+${i}`);return;case"integer":n.elseIf((0,se._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,se._)`+${i}`);return;case"boolean":n.elseIf((0,se._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,se._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,se._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,se._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,se._)`[${i}]`)}}}function kz({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,se._)`${t} !== undefined`,()=>e.assign((0,se._)`${t}[${r}]`,n))}function xd(e,t,r,n=pa.Correct){let i=n===pa.Correct?se.operators.EQ:se.operators.NEQ,s;switch(e){case"null":return(0,se._)`${t} ${i} null`;case"array":s=(0,se._)`Array.isArray(${t})`;break;case"object":s=(0,se._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,se._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,se._)`typeof ${t} ${i} ${e}`}return n===pa.Correct?s:(0,se.not)(s);function o(a=se.nil){return(0,se.and)((0,se._)`typeof ${t} == "number"`,a,r?(0,se._)`isFinite(${t})`:se.nil)}}kt.checkDataType=xd;function qd(e,t,r,n){if(e.length===1)return xd(e[0],t,r,n);let i,s=(0,gS.toHash)(e);if(s.array&&s.object){let o=(0,se._)`typeof ${t} != "object"`;i=s.null?o:(0,se._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=se.nil;s.number&&delete s.integer;for(let o in s)i=(0,se.and)(i,xd(o,t,r,n));return i}kt.checkDataTypes=qd;var xz={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,se._)`{type: ${e}}`:(0,se._)`{type: ${t}}`};function jd(e){let t=qz(e);(0,Az.reportError)(t,xz)}kt.reportTypeError=jd;function qz(e){let{gen:t,data:r,schema:n}=e,i=(0,gS.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}});var SS=v($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.assignDefaults=void 0;var Ms=Z(),jz=oe();function Dz(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let i in r)wS(e,i,r[i].default);else t==="array"&&Array.isArray(n)&&n.forEach((i,s)=>wS(e,s,i.default))}$l.assignDefaults=Dz;function wS(e,t,r){let{gen:n,compositeRule:i,data:s,opts:o}=e;if(r===void 0)return;let a=(0,Ms._)`${s}${(0,Ms.getProperty)(t)}`;if(i){(0,jz.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,Ms._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Ms._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Ms._)`${a} = ${(0,Ms.stringify)(r)}`)}});var xt=v(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.validateUnion=Ie.validateArray=Ie.usePattern=Ie.callValidateCode=Ie.schemaProperties=Ie.allSchemaProperties=Ie.noPropertyInData=Ie.propertyInData=Ie.isOwnProperty=Ie.hasPropFunc=Ie.reportMissingProp=Ie.checkMissingProp=Ie.checkReportMissingProp=void 0;var ze=Z(),Dd=oe(),hi=kr(),Lz=oe();function Fz(e,t){let{gen:r,data:n,it:i}=e;r.if(Fd(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ze._)`${t}`},!0),e.error()})}Ie.checkReportMissingProp=Fz;function zz({gen:e,data:t,it:{opts:r}},n,i){return(0,ze.or)(...n.map(s=>(0,ze.and)(Fd(e,t,s,r.ownProperties),(0,ze._)`${i} = ${s}`)))}Ie.checkMissingProp=zz;function Mz(e,t){e.setParams({missingProperty:t},!0),e.error()}Ie.reportMissingProp=Mz;function bS(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ze._)`Object.prototype.hasOwnProperty`})}Ie.hasPropFunc=bS;function Ld(e,t,r){return(0,ze._)`${bS(e)}.call(${t}, ${r})`}Ie.isOwnProperty=Ld;function Hz(e,t,r,n){let i=(0,ze._)`${t}${(0,ze.getProperty)(r)} !== undefined`;return n?(0,ze._)`${i} && ${Ld(e,t,r)}`:i}Ie.propertyInData=Hz;function Fd(e,t,r,n){let i=(0,ze._)`${t}${(0,ze.getProperty)(r)} === undefined`;return n?(0,ze.or)(i,(0,ze.not)(Ld(e,t,r))):i}Ie.noPropertyInData=Fd;function ES(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Ie.allSchemaProperties=ES;function Vz(e,t){return ES(t).filter(r=>!(0,Dd.alwaysValidSchema)(e,t[r]))}Ie.schemaProperties=Vz;function Uz({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,u,l){let f=l?(0,ze._)`${e}, ${t}, ${n}${i}`:t,c=[[hi.default.instancePath,(0,ze.strConcat)(hi.default.instancePath,s)],[hi.default.parentData,o.parentData],[hi.default.parentDataProperty,o.parentDataProperty],[hi.default.rootData,hi.default.rootData]];o.opts.dynamicRef&&c.push([hi.default.dynamicAnchors,hi.default.dynamicAnchors]);let h=(0,ze._)`${f}, ${r.object(...c)}`;return u!==ze.nil?(0,ze._)`${a}.call(${u}, ${h})`:(0,ze._)`${a}(${h})`}Ie.callValidateCode=Uz;var Bz=(0,ze._)`new RegExp`;function Gz({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(r,n);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ze._)`${i.code==="new RegExp"?Bz:(0,Lz.useFunc)(e,i)}(${r}, ${n})`})}Ie.usePattern=Gz;function Kz(e){let{gen:t,data:r,keyword:n,it:i}=e,s=t.name("valid");if(i.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){let u=t.const("len",(0,ze._)`${r}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:Dd.Type.Num},s),t.if((0,ze.not)(s),a)})}}Ie.validateArray=Kz;function Jz(e){let{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Dd.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((u,l)=>{let f=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ze._)`${o} || ${a}`),e.mergeValidEvaluated(f,a)||t.if((0,ze.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Ie.validateUnion=Jz});var TS=v(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.validateKeywordUsage=ln.validSchemaType=ln.funcKeywordCode=ln.macroKeywordCode=void 0;var Xt=Z(),Yi=kr(),Yz=xt(),Wz=da();function Xz(e,t){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=PS(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");e.subschema({schema:a,schemaPath:Xt.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}ln.macroKeywordCode=Xz;function Qz(e,t){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;eM(u,t);let l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,f=PS(n,i,l),c=n.let("valid");e.block$data(c,h),e.ok((r=t.valid)!==null&&r!==void 0?r:c);function h(){if(t.errors===!1)y(),t.modifying&&RS(e),w(()=>e.error());else{let _=t.async?d():p();t.modifying&&RS(e),w(()=>Zz(e,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>y((0,Xt._)`await `),S=>n.assign(c,!1).if((0,Xt._)`${S} instanceof ${u.ValidationError}`,()=>n.assign(_,(0,Xt._)`${S}.errors`),()=>n.throw(S))),_}function p(){let _=(0,Xt._)`${f}.errors`;return n.assign(_,null),y(Xt.nil),_}function y(_=t.async?(0,Xt._)`await `:Xt.nil){let S=u.opts.passContext?Yi.default.this:Yi.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(c,(0,Xt._)`${_}${(0,Yz.callValidateCode)(e,f,S,g)}`,t.modifying)}function w(_){var S;n.if((0,Xt.not)((S=t.valid)!==null&&S!==void 0?S:c),_)}}ln.funcKeywordCode=Qz;function RS(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Xt._)`${n.parentData}[${n.parentDataProperty}]`))}function Zz(e,t){let{gen:r}=e;r.if((0,Xt._)`Array.isArray(${t})`,()=>{r.assign(Yi.default.vErrors,(0,Xt._)`${Yi.default.vErrors} === null ? ${t} : ${Yi.default.vErrors}.concat(${t})`).assign(Yi.default.errors,(0,Xt._)`${Yi.default.vErrors}.length`),(0,Wz.extendErrors)(e)},()=>e.error())}function eM({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function PS(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Xt.stringify)(r)})}function tM(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}ln.validSchemaType=tM;function rM({schema:e,opts:t,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){let u=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}ln.validateKeywordUsage=rM});var AS=v(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.extendSubschemaMode=di.extendSubschemaData=di.getSubschema=void 0;var fn=Z(),OS=oe();function nM(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,fn._)`${e.schemaPath}${(0,fn.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,fn._)`${e.schemaPath}${(0,fn.getProperty)(t)}${(0,fn.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,OS.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}di.getSubschema=nM;function iM(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:l,dataPathArr:f,opts:c}=t,h=a.let("data",(0,fn._)`${t.data}${(0,fn.getProperty)(r)}`,!0);u(h),e.errorPath=(0,fn.str)`${l}${(0,OS.getErrorPath)(r,n,c.jsPropertySyntax)}`,e.parentDataProperty=(0,fn._)`${r}`,e.dataPathArr=[...f,e.parentDataProperty]}if(i!==void 0){let l=i instanceof fn.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}di.extendSubschemaData=iM;function sM(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(e.compositeRule=n),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}di.extendSubschemaMode=sM});var Hs=v((YQ,$S)=>{"use strict";$S.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var IS=v((WQ,CS)=>{"use strict";var pi=CS.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Cl(t,n,i,e,"",e)};pi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};pi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};pi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};pi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Cl(e,t,r,n,i,s,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,i,s,o,a,u,l);for(var f in n){var c=n[f];if(Array.isArray(c)){if(f in pi.arrayKeywords)for(var h=0;h<c.length;h++)Cl(e,t,r,c[h],i+"/"+f+"/"+h,s,i,f,n,h)}else if(f in pi.propsKeywords){if(c&&typeof c=="object")for(var d in c)Cl(e,t,r,c[d],i+"/"+f+"/"+oM(d),s,i,f,n,d)}else(f in pi.keywords||e.allKeys&&!(f in pi.skipKeywords))&&Cl(e,t,r,c,i+"/"+f,s,i,f,n)}r(n,i,s,o,a,u,l)}}function oM(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var ya=v(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.getSchemaRefs=lr.resolveUrl=lr.normalizeId=lr._getFullPath=lr.getFullPath=lr.inlineRef=void 0;var aM=oe(),uM=Hs(),lM=IS(),fM=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cM(e,t=!0){return typeof e=="boolean"?!0:t===!0?!zd(e):t?NS(e)<=t:!1}lr.inlineRef=cM;var hM=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function zd(e){for(let t in e){if(hM.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(zd)||typeof r=="object"&&zd(r))return!0}return!1}function NS(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!fM.has(r)&&(typeof e[r]=="object"&&(0,aM.eachItem)(e[r],n=>t+=NS(n)),t===1/0))return 1/0}return t}function kS(e,t="",r){r!==!1&&(t=Vs(t));let n=e.parse(t);return xS(e,n)}lr.getFullPath=kS;function xS(e,t){return e.serialize(t).split("#")[0]+"#"}lr._getFullPath=xS;var dM=/#\/?$/;function Vs(e){return e?e.replace(dM,""):""}lr.normalizeId=Vs;function pM(e,t,r){return r=Vs(r),e.resolve(t,r)}lr.resolveUrl=pM;var mM=/^[a-z_][-a-z0-9._]*$/i;function yM(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Vs(e[r]||t),s={"":i},o=kS(n,i,!1),a={},u=new Set;return lM(e,{allKeys:!0},(c,h,d,p)=>{if(p===void 0)return;let y=o+h,w=s[p];typeof c[r]=="string"&&(w=_.call(this,c[r])),S.call(this,c.$anchor),S.call(this,c.$dynamicAnchor),s[h]=w;function _(g){let m=this.opts.uriResolver.resolve;if(g=Vs(w?m(w,g):g),u.has(g))throw f(g);u.add(g);let P=this.refs[g];return typeof P=="string"&&(P=this.refs[P]),typeof P=="object"?l(c,P.schema,g):g!==Vs(y)&&(g[0]==="#"?(l(c,a[g],g),a[g]=c):this.refs[g]=y),g}function S(g){if(typeof g=="string"){if(!mM.test(g))throw new Error(`invalid anchor "${g}"`);_.call(this,`#${g}`)}}}),a;function l(c,h,d){if(h!==void 0&&!uM(c,h))throw f(d)}function f(c){return new Error(`reference "${c}" resolves to more than one schema`)}}lr.getSchemaRefs=yM});var Us=v(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.getData=mi.KeywordCxt=mi.validateFunctionCode=void 0;var FS=pS(),qS=ma(),Hd=kd(),Il=ma(),gM=SS(),va=TS(),Md=AS(),J=Z(),ne=kr(),vM=ya(),Dn=oe(),ga=da();function _M(e){if(HS(e)&&(VS(e),MS(e))){bM(e);return}zS(e,()=>(0,FS.topBoolOrEmptySchema)(e))}mi.validateFunctionCode=_M;function zS({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},s){i.code.es5?e.func(t,(0,J._)`${ne.default.data}, ${ne.default.valCxt}`,n.$async,()=>{e.code((0,J._)`"use strict"; ${jS(r,i)}`),SM(e,i),e.code(s)}):e.func(t,(0,J._)`${ne.default.data}, ${wM(i)}`,n.$async,()=>e.code(jS(r,i)).code(s))}function wM(e){return(0,J._)`{${ne.default.instancePath}="", ${ne.default.parentData}, ${ne.default.parentDataProperty}, ${ne.default.rootData}=${ne.default.data}${e.dynamicRef?(0,J._)`, ${ne.default.dynamicAnchors}={}`:J.nil}}={}`}function SM(e,t){e.if(ne.default.valCxt,()=>{e.var(ne.default.instancePath,(0,J._)`${ne.default.valCxt}.${ne.default.instancePath}`),e.var(ne.default.parentData,(0,J._)`${ne.default.valCxt}.${ne.default.parentData}`),e.var(ne.default.parentDataProperty,(0,J._)`${ne.default.valCxt}.${ne.default.parentDataProperty}`),e.var(ne.default.rootData,(0,J._)`${ne.default.valCxt}.${ne.default.rootData}`),t.dynamicRef&&e.var(ne.default.dynamicAnchors,(0,J._)`${ne.default.valCxt}.${ne.default.dynamicAnchors}`)},()=>{e.var(ne.default.instancePath,(0,J._)`""`),e.var(ne.default.parentData,(0,J._)`undefined`),e.var(ne.default.parentDataProperty,(0,J._)`undefined`),e.var(ne.default.rootData,ne.default.data),t.dynamicRef&&e.var(ne.default.dynamicAnchors,(0,J._)`{}`)})}function bM(e){let{schema:t,opts:r,gen:n}=e;zS(e,()=>{r.$comment&&t.$comment&&BS(e),OM(e),n.let(ne.default.vErrors,null),n.let(ne.default.errors,0),r.unevaluated&&EM(e),US(e),CM(e)})}function EM(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,J._)`${r}.evaluated`),t.if((0,J._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,J._)`${e.evaluated}.props`,(0,J._)`undefined`)),t.if((0,J._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,J._)`${e.evaluated}.items`,(0,J._)`undefined`))}function jS(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,J._)`/*# sourceURL=${r} */`:J.nil}function RM(e,t){if(HS(e)&&(VS(e),MS(e))){PM(e,t);return}(0,FS.boolOrEmptySchema)(e,t)}function MS({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function HS(e){return typeof e.schema!="boolean"}function PM(e,t){let{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&BS(e),AM(e),$M(e);let s=n.const("_errs",ne.default.errors);US(e,s),n.var(t,(0,J._)`${s} === ${ne.default.errors}`)}function VS(e){(0,Dn.checkUnknownRules)(e),TM(e)}function US(e,t){if(e.opts.jtd)return DS(e,[],!1,t);let r=(0,qS.getSchemaTypes)(e.schema),n=(0,qS.coerceAndCheckDataType)(e,r);DS(e,r,!n,t)}function TM(e){let{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Dn.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function OM(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Dn.checkStrictMode)(e,"default is ignored in the schema root")}function AM(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,vM.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function $M(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function BS({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)e.code((0,J._)`${ne.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,J.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,J._)`${ne.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function CM(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=e;r.$async?t.if((0,J._)`${ne.default.errors} === 0`,()=>t.return(ne.default.data),()=>t.throw((0,J._)`new ${i}(${ne.default.vErrors})`)):(t.assign((0,J._)`${n}.errors`,ne.default.vErrors),s.unevaluated&&IM(e),t.return((0,J._)`${ne.default.errors} === 0`))}function IM({gen:e,evaluated:t,props:r,items:n}){r instanceof J.Name&&e.assign((0,J._)`${t}.props`,r),n instanceof J.Name&&e.assign((0,J._)`${t}.items`,n)}function DS(e,t,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:f}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Dn.schemaHasRulesButRef)(s,f))){i.block(()=>KS(e,"$ref",f.all.$ref.definition));return}u.jtd||NM(e,t),i.block(()=>{for(let h of f.rules)c(h);c(f.post)});function c(h){(0,Hd.shouldUseGroup)(s,h)&&(h.type?(i.if((0,Il.checkDataType)(h.type,o,u.strictNumbers)),LS(e,h),t.length===1&&t[0]===h.type&&r&&(i.else(),(0,Il.reportTypeError)(e)),i.endIf()):LS(e,h),a||i.if((0,J._)`${ne.default.errors} === ${n||0}`))}}function LS(e,t){let{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,gM.assignDefaults)(e,t.type),r.block(()=>{for(let s of t.rules)(0,Hd.shouldUseRule)(n,s)&&KS(e,s.keyword,s.definition,t.type)})}function NM(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(kM(e,t),e.opts.allowUnionTypes||xM(e,t),qM(e,e.dataTypes))}function kM(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{GS(e.dataTypes,r)||Vd(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),DM(e,t)}}function xM(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Vd(e,"use allowUnionTypes to allow union type keyword")}function qM(e,t){let r=e.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,Hd.shouldUseRule)(e.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>jM(t,o))&&Vd(e,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function jM(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function GS(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function DM(e,t){let r=[];for(let n of e.dataTypes)GS(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Vd(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Dn.checkStrictMode)(e,t,e.opts.strictTypes)}var Nl=class{constructor(t,r,n){if((0,va.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Dn.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",JS(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,va.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ne.default.errors))}result(t,r,n){this.failResult((0,J.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,J.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,J._)`${r} !== undefined && (${(0,J.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?ga.reportExtraError:ga.reportError)(this,this.def.error,r)}$dataError(){(0,ga.reportError)(this,this.def.$dataError||ga.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ga.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=J.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=J.nil,r=J.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,J.or)((0,J._)`${i} === undefined`,r)),t!==J.nil&&n.assign(t,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==J.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,J.or)(o(),a());function o(){if(n.length){if(!(r instanceof J.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,J._)`${(0,Il.checkDataTypes)(u,r,s.opts.strictNumbers,Il.DataType.Wrong)}`}return J.nil}function a(){if(i.validateSchema){let u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,J._)`!${u}(${r})`}return J.nil}}subschema(t,r){let n=(0,Md.getSubschema)(this.it,t);(0,Md.extendSubschemaData)(n,this.it,t),(0,Md.extendSubschemaMode)(n,t);let i={...this.it,...n,items:void 0,props:void 0};return RM(i,r),i}mergeEvaluated(t,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Dn.mergeEvaluated.props(i,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Dn.mergeEvaluated.items(i,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,J.Name)),!0}};mi.KeywordCxt=Nl;function KS(e,t,r,n){let i=new Nl(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,va.funcKeywordCode)(i,r):"macro"in r?(0,va.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,va.funcKeywordCode)(i,r)}var LM=/^\/(?:[^~]|~0|~1)*$/,FM=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function JS(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,s;if(e==="")return ne.default.rootData;if(e[0]==="/"){if(!LM.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=ne.default.rootData}else{let l=FM.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);let f=+l[1];if(i=l[2],i==="#"){if(f>=t)throw new Error(u("property/index",f));return n[t-f]}if(f>t)throw new Error(u("data",f));if(s=r[t-f],!i)return s}let o=s,a=i.split("/");for(let l of a)l&&(s=(0,J._)`${s}${(0,J.getProperty)((0,Dn.unescapeJsonPointer)(l))}`,o=(0,J._)`${o} && ${s}`);return o;function u(l,f){return`Cannot access ${l} ${f} levels up, current level is ${t}`}}mi.getData=JS});var _a=v(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});var Ud=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Bd.default=Ud});var yi=v(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});var Gd=ya(),Kd=class extends Error{constructor(t,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Gd.resolveUrl)(t,r,n),this.missingSchema=(0,Gd.normalizeId)((0,Gd.getFullPath)(t,this.missingRef))}};Jd.default=Kd});var Xi=v(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.resolveSchema=xr.getCompilingSchema=xr.resolveRef=xr.compileSchema=xr.SchemaEnv=void 0;var Kr=Z(),zM=_a(),Wi=kr(),Jr=ya(),YS=oe(),MM=Us(),Bs=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Jr.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};xr.SchemaEnv=Bs;function Wd(e){let t=WS.call(this,e);if(t)return t;let r=(0,Jr.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Kr.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;e.$async&&(a=o.scopeValue("Error",{ref:zM.default,code:(0,Kr._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");e.validateName=u;let l={gen:o,allErrors:this.opts.allErrors,data:Wi.default.data,parentData:Wi.default.parentData,parentDataProperty:Wi.default.parentDataProperty,dataNames:[Wi.default.data],dataPathArr:[Kr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Kr.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Kr.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Kr._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(e),(0,MM.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let c=o.toString();f=`${o.scopeRefs(Wi.default.scope)}return ${c}`,this.opts.code.process&&(f=this.opts.code.process(f,e));let d=new Function(`${Wi.default.self}`,`${Wi.default.scope}`,f)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=e.schema,d.schemaEnv=e,e.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:c,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:y}=l;d.evaluated={props:p instanceof Kr.Name?void 0:p,items:y instanceof Kr.Name?void 0:y,dynamicProps:p instanceof Kr.Name,dynamicItems:y instanceof Kr.Name},d.source&&(d.source.evaluated=(0,Kr.stringify)(d.evaluated))}return e.validate=d,e}catch(c){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),c}finally{this._compilations.delete(e)}}xr.compileSchema=Wd;function HM(e,t,r){var n;r=(0,Jr.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let s=BM.call(this,e,r);if(s===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new Bs({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=VM.call(this,s)}xr.resolveRef=HM;function VM(e){return(0,Jr.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Wd.call(this,e)}function WS(e){for(let t of this._compilations)if(UM(t,e))return t}xr.getCompilingSchema=WS;function UM(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function BM(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||kl.call(this,e,t)}function kl(e,t){let r=this.opts.uriResolver.parse(t),n=(0,Jr._getFullPath)(this.opts.uriResolver,r),i=(0,Jr.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return Yd.call(this,r,e);let s=(0,Jr.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=kl.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Yd.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Wd.call(this,o),s===(0,Jr.normalizeId)(t)){let{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Jr.resolveUrl)(this.opts.uriResolver,i,l)),new Bs({schema:a,schemaId:u,root:e,baseId:i})}return Yd.call(this,r,o)}}xr.resolveSchema=kl;var GM=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Yd(e,{baseId:t,schema:r,root:n}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,YS.unescapeFragment)(a)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!GM.has(a)&&l&&(t=(0,Jr.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,YS.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Jr.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=kl.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new Bs({schema:r,schemaId:o,root:n,baseId:t}),s.schema!==s.root.schema)return s}});var XS=v((rZ,KM)=>{KM.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ZS=v((xl,QS)=>{(function(e,t){typeof xl=="object"&&typeof QS<"u"?t(xl):typeof define=="function"&&define.amd?define(["exports"],t):t(e.URI=e.URI||{})})(xl,function(e){"use strict";function t(){for(var T=arguments.length,b=Array(T),A=0;A<T;A++)b[A]=arguments[A];if(b.length>1){b[0]=b[0].slice(0,-1);for(var C=b.length-1,I=1;I<C;++I)b[I]=b[I].slice(1,-1);return b[C]=b[C].slice(1),b.join("")}else return b[0]}function r(T){return"(?:"+T+")"}function n(T){return T===void 0?"undefined":T===null?"null":Object.prototype.toString.call(T).split(" ").pop().split("]").shift().toLowerCase()}function i(T){return T.toUpperCase()}function s(T){return T!=null?T instanceof Array?T:typeof T.length!="number"||T.split||T.setInterval||T.call?[T]:Array.prototype.slice.call(T):[]}function o(T,b){var A=T;if(b)for(var C in b)A[C]=b[C];return A}function a(T){var b="[A-Za-z]",A="[\\x0D]",C="[0-9]",I="[\\x22]",H=t(C,"[A-Fa-f]"),ie="[\\x0A]",_e="[\\x20]",Te=r(r("%[EFef]"+H+"%"+H+H+"%"+H+H)+"|"+r("%[89A-Fa-f]"+H+"%"+H+H)+"|"+r("%"+H+H)),ft="[\\:\\/\\?\\#\\[\\]\\@]",ye="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ke=t(ft,ye),ct=T?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ue=T?"[\\uE000-\\uF8FF]":"[]",be=t(b,C,"[\\-\\.\\_\\~]",ct),Je=r(b+t(b,C,"[\\+\\-\\.]")+"*"),Ce=r(r(Te+"|"+t(be,ye,"[\\:]"))+"*"),qi=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),yr=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),Tr=r(yr+"\\."+yr+"\\."+yr+"\\."+yr),Ne=r(H+"{1,4}"),gr=r(r(Ne+"\\:"+Ne)+"|"+Tr),Or=r(r(Ne+"\\:")+"{6}"+gr),on=r("\\:\\:"+r(Ne+"\\:")+"{5}"+gr),ji=r(r(Ne)+"?\\:\\:"+r(Ne+"\\:")+"{4}"+gr),In=r(r(r(Ne+"\\:")+"{0,1}"+Ne)+"?\\:\\:"+r(Ne+"\\:")+"{3}"+gr),Ko=r(r(r(Ne+"\\:")+"{0,2}"+Ne)+"?\\:\\:"+r(Ne+"\\:")+"{2}"+gr),Fu=r(r(r(Ne+"\\:")+"{0,3}"+Ne)+"?\\:\\:"+Ne+"\\:"+gr),zu=r(r(r(Ne+"\\:")+"{0,4}"+Ne)+"?\\:\\:"+gr),vs=r(r(r(Ne+"\\:")+"{0,5}"+Ne)+"?\\:\\:"+Ne),_s=r(r(r(Ne+"\\:")+"{0,6}"+Ne)+"?\\:\\:"),Nn=r([Or,on,ji,In,Ko,Fu,zu,vs,_s].join("|")),ws=r(r(be+"|"+Te)+"+"),Nc=r(Nn+"\\%25"+ws),Di=r(Nn+r("\\%25|\\%(?!"+H+"{2})")+ws),BN=r("[vV]"+H+"+\\."+t(be,ye,"[\\:]")+"+"),GN=r("\\["+r(Di+"|"+Nn+"|"+BN)+"\\]"),T0=r(r(Te+"|"+t(be,ye))+"*"),Jo=r(GN+"|"+Tr+"(?!"+T0+")|"+T0),Yo=r(C+"*"),O0=r(r(Ce+"@")+"?"+Jo+r("\\:"+Yo)+"?"),Wo=r(Te+"|"+t(be,ye,"[\\:\\@]")),KN=r(Wo+"*"),A0=r(Wo+"+"),JN=r(r(Te+"|"+t(be,ye,"[\\@]"))+"+"),kn=r(r("\\/"+KN)+"*"),Ss=r("\\/"+r(A0+kn)+"?"),kc=r(JN+kn),Mu=r(A0+kn),bs="(?!"+Wo+")",gX=r(kn+"|"+Ss+"|"+kc+"|"+Mu+"|"+bs),Es=r(r(Wo+"|"+t("[\\/\\?]",Ue))+"*"),Xo=r(r(Wo+"|[\\/\\?]")+"*"),$0=r(r("\\/\\/"+O0+kn)+"|"+Ss+"|"+Mu+"|"+bs),YN=r(Je+"\\:"+$0+r("\\?"+Es)+"?"+r("\\#"+Xo)+"?"),WN=r(r("\\/\\/"+O0+kn)+"|"+Ss+"|"+kc+"|"+bs),XN=r(WN+r("\\?"+Es)+"?"+r("\\#"+Xo)+"?"),vX=r(YN+"|"+XN),_X=r(Je+"\\:"+$0+r("\\?"+Es)+"?"),wX="^("+Je+")\\:"+r(r("\\/\\/("+r("("+Ce+")@")+"?("+Jo+")"+r("\\:("+Yo+")")+"?)")+"?("+kn+"|"+Ss+"|"+Mu+"|"+bs+")")+r("\\?("+Es+")")+"?"+r("\\#("+Xo+")")+"?$",SX="^(){0}"+r(r("\\/\\/("+r("("+Ce+")@")+"?("+Jo+")"+r("\\:("+Yo+")")+"?)")+"?("+kn+"|"+Ss+"|"+kc+"|"+bs+")")+r("\\?("+Es+")")+"?"+r("\\#("+Xo+")")+"?$",bX="^("+Je+")\\:"+r(r("\\/\\/("+r("("+Ce+")@")+"?("+Jo+")"+r("\\:("+Yo+")")+"?)")+"?("+kn+"|"+Ss+"|"+Mu+"|"+bs+")")+r("\\?("+Es+")")+"?$",EX="^"+r("\\#("+Xo+")")+"?$",RX="^"+r("("+Ce+")@")+"?("+Jo+")"+r("\\:("+Yo+")")+"?$";return{NOT_SCHEME:new RegExp(t("[^]",b,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",be,ye),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",be,ye),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",be,ye),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",be,ye),"g"),NOT_QUERY:new RegExp(t("[^\\%]",be,ye,"[\\:\\@\\/\\?]",Ue),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",be,ye,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",be,ye),"g"),UNRESERVED:new RegExp(be,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",be,Ke),"g"),PCT_ENCODED:new RegExp(Te,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Nn+")"+r(r("\\%25|\\%(?!"+H+"{2})")+"("+ws+")")+"?\\]?$")}}var u=a(!1),l=a(!0),f=function(){function T(b,A){var C=[],I=!0,H=!1,ie=void 0;try{for(var _e=b[Symbol.iterator](),Te;!(I=(Te=_e.next()).done)&&(C.push(Te.value),!(A&&C.length===A));I=!0);}catch(ft){H=!0,ie=ft}finally{try{!I&&_e.return&&_e.return()}finally{if(H)throw ie}}return C}return function(b,A){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return T(b,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(T){if(Array.isArray(T)){for(var b=0,A=Array(T.length);b<T.length;b++)A[b]=T[b];return A}else return Array.from(T)},h=2147483647,d=36,p=1,y=26,w=38,_=700,S=72,g=128,m="-",P=/^xn--/,$=/[^\0-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-p,R=Math.floor,D=String.fromCharCode;function j(T){throw new RangeError(O[T])}function L(T,b){for(var A=[],C=T.length;C--;)A[C]=b(T[C]);return A}function ee(T,b){var A=T.split("@"),C="";A.length>1&&(C=A[0]+"@",T=A[1]),T=T.replace(E,".");var I=T.split("."),H=L(I,b).join(".");return C+H}function te(T){for(var b=[],A=0,C=T.length;A<C;){var I=T.charCodeAt(A++);if(I>=55296&&I<=56319&&A<C){var H=T.charCodeAt(A++);(H&64512)==56320?b.push(((I&1023)<<10)+(H&1023)+65536):(b.push(I),A--)}else b.push(I)}return b}var M=function(b){return String.fromCodePoint.apply(String,c(b))},Q=function(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:d},Ae=function(b,A){return b+22+75*(b<26)-((A!=0)<<5)},V=function(b,A,C){var I=0;for(b=C?R(b/_):b>>1,b+=R(b/A);b>k*y>>1;I+=d)b=R(b/k);return R(I+(k+1)*b/(b+w))},Ct=function(b){var A=[],C=b.length,I=0,H=g,ie=S,_e=b.lastIndexOf(m);_e<0&&(_e=0);for(var Te=0;Te<_e;++Te)b.charCodeAt(Te)>=128&&j("not-basic"),A.push(b.charCodeAt(Te));for(var ft=_e>0?_e+1:0;ft<C;){for(var ye=I,Ke=1,ct=d;;ct+=d){ft>=C&&j("invalid-input");var Ue=Q(b.charCodeAt(ft++));(Ue>=d||Ue>R((h-I)/Ke))&&j("overflow"),I+=Ue*Ke;var be=ct<=ie?p:ct>=ie+y?y:ct-ie;if(Ue<be)break;var Je=d-be;Ke>R(h/Je)&&j("overflow"),Ke*=Je}var Ce=A.length+1;ie=V(I-ye,Ce,ye==0),R(I/Ce)>h-H&&j("overflow"),H+=R(I/Ce),I%=Ce,A.splice(I++,0,H)}return String.fromCodePoint.apply(String,A)},nn=function(b){var A=[];b=te(b);var C=b.length,I=g,H=0,ie=S,_e=!0,Te=!1,ft=void 0;try{for(var ye=b[Symbol.iterator](),Ke;!(_e=(Ke=ye.next()).done);_e=!0){var ct=Ke.value;ct<128&&A.push(D(ct))}}catch(Di){Te=!0,ft=Di}finally{try{!_e&&ye.return&&ye.return()}finally{if(Te)throw ft}}var Ue=A.length,be=Ue;for(Ue&&A.push(m);be<C;){var Je=h,Ce=!0,qi=!1,yr=void 0;try{for(var Tr=b[Symbol.iterator](),Ne;!(Ce=(Ne=Tr.next()).done);Ce=!0){var gr=Ne.value;gr>=I&&gr<Je&&(Je=gr)}}catch(Di){qi=!0,yr=Di}finally{try{!Ce&&Tr.return&&Tr.return()}finally{if(qi)throw yr}}var Or=be+1;Je-I>R((h-H)/Or)&&j("overflow"),H+=(Je-I)*Or,I=Je;var on=!0,ji=!1,In=void 0;try{for(var Ko=b[Symbol.iterator](),Fu;!(on=(Fu=Ko.next()).done);on=!0){var zu=Fu.value;if(zu<I&&++H>h&&j("overflow"),zu==I){for(var vs=H,_s=d;;_s+=d){var Nn=_s<=ie?p:_s>=ie+y?y:_s-ie;if(vs<Nn)break;var ws=vs-Nn,Nc=d-Nn;A.push(D(Ae(Nn+ws%Nc,0))),vs=R(ws/Nc)}A.push(D(Ae(vs,0))),ie=V(H,Or,be==Ue),H=0,++be}}}catch(Di){ji=!0,In=Di}finally{try{!on&&Ko.return&&Ko.return()}finally{if(ji)throw In}}++H,++I}return A.join("")},me=function(b){return ee(b,function(A){return P.test(A)?Ct(A.slice(4).toLowerCase()):A})},Pr=function(b){return ee(b,function(A){return $.test(A)?"xn--"+nn(A):A})},ir={version:"2.1.0",ucs2:{decode:te,encode:M},decode:Ct,encode:nn,toASCII:Pr,toUnicode:me},Y={};function et(T){var b=T.charCodeAt(0),A=void 0;return b<16?A="%0"+b.toString(16).toUpperCase():b<128?A="%"+b.toString(16).toUpperCase():b<2048?A="%"+(b>>6|192).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase():A="%"+(b>>12|224).toString(16).toUpperCase()+"%"+(b>>6&63|128).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase(),A}function tt(T){for(var b="",A=0,C=T.length;A<C;){var I=parseInt(T.substr(A+1,2),16);if(I<128)b+=String.fromCharCode(I),A+=3;else if(I>=194&&I<224){if(C-A>=6){var H=parseInt(T.substr(A+4,2),16);b+=String.fromCharCode((I&31)<<6|H&63)}else b+=T.substr(A,6);A+=6}else if(I>=224){if(C-A>=9){var ie=parseInt(T.substr(A+4,2),16),_e=parseInt(T.substr(A+7,2),16);b+=String.fromCharCode((I&15)<<12|(ie&63)<<6|_e&63)}else b+=T.substr(A,9);A+=9}else b+=T.substr(A,3),A+=3}return b}function re(T,b){function A(C){var I=tt(C);return I.match(b.UNRESERVED)?I:C}return T.scheme&&(T.scheme=String(T.scheme).replace(b.PCT_ENCODED,A).toLowerCase().replace(b.NOT_SCHEME,"")),T.userinfo!==void 0&&(T.userinfo=String(T.userinfo).replace(b.PCT_ENCODED,A).replace(b.NOT_USERINFO,et).replace(b.PCT_ENCODED,i)),T.host!==void 0&&(T.host=String(T.host).replace(b.PCT_ENCODED,A).toLowerCase().replace(b.NOT_HOST,et).replace(b.PCT_ENCODED,i)),T.path!==void 0&&(T.path=String(T.path).replace(b.PCT_ENCODED,A).replace(T.scheme?b.NOT_PATH:b.NOT_PATH_NOSCHEME,et).replace(b.PCT_ENCODED,i)),T.query!==void 0&&(T.query=String(T.query).replace(b.PCT_ENCODED,A).replace(b.NOT_QUERY,et).replace(b.PCT_ENCODED,i)),T.fragment!==void 0&&(T.fragment=String(T.fragment).replace(b.PCT_ENCODED,A).replace(b.NOT_FRAGMENT,et).replace(b.PCT_ENCODED,i)),T}function Jt(T){return T.replace(/^0*(.*)/,"$1")||"0"}function It(T,b){var A=T.match(b.IPV4ADDRESS)||[],C=f(A,2),I=C[1];return I?I.split(".").map(Jt).join("."):T}function N(T,b){var A=T.match(b.IPV6ADDRESS)||[],C=f(A,3),I=C[1],H=C[2];if(I){for(var ie=I.toLowerCase().split("::").reverse(),_e=f(ie,2),Te=_e[0],ft=_e[1],ye=ft?ft.split(":").map(Jt):[],Ke=Te.split(":").map(Jt),ct=b.IPV4ADDRESS.test(Ke[Ke.length-1]),Ue=ct?7:8,be=Ke.length-Ue,Je=Array(Ue),Ce=0;Ce<Ue;++Ce)Je[Ce]=ye[Ce]||Ke[be+Ce]||"";ct&&(Je[Ue-1]=It(Je[Ue-1],b));var qi=Je.reduce(function(Or,on,ji){if(!on||on==="0"){var In=Or[Or.length-1];In&&In.index+In.length===ji?In.length++:Or.push({index:ji,length:1})}return Or},[]),yr=qi.sort(function(Or,on){return on.length-Or.length})[0],Tr=void 0;if(yr&&yr.length>1){var Ne=Je.slice(0,yr.index),gr=Je.slice(yr.index+yr.length);Tr=Ne.join(":")+"::"+gr.join(":")}else Tr=Je.join(":");return H&&(Tr+="%"+H),Tr}else return T}var x=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,B="".match(/(){0}/)[1]===void 0;function U(T){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A={},C=b.iri!==!1?l:u;b.reference==="suffix"&&(T=(b.scheme?b.scheme+":":"")+"//"+T);var I=T.match(x);if(I){B?(A.scheme=I[1],A.userinfo=I[3],A.host=I[4],A.port=parseInt(I[5],10),A.path=I[6]||"",A.query=I[7],A.fragment=I[8],isNaN(A.port)&&(A.port=I[5])):(A.scheme=I[1]||void 0,A.userinfo=T.indexOf("@")!==-1?I[3]:void 0,A.host=T.indexOf("//")!==-1?I[4]:void 0,A.port=parseInt(I[5],10),A.path=I[6]||"",A.query=T.indexOf("?")!==-1?I[7]:void 0,A.fragment=T.indexOf("#")!==-1?I[8]:void 0,isNaN(A.port)&&(A.port=T.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?I[4]:void 0)),A.host&&(A.host=N(It(A.host,C),C)),A.scheme===void 0&&A.userinfo===void 0&&A.host===void 0&&A.port===void 0&&!A.path&&A.query===void 0?A.reference="same-document":A.scheme===void 0?A.reference="relative":A.fragment===void 0?A.reference="absolute":A.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==A.reference&&(A.error=A.error||"URI is not a "+b.reference+" reference.");var H=Y[(b.scheme||A.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!H||!H.unicodeSupport)){if(A.host&&(b.domainHost||H&&H.domainHost))try{A.host=ir.toASCII(A.host.replace(C.PCT_ENCODED,tt).toLowerCase())}catch(ie){A.error=A.error||"Host's domain name can not be converted to ASCII via punycode: "+ie}re(A,u)}else re(A,C);H&&H.parse&&H.parse(A,b)}else A.error=A.error||"URI can not be parsed.";return A}function ue(T,b){var A=b.iri!==!1?l:u,C=[];return T.userinfo!==void 0&&(C.push(T.userinfo),C.push("@")),T.host!==void 0&&C.push(N(It(String(T.host),A),A).replace(A.IPV6ADDRESS,function(I,H,ie){return"["+H+(ie?"%25"+ie:"")+"]"})),(typeof T.port=="number"||typeof T.port=="string")&&(C.push(":"),C.push(String(T.port))),C.length?C.join(""):void 0}var X=/^\.\.?\//,Se=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,ki=/^\/?(?:.|\n)*?(?=\/|$)/;function Ve(T){for(var b=[];T.length;)if(T.match(X))T=T.replace(X,"");else if(T.match(Se))T=T.replace(Se,"/");else if(T.match(He))T=T.replace(He,"/"),b.pop();else if(T==="."||T==="..")T="";else{var A=T.match(ki);if(A){var C=A[0];T=T.slice(C.length),b.push(C)}else throw new Error("Unexpected dot segment condition")}return b.join("")}function mt(T){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=b.iri?l:u,C=[],I=Y[(b.scheme||T.scheme||"").toLowerCase()];if(I&&I.serialize&&I.serialize(T,b),T.host&&!A.IPV6ADDRESS.test(T.host)){if(b.domainHost||I&&I.domainHost)try{T.host=b.iri?ir.toUnicode(T.host):ir.toASCII(T.host.replace(A.PCT_ENCODED,tt).toLowerCase())}catch(_e){T.error=T.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+_e}}re(T,A),b.reference!=="suffix"&&T.scheme&&(C.push(T.scheme),C.push(":"));var H=ue(T,b);if(H!==void 0&&(b.reference!=="suffix"&&C.push("//"),C.push(H),T.path&&T.path.charAt(0)!=="/"&&C.push("/")),T.path!==void 0){var ie=T.path;!b.absolutePath&&(!I||!I.absolutePath)&&(ie=Ve(ie)),H===void 0&&(ie=ie.replace(/^\/\//,"/%2F")),C.push(ie)}return T.query!==void 0&&(C.push("?"),C.push(T.query)),T.fragment!==void 0&&(C.push("#"),C.push(T.fragment)),C.join("")}function b0(T,b){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],I={};return C||(T=U(mt(T,A),A),b=U(mt(b,A),A)),A=A||{},!A.tolerant&&b.scheme?(I.scheme=b.scheme,I.userinfo=b.userinfo,I.host=b.host,I.port=b.port,I.path=Ve(b.path||""),I.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(I.userinfo=b.userinfo,I.host=b.host,I.port=b.port,I.path=Ve(b.path||""),I.query=b.query):(b.path?(b.path.charAt(0)==="/"?I.path=Ve(b.path):((T.userinfo!==void 0||T.host!==void 0||T.port!==void 0)&&!T.path?I.path="/"+b.path:T.path?I.path=T.path.slice(0,T.path.lastIndexOf("/")+1)+b.path:I.path=b.path,I.path=Ve(I.path)),I.query=b.query):(I.path=T.path,b.query!==void 0?I.query=b.query:I.query=T.query),I.userinfo=T.userinfo,I.host=T.host,I.port=T.port),I.scheme=T.scheme),I.fragment=b.fragment,I}function Mr(T,b,A){var C=o({scheme:"null"},A);return mt(b0(U(T,C),U(b,C),C,!0),C)}function $n(T,b){return typeof T=="string"?T=mt(U(T,b),b):n(T)==="object"&&(T=U(mt(T,b),b)),T}function Bo(T,b,A){return typeof T=="string"?T=mt(U(T,A),A):n(T)==="object"&&(T=mt(T,A)),typeof b=="string"?b=mt(U(b,A),A):n(b)==="object"&&(b=mt(b,A)),T===b}function Zn(T,b){return T&&T.toString().replace(!b||!b.iri?u.ESCAPE:l.ESCAPE,et)}function Hr(T,b){return T&&T.toString().replace(!b||!b.iri?u.PCT_ENCODED:l.PCT_ENCODED,tt)}var Go={scheme:"http",domainHost:!0,parse:function(b,A){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b},serialize:function(b,A){var C=String(b.scheme).toLowerCase()==="https";return(b.port===(C?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}},Ft={scheme:"https",domainHost:Go.domainHost,parse:Go.parse,serialize:Go.serialize};function Du(T){return typeof T.secure=="boolean"?T.secure:String(T.scheme).toLowerCase()==="wss"}var ei={scheme:"ws",domainHost:!0,parse:function(b,A){var C=b;return C.secure=Du(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(b,A){if((b.port===(Du(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){var C=b.resourceName.split("?"),I=f(C,2),H=I[0],ie=I[1];b.path=H&&H!=="/"?H:void 0,b.query=ie,b.resourceName=void 0}return b.fragment=void 0,b}},Fe={scheme:"wss",domainHost:ei.domainHost,parse:ei.parse,serialize:ei.serialize},dr={},zN=!0,pr="[A-Za-z0-9\\-\\.\\_\\~"+(zN?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",_t="[0-9A-Fa-f]",MN=r(r("%[EFef]"+_t+"%"+_t+_t+"%"+_t+_t)+"|"+r("%[89A-Fa-f]"+_t+"%"+_t+_t)+"|"+r("%"+_t+_t)),lt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",xi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",HN=t(xi,'[\\"\\\\]'),Vr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",mr=new RegExp(pr,"g"),Cn=new RegExp(MN,"g"),ti=new RegExp(t("[^]",lt,"[\\.]",'[\\"]',HN),"g"),ri=new RegExp(t("[^]",pr,Vr),"g"),Lu=ri;function sn(T){var b=tt(T);return b.match(mr)?b:T}var E0={scheme:"mailto",parse:function(b,A){var C=b,I=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var H=!1,ie={},_e=C.query.split("&"),Te=0,ft=_e.length;Te<ft;++Te){var ye=_e[Te].split("=");switch(ye[0]){case"to":for(var Ke=ye[1].split(","),ct=0,Ue=Ke.length;ct<Ue;++ct)I.push(Ke[ct]);break;case"subject":C.subject=Hr(ye[1],A);break;case"body":C.body=Hr(ye[1],A);break;default:H=!0,ie[Hr(ye[0],A)]=Hr(ye[1],A);break}}H&&(C.headers=ie)}C.query=void 0;for(var be=0,Je=I.length;be<Je;++be){var Ce=I[be].split("@");if(Ce[0]=Hr(Ce[0]),A.unicodeSupport)Ce[1]=Hr(Ce[1],A).toLowerCase();else try{Ce[1]=ir.toASCII(Hr(Ce[1],A).toLowerCase())}catch(qi){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+qi}I[be]=Ce.join("@")}return C},serialize:function(b,A){var C=b,I=s(b.to);if(I){for(var H=0,ie=I.length;H<ie;++H){var _e=String(I[H]),Te=_e.lastIndexOf("@"),ft=_e.slice(0,Te).replace(Cn,sn).replace(Cn,i).replace(ti,et),ye=_e.slice(Te+1);try{ye=A.iri?ir.toUnicode(ye):ir.toASCII(Hr(ye,A).toLowerCase())}catch(be){C.error=C.error||"Email address's domain name can not be converted to "+(A.iri?"Unicode":"ASCII")+" via punycode: "+be}I[H]=ft+"@"+ye}C.path=I.join(",")}var Ke=b.headers=b.headers||{};b.subject&&(Ke.subject=b.subject),b.body&&(Ke.body=b.body);var ct=[];for(var Ue in Ke)Ke[Ue]!==dr[Ue]&&ct.push(Ue.replace(Cn,sn).replace(Cn,i).replace(ri,et)+"="+Ke[Ue].replace(Cn,sn).replace(Cn,i).replace(Lu,et));return ct.length&&(C.query=ct.join("&")),C}},VN=/^([^\:]+)\:(.*)/,R0={scheme:"urn",parse:function(b,A){var C=b.path&&b.path.match(VN),I=b;if(C){var H=A.scheme||I.scheme||"urn",ie=C[1].toLowerCase(),_e=C[2],Te=H+":"+(A.nid||ie),ft=Y[Te];I.nid=ie,I.nss=_e,I.path=void 0,ft&&(I=ft.parse(I,A))}else I.error=I.error||"URN can not be parsed.";return I},serialize:function(b,A){var C=A.scheme||b.scheme||"urn",I=b.nid,H=C+":"+(A.nid||I),ie=Y[H];ie&&(b=ie.serialize(b,A));var _e=b,Te=b.nss;return _e.path=(I||A.nid)+":"+Te,_e}},UN=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,P0={scheme:"urn:uuid",parse:function(b,A){var C=b;return C.uuid=C.nss,C.nss=void 0,!A.tolerant&&(!C.uuid||!C.uuid.match(UN))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(b,A){var C=b;return C.nss=(b.uuid||"").toLowerCase(),C}};Y[Go.scheme]=Go,Y[Ft.scheme]=Ft,Y[ei.scheme]=ei,Y[Fe.scheme]=Fe,Y[E0.scheme]=E0,Y[R0.scheme]=R0,Y[P0.scheme]=P0,e.SCHEMES=Y,e.pctEncChar=et,e.pctDecChars=tt,e.parse=U,e.removeDotSegments=Ve,e.serialize=mt,e.resolveComponents=b0,e.resolve=Mr,e.normalize=$n,e.equal=Bo,e.escapeComponent=Zn,e.unescapeComponent=Hr,Object.defineProperty(e,"__esModule",{value:!0})})});var tb=v(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var eb=ZS();eb.code='require("ajv/dist/runtime/uri").default';Xd.default=eb});var ep=v(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.CodeGen=qt.Name=qt.nil=qt.stringify=qt.str=qt._=qt.KeywordCxt=void 0;var JM=Us();Object.defineProperty(qt,"KeywordCxt",{enumerable:!0,get:function(){return JM.KeywordCxt}});var Gs=Z();Object.defineProperty(qt,"_",{enumerable:!0,get:function(){return Gs._}});Object.defineProperty(qt,"str",{enumerable:!0,get:function(){return Gs.str}});Object.defineProperty(qt,"stringify",{enumerable:!0,get:function(){return Gs.stringify}});Object.defineProperty(qt,"nil",{enumerable:!0,get:function(){return Gs.nil}});Object.defineProperty(qt,"Name",{enumerable:!0,get:function(){return Gs.Name}});Object.defineProperty(qt,"CodeGen",{enumerable:!0,get:function(){return Gs.CodeGen}});var YM=_a(),ob=yi(),WM=Nd(),wa=Xi(),XM=Z(),Sa=ya(),ql=ma(),Zd=oe(),rb=XS(),QM=tb(),ab=(e,t)=>new RegExp(e,t);ab.code="new RegExp";var ZM=["removeAdditional","useDefaults","coerceTypes"],e2=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),t2={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},r2={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},nb=200;function n2(e){var t,r,n,i,s,o,a,u,l,f,c,h,d,p,y,w,_,S,g,m,P,$,E,O,k;let R=e.strict,D=(t=e.code)===null||t===void 0?void 0:t.optimize,j=D===!0||D===void 0?1:D||0,L=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:ab,ee=(i=e.uriResolver)!==null&&i!==void 0?i:QM.default;return{strictSchema:(o=(s=e.strictSchema)!==null&&s!==void 0?s:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=e.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(f=(l=e.strictTypes)!==null&&l!==void 0?l:R)!==null&&f!==void 0?f:"log",strictTuples:(h=(c=e.strictTuples)!==null&&c!==void 0?c:R)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=e.strictRequired)!==null&&d!==void 0?d:R)!==null&&p!==void 0?p:!1,code:e.code?{...e.code,optimize:j,regExp:L}:{optimize:j,regExp:L},loopRequired:(y=e.loopRequired)!==null&&y!==void 0?y:nb,loopEnum:(w=e.loopEnum)!==null&&w!==void 0?w:nb,meta:(_=e.meta)!==null&&_!==void 0?_:!0,messages:(S=e.messages)!==null&&S!==void 0?S:!0,inlineRefs:(g=e.inlineRefs)!==null&&g!==void 0?g:!0,schemaId:(m=e.schemaId)!==null&&m!==void 0?m:"$id",addUsedSchema:(P=e.addUsedSchema)!==null&&P!==void 0?P:!0,validateSchema:($=e.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(E=e.validateFormats)!==null&&E!==void 0?E:!0,unicodeRegExp:(O=e.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(k=e.int32range)!==null&&k!==void 0?k:!0,uriResolver:ee}}var ba=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...n2(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new XM.ValueScope({scope:{},prefixes:e2,es5:r,lines:n}),this.logger=l2(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,WM.getRules)(),ib.call(this,t2,t,"NOT SUPPORTED"),ib.call(this,r2,t,"DEPRECATED","warn"),this._metaOpts=a2.call(this),t.formats&&s2.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&o2.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),i2.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,i=rb;n==="id"&&(i={...rb},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,t,r);async function i(f,c){await s.call(this,f.$schema);let h=this._addSchema(f,c);return h.validate||o.call(this,h)}async function s(f){f&&!this.getSchema(f)&&await i.call(this,{$ref:f},!0)}async function o(f){try{return this._compileSchemaEnv(f)}catch(c){if(!(c instanceof ob.default))throw c;return a.call(this,c),await u.call(this,c.missingSchema),o.call(this,f)}}function a({missingSchema:f,missingRef:c}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${c} cannot be resolved`)}async function u(f){let c=await l.call(this,f);this.refs[f]||await s.call(this,c.$schema),this.refs[f]||this.addSchema(c,f,r)}async function l(f){let c=this._loading[f];if(c)return c;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(t,r,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,i);return this}let s;if(typeof t=="object"){let{schemaId:o}=this.opts;if(s=t[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Sa.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,i,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,t);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(t){let r;for(;typeof(r=sb.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,i=new wa.SchemaEnv({schema:{},schemaId:n});if(r=wa.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=sb.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,Sa.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(c2.call(this,n,r),!r)return(0,Zd.eachItem)(n,s=>Qd.call(this,s)),this;d2.call(this,r);let i={...r,type:(0,ql.getJSONTypes)(r.type),schemaType:(0,ql.getJSONTypes)(r.schemaType)};return(0,Zd.eachItem)(n,i.type.length===0?s=>Qd.call(this,s,i):s=>i.type.forEach(o=>Qd.call(this,s,i,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===t);i>=0&&n.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let s=i.split("/").slice(1),o=t;for(let a of s)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:l}=u.definition,f=o[a];l&&f&&(o[a]=ub(f))}}return t}_removeAllSchemas(t,r){for(let n in t){let i=t[n];(!r||r.test(n))&&(typeof i=="string"?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(t);if(u!==void 0)return u;n=(0,Sa.normalizeId)(o||n);let l=Sa.getSchemaRefs.call(this,t,n);return u=new wa.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),i&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):wa.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{wa.compileSchema.call(this,t)}finally{this.opts=r}}};qt.default=ba;ba.ValidationError=YM.default;ba.MissingRefError=ob.default;function ib(e,t,r,n="error"){for(let i in e){let s=i;s in t&&this.logger[n](`${r}: option ${i}. ${e[s]}`)}}function sb(e){return e=(0,Sa.normalizeId)(e),this.schemas[e]||this.refs[e]}function i2(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function s2(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function o2(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function a2(){let e={...this.opts};for(let t of ZM)delete e[t];return e}var u2={log(){},warn(){},error(){}};function l2(e){if(e===!1)return u2;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var f2=/^[a-z_$][a-z0-9_$:-]*$/i;function c2(e,t){let{RULES:r}=this;if((0,Zd.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!f2.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Qd(e,t,r){var n;let i=t==null?void 0:t.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,ql.getJSONTypes)(t.type),schemaType:(0,ql.getJSONTypes)(t.schemaType)}};t.before?h2.call(this,o,a,t.before):o.rules.push(a),s.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function h2(e,t,r){let n=e.rules.findIndex(i=>i.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function d2(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=ub(t)),e.validateSchema=this.compile(t,!0))}var p2={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ub(e){return{anyOf:[e,p2]}}});var lb=v(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});var m2={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};tp.default=m2});var rp=v(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.callRef=Qi.getValidate=void 0;var y2=yi(),fb=xt(),fr=Z(),Ks=kr(),cb=Xi(),jl=oe(),g2={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=n,{root:l}=s;if((r==="#"||r==="#/")&&i===l.baseId)return c();let f=cb.resolveRef.call(u,l,i,r);if(f===void 0)throw new y2.default(n.opts.uriResolver,i,r);if(f instanceof cb.SchemaEnv)return h(f);return d(f);function c(){if(s===l)return Dl(e,o,s,s.$async);let p=t.scopeValue("root",{ref:l});return Dl(e,(0,fr._)`${p}.validate`,l,l.$async)}function h(p){let y=hb(e,p);Dl(e,y,p,p.$async)}function d(p){let y=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,fr.stringify)(p)}:{ref:p}),w=t.name("valid"),_=e.subschema({schema:p,dataTypes:[],schemaPath:fr.nil,topSchemaRef:y,errSchemaPath:r},w);e.mergeEvaluated(_),e.ok(w)}}};function hb(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,fr._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Qi.getValidate=hb;function Dl(e,t,r,n){let{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?Ks.default.this:fr.nil;n?f():c();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=i.let("valid");i.try(()=>{i.code((0,fr._)`await ${(0,fb.callValidateCode)(e,t,l)}`),d(t),o||i.assign(p,!0)},y=>{i.if((0,fr._)`!(${y} instanceof ${s.ValidationError})`,()=>i.throw(y)),h(y),o||i.assign(p,!1)}),e.ok(p)}function c(){e.result((0,fb.callValidateCode)(e,t,l),()=>d(t),()=>h(t))}function h(p){let y=(0,fr._)`${p}.errors`;i.assign(Ks.default.vErrors,(0,fr._)`${Ks.default.vErrors} === null ? ${y} : ${Ks.default.vErrors}.concat(${y})`),i.assign(Ks.default.errors,(0,fr._)`${Ks.default.vErrors}.length`)}function d(p){var y;if(!s.opts.unevaluated)return;let w=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(s.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(s.props=jl.mergeEvaluated.props(i,w.props,s.props));else{let _=i.var("props",(0,fr._)`${p}.evaluated.props`);s.props=jl.mergeEvaluated.props(i,_,s.props,fr.Name)}if(s.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(s.items=jl.mergeEvaluated.items(i,w.items,s.items));else{let _=i.var("items",(0,fr._)`${p}.evaluated.items`);s.items=jl.mergeEvaluated.items(i,_,s.items,fr.Name)}}}Qi.callRef=Dl;Qi.default=g2});var db=v(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});var v2=lb(),_2=rp(),w2=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",v2.default,_2.default];np.default=w2});var pb=v(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});var Ll=Z(),gi=Ll.operators,Fl={maximum:{okStr:"<=",ok:gi.LTE,fail:gi.GT},minimum:{okStr:">=",ok:gi.GTE,fail:gi.LT},exclusiveMaximum:{okStr:"<",ok:gi.LT,fail:gi.GTE},exclusiveMinimum:{okStr:">",ok:gi.GT,fail:gi.LTE}},S2={message:({keyword:e,schemaCode:t})=>(0,Ll.str)`must be ${Fl[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ll._)`{comparison: ${Fl[e].okStr}, limit: ${t}}`},b2={keyword:Object.keys(Fl),type:"number",schemaType:"number",$data:!0,error:S2,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Ll._)`${r} ${Fl[t].fail} ${n} || isNaN(${r})`)}};ip.default=b2});var mb=v(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});var Ea=Z(),E2={message:({schemaCode:e})=>(0,Ea.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ea._)`{multipleOf: ${e}}`},R2={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:E2,code(e){let{gen:t,data:r,schemaCode:n,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Ea._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Ea._)`${o} !== parseInt(${o})`;e.fail$data((0,Ea._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};sp.default=R2});var gb=v(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});function yb(e){let t=e.length,r=0,n=0,i;for(;n<t;)r++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=e.charCodeAt(n),(i&64512)===56320&&n++);return r}op.default=yb;yb.code='require("ajv/dist/runtime/ucs2length").default'});var vb=v(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});var Zi=Z(),P2=oe(),T2=gb(),O2={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,Zi.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Zi._)`{limit: ${e}}`},A2={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:O2,code(e){let{keyword:t,data:r,schemaCode:n,it:i}=e,s=t==="maxLength"?Zi.operators.GT:Zi.operators.LT,o=i.opts.unicode===!1?(0,Zi._)`${r}.length`:(0,Zi._)`${(0,P2.useFunc)(e.gen,T2.default)}(${r})`;e.fail$data((0,Zi._)`${o} ${s} ${n}`)}};ap.default=A2});var _b=v(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var $2=xt(),zl=Z(),C2={message:({schemaCode:e})=>(0,zl.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,zl._)`{pattern: ${e}}`},I2={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:C2,code(e){let{data:t,$data:r,schema:n,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=r?(0,zl._)`(new RegExp(${i}, ${o}))`:(0,$2.usePattern)(e,n);e.fail$data((0,zl._)`!${a}.test(${t})`)}};up.default=I2});var wb=v(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});var Ra=Z(),N2={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Ra.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Ra._)`{limit: ${e}}`},k2={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:N2,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxProperties"?Ra.operators.GT:Ra.operators.LT;e.fail$data((0,Ra._)`Object.keys(${r}).length ${i} ${n}`)}};lp.default=k2});var Sb=v(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});var Pa=xt(),Ta=Z(),x2=oe(),q2={message:({params:{missingProperty:e}})=>(0,Ta.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ta._)`{missingProperty: ${e}}`},j2={keyword:"required",type:"object",schemaType:"array",$data:!0,error:q2,code(e){let{gen:t,schema:r,schemaCode:n,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?l():f(),a.strictRequired){let d=e.parentSchema.properties,{definedProperties:p}=e.it;for(let y of r)if((d==null?void 0:d[y])===void 0&&!p.has(y)){let w=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${y}" is not defined at "${w}" (strictRequired)`;(0,x2.checkStrictMode)(o,_,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Ta.nil,c);else for(let d of r)(0,Pa.checkReportMissingProp)(e,d)}function f(){let d=t.let("missing");if(u||s){let p=t.let("valid",!0);e.block$data(p,()=>h(d,p)),e.ok(p)}else t.if((0,Pa.checkMissingProp)(e,r,d)),(0,Pa.reportMissingProp)(e,d),t.else()}function c(){t.forOf("prop",n,d=>{e.setParams({missingProperty:d}),t.if((0,Pa.noPropertyInData)(t,i,d,a.ownProperties),()=>e.error())})}function h(d,p){e.setParams({missingProperty:d}),t.forOf(d,n,()=>{t.assign(p,(0,Pa.propertyInData)(t,i,d,a.ownProperties)),t.if((0,Ta.not)(p),()=>{e.error(),t.break()})},Ta.nil)}}};fp.default=j2});var bb=v(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});var Oa=Z(),D2={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Oa.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Oa._)`{limit: ${e}}`},L2={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:D2,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxItems"?Oa.operators.GT:Oa.operators.LT;e.fail$data((0,Oa._)`${r}.length ${i} ${n}`)}};cp.default=L2});var Aa=v(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});var Eb=Hs();Eb.code='require("ajv/dist/runtime/equal").default';hp.default=Eb});var Rb=v(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});var dp=ma(),jt=Z(),F2=oe(),z2=Aa(),M2={message:({params:{i:e,j:t}})=>(0,jt.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,jt._)`{i: ${e}, j: ${t}}`},H2={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:M2,code(e){let{gen:t,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!n&&!i)return;let u=t.let("valid"),l=s.items?(0,dp.getSchemaTypes)(s.items):[];e.block$data(u,f,(0,jt._)`${o} === false`),e.ok(u);function f(){let p=t.let("i",(0,jt._)`${r}.length`),y=t.let("j");e.setParams({i:p,j:y}),t.assign(u,!0),t.if((0,jt._)`${p} > 1`,()=>(c()?h:d)(p,y))}function c(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,y){let w=t.name("item"),_=(0,dp.checkDataTypes)(l,w,a.opts.strictNumbers,dp.DataType.Wrong),S=t.const("indices",(0,jt._)`{}`);t.for((0,jt._)`;${p}--;`,()=>{t.let(w,(0,jt._)`${r}[${p}]`),t.if(_,(0,jt._)`continue`),l.length>1&&t.if((0,jt._)`typeof ${w} == "string"`,(0,jt._)`${w} += "_"`),t.if((0,jt._)`typeof ${S}[${w}] == "number"`,()=>{t.assign(y,(0,jt._)`${S}[${w}]`),e.error(),t.assign(u,!1).break()}).code((0,jt._)`${S}[${w}] = ${p}`)})}function d(p,y){let w=(0,F2.useFunc)(t,z2.default),_=t.name("outer");t.label(_).for((0,jt._)`;${p}--;`,()=>t.for((0,jt._)`${y} = ${p}; ${y}--;`,()=>t.if((0,jt._)`${w}(${r}[${p}], ${r}[${y}])`,()=>{e.error(),t.assign(u,!1).break(_)})))}}};pp.default=H2});var Pb=v(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});var mp=Z(),V2=oe(),U2=Aa(),B2={message:"must be equal to constant",params:({schemaCode:e})=>(0,mp._)`{allowedValue: ${e}}`},G2={keyword:"const",$data:!0,error:B2,code(e){let{gen:t,data:r,$data:n,schemaCode:i,schema:s}=e;n||s&&typeof s=="object"?e.fail$data((0,mp._)`!${(0,V2.useFunc)(t,U2.default)}(${r}, ${i})`):e.fail((0,mp._)`${s} !== ${r}`)}};yp.default=G2});var Tb=v(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});var $a=Z(),K2=oe(),J2=Aa(),Y2={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,$a._)`{allowedValues: ${e}}`},W2={keyword:"enum",schemaType:"array",$data:!0,error:Y2,code(e){let{gen:t,data:r,$data:n,schema:i,schemaCode:s,it:o}=e;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,u,l=()=>u??(u=(0,K2.useFunc)(t,J2.default)),f;if(a||n)f=t.let("valid"),e.block$data(f,c);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let d=t.const("vSchema",s);f=(0,$a.or)(...i.map((p,y)=>h(d,y)))}e.pass(f);function c(){t.assign(f,!1),t.forOf("v",s,d=>t.if((0,$a._)`${l()}(${r}, ${d})`,()=>t.assign(f,!0).break()))}function h(d,p){let y=i[p];return typeof y=="object"&&y!==null?(0,$a._)`${l()}(${r}, ${d}[${p}])`:(0,$a._)`${r} === ${y}`}}};gp.default=W2});var Ob=v(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});var X2=pb(),Q2=mb(),Z2=vb(),eH=_b(),tH=wb(),rH=Sb(),nH=bb(),iH=Rb(),sH=Pb(),oH=Tb(),aH=[X2.default,Q2.default,Z2.default,eH.default,tH.default,rH.default,nH.default,iH.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},sH.default,oH.default];vp.default=aH});var wp=v(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.validateAdditionalItems=void 0;var es=Z(),_p=oe(),uH={message:({params:{len:e}})=>(0,es.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,es._)`{limit: ${e}}`},lH={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:uH,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,_p.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ab(e,n)}};function Ab(e,t){let{gen:r,schema:n,data:i,keyword:s,it:o}=e;o.items=!0;let a=r.const("len",(0,es._)`${i}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,es._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,_p.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,es._)`${a} <= ${t.length}`);r.if((0,es.not)(l),()=>u(l)),e.ok(l)}function u(l){r.forRange("i",t.length,a,f=>{e.subschema({keyword:s,dataProp:f,dataPropType:_p.Type.Num},l),o.allErrors||r.if((0,es.not)(l),()=>r.break())})}}Ca.validateAdditionalItems=Ab;Ca.default=lH});var Sp=v(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.validateTuple=void 0;var $b=Z(),Ml=oe(),fH=xt(),cH={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Cb(e,"additionalItems",t);r.items=!0,!(0,Ml.alwaysValidSchema)(r,t)&&e.ok((0,fH.validateArray)(e))}};function Cb(e,t,r=e.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=e;f(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Ml.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),l=n.const("len",(0,$b._)`${s}.length`);r.forEach((c,h)=>{(0,Ml.alwaysValidSchema)(a,c)||(n.if((0,$b._)`${l} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},u)),e.ok(u))});function f(c){let{opts:h,errSchemaPath:d}=a,p=r.length,y=p===c.minItems&&(p===c.maxItems||c[t]===!1);if(h.strictTuples&&!y){let w=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${d}"`;(0,Ml.checkStrictMode)(a,w,h.strictTuples)}}}Ia.validateTuple=Cb;Ia.default=cH});var Ib=v(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});var hH=Sp(),dH={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,hH.validateTuple)(e,"items")};bp.default=dH});var kb=v(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});var Nb=Z(),pH=oe(),mH=xt(),yH=wp(),gH={message:({params:{len:e}})=>(0,Nb.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Nb._)`{limit: ${e}}`},vH={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:gH,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,!(0,pH.alwaysValidSchema)(n,t)&&(i?(0,yH.validateAdditionalItems)(e,i):e.ok((0,mH.validateArray)(e)))}};Ep.default=vH});var xb=v(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});var qr=Z(),Hl=oe(),_H={message:({params:{min:e,max:t}})=>t===void 0?(0,qr.str)`must contain at least ${e} valid item(s)`:(0,qr.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,qr._)`{minContains: ${e}}`:(0,qr._)`{minContains: ${e}, maxContains: ${t}}`},wH={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_H,code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e,o,a,{minContains:u,maxContains:l}=n;s.opts.next?(o=u===void 0?1:u,a=l):o=1;let f=t.const("len",(0,qr._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,Hl.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Hl.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Hl.alwaysValidSchema)(s,r)){let y=(0,qr._)`${f} >= ${o}`;a!==void 0&&(y=(0,qr._)`${y} && ${f} <= ${a}`),e.pass(y);return}s.items=!0;let c=t.name("valid");a===void 0&&o===1?d(c,()=>t.if(c,()=>t.break())):o===0?(t.let(c,!0),a!==void 0&&t.if((0,qr._)`${i}.length > 0`,h)):(t.let(c,!1),h()),e.result(c,()=>e.reset());function h(){let y=t.name("_valid"),w=t.let("count",0);d(y,()=>t.if(y,()=>p(w)))}function d(y,w){t.forRange("i",0,f,_=>{e.subschema({keyword:"contains",dataProp:_,dataPropType:Hl.Type.Num,compositeRule:!0},y),w()})}function p(y){t.code((0,qr._)`${y}++`),a===void 0?t.if((0,qr._)`${y} >= ${o}`,()=>t.assign(c,!0).break()):(t.if((0,qr._)`${y} > ${a}`,()=>t.assign(c,!1).break()),o===1?t.assign(c,!0):t.if((0,qr._)`${y} >= ${o}`,()=>t.assign(c,!0)))}}};Rp.default=wH});var Db=v(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.validateSchemaDeps=cn.validatePropertyDeps=cn.error=void 0;var Pp=Z(),SH=oe(),Na=xt();cn.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,Pp.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,Pp._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var bH={keyword:"dependencies",type:"object",schemaType:"object",error:cn.error,code(e){let[t,r]=EH(e);qb(e,t),jb(e,r)}};function EH({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let i=Array.isArray(e[n])?t:r;i[n]=e[n]}return[t,r]}function qb(e,t=e.schema){let{gen:r,data:n,it:i}=e;if(Object.keys(t).length===0)return;let s=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let u=(0,Na.propertyInData)(r,n,o,i.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(u,()=>{for(let l of a)(0,Na.checkReportMissingProp)(e,l)}):(r.if((0,Pp._)`${u} && (${(0,Na.checkMissingProp)(e,a,s)})`),(0,Na.reportMissingProp)(e,s),r.else())}}cn.validatePropertyDeps=qb;function jb(e,t=e.schema){let{gen:r,data:n,keyword:i,it:s}=e,o=r.name("valid");for(let a in t)(0,SH.alwaysValidSchema)(s,t[a])||(r.if((0,Na.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let u=e.subschema({keyword:i,schemaProp:a},o);e.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),e.ok(o))}cn.validateSchemaDeps=jb;cn.default=bH});var Fb=v(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});var Lb=Z(),RH=oe(),PH={message:"property name must be valid",params:({params:e})=>(0,Lb._)`{propertyName: ${e.propertyName}}`},TH={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:PH,code(e){let{gen:t,schema:r,data:n,it:i}=e;if((0,RH.alwaysValidSchema)(i,r))return;let s=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,Lb.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Tp.default=TH});var Ap=v(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});var Vl=xt(),Yr=Z(),OH=kr(),Ul=oe(),AH={message:"must NOT have additional properties",params:({params:e})=>(0,Yr._)`{additionalProperty: ${e.additionalProperty}}`},$H={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:AH,code(e){let{gen:t,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Ul.alwaysValidSchema)(o,r))return;let l=(0,Vl.allSchemaProperties)(n.properties),f=(0,Vl.allSchemaProperties)(n.patternProperties);c(),e.ok((0,Yr._)`${s} === ${OH.default.errors}`);function c(){t.forIn("key",i,w=>{!l.length&&!f.length?p(w):t.if(h(w),()=>p(w))})}function h(w){let _;if(l.length>8){let S=(0,Ul.schemaRefOrVal)(o,n.properties,"properties");_=(0,Vl.isOwnProperty)(t,S,w)}else l.length?_=(0,Yr.or)(...l.map(S=>(0,Yr._)`${w} === ${S}`)):_=Yr.nil;return f.length&&(_=(0,Yr.or)(_,...f.map(S=>(0,Yr._)`${(0,Vl.usePattern)(e,S)}.test(${w})`))),(0,Yr.not)(_)}function d(w){t.code((0,Yr._)`delete ${i}[${w}]`)}function p(w){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(w);return}if(r===!1){e.setParams({additionalProperty:w}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,Ul.alwaysValidSchema)(o,r)){let _=t.name("valid");u.removeAdditional==="failing"?(y(w,_,!1),t.if((0,Yr.not)(_),()=>{e.reset(),d(w)})):(y(w,_),a||t.if((0,Yr.not)(_),()=>t.break()))}}function y(w,_,S){let g={keyword:"additionalProperties",dataProp:w,dataPropType:Ul.Type.Str};S===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,_)}}};Op.default=$H});var Hb=v(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});var CH=Us(),zb=xt(),$p=oe(),Mb=Ap(),IH={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Mb.default.code(new CH.KeywordCxt(s,Mb.default,"additionalProperties"));let o=(0,zb.allSchemaProperties)(r);for(let c of o)s.definedProperties.add(c);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=$p.mergeEvaluated.props(t,(0,$p.toHash)(o),s.props));let a=o.filter(c=>!(0,$p.alwaysValidSchema)(s,r[c]));if(a.length===0)return;let u=t.name("valid");for(let c of a)l(c)?f(c):(t.if((0,zb.propertyInData)(t,i,c,s.opts.ownProperties)),f(c),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(c),e.ok(u);function l(c){return s.opts.useDefaults&&!s.compositeRule&&r[c].default!==void 0}function f(c){e.subschema({keyword:"properties",schemaProp:c,dataProp:c},u)}}};Cp.default=IH});var Gb=v(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});var Vb=xt(),Bl=Z(),Ub=oe(),Bb=oe(),NH={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Vb.allSchemaProperties)(r),u=a.filter(y=>(0,Ub.alwaysValidSchema)(s,r[y]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,f=t.name("valid");s.props!==!0&&!(s.props instanceof Bl.Name)&&(s.props=(0,Bb.evaluatedPropsToName)(t,s.props));let{props:c}=s;h();function h(){for(let y of a)l&&d(y),s.allErrors?p(y):(t.var(f,!0),p(y),t.if(f))}function d(y){for(let w in l)new RegExp(y).test(w)&&(0,Ub.checkStrictMode)(s,`property ${w} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",n,w=>{t.if((0,Bl._)`${(0,Vb.usePattern)(e,y)}.test(${w})`,()=>{let _=u.includes(y);_||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:w,dataPropType:Bb.Type.Str},f),s.opts.unevaluated&&c!==!0?t.assign((0,Bl._)`${c}[${w}]`,!0):!_&&!s.allErrors&&t.if((0,Bl.not)(f),()=>t.break())})})}}};Ip.default=NH});var Kb=v(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});var kH=oe(),xH={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,kH.alwaysValidSchema)(n,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Np.default=xH});var Jb=v(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});var qH=xt(),jH={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qH.validateUnion,error:{message:"must match a schema in anyOf"}};kp.default=jH});var Yb=v(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});var Gl=Z(),DH=oe(),LH={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Gl._)`{passingSchemas: ${e.passing}}`},FH={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:LH,code(e){let{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((f,c)=>{let h;(0,DH.alwaysValidSchema)(i,f)?t.var(u,!0):h=e.subschema({keyword:"oneOf",schemaProp:c,compositeRule:!0},u),c>0&&t.if((0,Gl._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Gl._)`[${a}, ${c}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,c),h&&e.mergeEvaluated(h,Gl.Name)})})}}};xp.default=FH});var Wb=v(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});var zH=oe(),MH={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((s,o)=>{if((0,zH.alwaysValidSchema)(n,s))return;let a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};qp.default=MH});var Zb=v(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});var Kl=Z(),Qb=oe(),HH={message:({params:e})=>(0,Kl.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Kl._)`{failingKeyword: ${e.ifClause}}`},VH={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:HH,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Qb.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=Xb(n,"then"),s=Xb(n,"else");if(!i&&!s)return;let o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){let f=t.let("ifClause");e.setParams({ifClause:f}),t.if(a,l("then",f),l("else",f))}else i?t.if(a,l("then")):t.if((0,Kl.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){let f=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(f)}function l(f,c){return()=>{let h=e.subschema({keyword:f},a);t.assign(o,a),e.mergeValidEvaluated(h,o),c?t.assign(c,(0,Kl._)`${f}`):e.setParams({ifClause:f})}}}};function Xb(e,t){let r=e.schema[t];return r!==void 0&&!(0,Qb.alwaysValidSchema)(e,r)}jp.default=VH});var eE=v(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});var UH=oe(),BH={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,UH.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Dp.default=BH});var tE=v(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});var GH=wp(),KH=Ib(),JH=Sp(),YH=kb(),WH=xb(),XH=Db(),QH=Fb(),ZH=Ap(),eV=Hb(),tV=Gb(),rV=Kb(),nV=Jb(),iV=Yb(),sV=Wb(),oV=Zb(),aV=eE();function uV(e=!1){let t=[rV.default,nV.default,iV.default,sV.default,oV.default,aV.default,QH.default,ZH.default,XH.default,eV.default,tV.default];return e?t.push(KH.default,YH.default):t.push(GH.default,JH.default),t.push(WH.default),t}Lp.default=uV});var rE=v(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});var rt=Z(),lV={message:({schemaCode:e})=>(0,rt.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,rt._)`{format: ${e}}`},fV={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:lV,code(e,t){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:f,self:c}=a;if(!u.validateFormats)return;i?h():d();function h(){let p=r.scopeValue("formats",{ref:c.formats,code:u.code.formats}),y=r.const("fDef",(0,rt._)`${p}[${o}]`),w=r.let("fType"),_=r.let("format");r.if((0,rt._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(w,(0,rt._)`${y}.type || "string"`).assign(_,(0,rt._)`${y}.validate`),()=>r.assign(w,(0,rt._)`"string"`).assign(_,y)),e.fail$data((0,rt.or)(S(),g()));function S(){return u.strictSchema===!1?rt.nil:(0,rt._)`${o} && !${_}`}function g(){let m=f.$async?(0,rt._)`(${y}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,rt._)`${_}(${n})`,P=(0,rt._)`(typeof ${_} == "function" ? ${m} : ${_}.test(${n}))`;return(0,rt._)`${_} && ${_} !== true && ${w} === ${t} && !${P}`}}function d(){let p=c.formats[s];if(!p){S();return}if(p===!0)return;let[y,w,_]=g(p);y===t&&e.pass(m());function S(){if(u.strictSchema===!1){c.logger.warn(P());return}throw new Error(P());function P(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function g(P){let $=P instanceof RegExp?(0,rt.regexpCode)(P):u.code.formats?(0,rt._)`${u.code.formats}${(0,rt.getProperty)(s)}`:void 0,E=r.scopeValue("formats",{key:s,ref:P,code:$});return typeof P=="object"&&!(P instanceof RegExp)?[P.type||"string",P.validate,(0,rt._)`${E}.validate`]:["string",P,E]}function m(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!f.$async)throw new Error("async format in sync schema");return(0,rt._)`await ${_}(${n})`}return typeof w=="function"?(0,rt._)`${_}(${n})`:(0,rt._)`${_}.test(${n})`}}}};Fp.default=fV});var nE=v(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});var cV=rE(),hV=[cV.default];zp.default=hV});var iE=v(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.contentVocabulary=Js.metadataVocabulary=void 0;Js.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Js.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var oE=v(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});var dV=db(),pV=Ob(),mV=tE(),yV=nE(),sE=iE(),gV=[dV.default,pV.default,(0,mV.default)(),yV.default,sE.metadataVocabulary,sE.contentVocabulary];Mp.default=gV});var Hp=v(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.DiscrError=void 0;var vV;(function(e){e.Tag="tag",e.Mapping="mapping"})(vV=ka.DiscrError||(ka.DiscrError={}))});var uE=v(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});var Ys=Z(),Vp=Hp(),aE=Xi(),_V=oe(),wV={message:({params:{discrError:e,tagName:t}})=>e===Vp.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ys._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},SV={keyword:"discriminator",type:"object",schemaType:"object",error:wV,code(e){let{gen:t,data:r,schema:n,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=t.let("valid",!1),l=t.const("tag",(0,Ys._)`${r}${(0,Ys.getProperty)(a)}`);t.if((0,Ys._)`typeof ${l} == "string"`,()=>f(),()=>e.error(!1,{discrError:Vp.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function f(){let d=h();t.if(!1);for(let p in d)t.elseIf((0,Ys._)`${l} === ${p}`),t.assign(u,c(d[p]));t.else(),e.error(!1,{discrError:Vp.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function c(d){let p=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:d},p);return e.mergeEvaluated(y,Ys.Name),p}function h(){var d;let p={},y=_(i),w=!0;for(let m=0;m<o.length;m++){let P=o[m];P!=null&&P.$ref&&!(0,_V.schemaHasRulesButRef)(P,s.self.RULES)&&(P=aE.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,P==null?void 0:P.$ref),P instanceof aE.SchemaEnv&&(P=P.schema));let $=(d=P==null?void 0:P.properties)===null||d===void 0?void 0:d[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);w=w&&(y||_(P)),S($,m)}if(!w)throw new Error(`discriminator: "${a}" must be required`);return p;function _({required:m}){return Array.isArray(m)&&m.includes(a)}function S(m,P){if(m.const)g(m.const,P);else if(m.enum)for(let $ of m.enum)g($,P);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(m,P){if(typeof m!="string"||m in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[m]=P}}}};Up.default=SV});var lE=v((UZ,bV)=>{bV.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Wl=v((Ye,cE)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.MissingRefError=Ye.ValidationError=Ye.CodeGen=Ye.Name=Ye.nil=Ye.stringify=Ye.str=Ye._=Ye.KeywordCxt=void 0;var EV=ep(),RV=oE(),PV=uE(),fE=lE(),TV=["/properties"],Jl="http://json-schema.org/draft-07/schema",Yl=class extends EV.default{_addVocabularies(){super._addVocabularies(),RV.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(PV.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(fE,TV):fE;this.addMetaSchema(t,Jl,!1),this.refs["http://json-schema.org/schema"]=Jl}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Jl)?Jl:void 0)}};cE.exports=Ye=Yl;Object.defineProperty(Ye,"__esModule",{value:!0});Ye.default=Yl;var OV=Us();Object.defineProperty(Ye,"KeywordCxt",{enumerable:!0,get:function(){return OV.KeywordCxt}});var Ws=Z();Object.defineProperty(Ye,"_",{enumerable:!0,get:function(){return Ws._}});Object.defineProperty(Ye,"str",{enumerable:!0,get:function(){return Ws.str}});Object.defineProperty(Ye,"stringify",{enumerable:!0,get:function(){return Ws.stringify}});Object.defineProperty(Ye,"nil",{enumerable:!0,get:function(){return Ws.nil}});Object.defineProperty(Ye,"Name",{enumerable:!0,get:function(){return Ws.Name}});Object.defineProperty(Ye,"CodeGen",{enumerable:!0,get:function(){return Ws.CodeGen}});var AV=_a();Object.defineProperty(Ye,"ValidationError",{enumerable:!0,get:function(){return AV.default}});var $V=yi();Object.defineProperty(Ye,"MissingRefError",{enumerable:!0,get:function(){return $V.default}})});var dE=v((BZ,hE)=>{"use strict";var CV={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};hE.exports={HEX:CV}});var SE=v((GZ,wE)=>{"use strict";var{HEX:IV}=dE();function gE(e){if(_E(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||[],[r]=t;return r?{host:kV(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Bp(e){let t="",r=!0;for(let n of e){if(n!=="0"&&r===!0&&(r=!1),IV[n]===void 0)return;r||(t+=n)}return t}function NV(e){let t=0,r={error:!1,address:"",zone:""},n=[],i=[],s=!1,o=!1,a=!1;function u(){if(i.length){if(s===!1){let l=Bp(i.join(""));if(l!==void 0)n.push(l);else return r.error=!0,!1}i.length=0}return!0}for(let l=0;l<e.length;l++){let f=e[l];if(!(f==="["||f==="]"))if(f===":"){if(o===!0&&(a=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}l-1>=0&&e[l-1]===":"&&(o=!0);continue}else if(f==="%"){if(!u())break;s=!0}else{i.push(f);continue}}return i.length&&(s?r.zone=i.join(""):a?n.push(i.join("")):n.push(Bp(i.join("")))),r.address=n.join(""),r}function vE(e,t={}){if(_E(e,":")<2)return{host:e,isIPV6:!1};let r=NV(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,i=r.address;return r.zone&&(n+="%"+r.zone,i+="%25"+r.zone),{host:n,escapedHost:i,isIPV6:!0}}}function kV(e,t){let r="",n=!0,i=e.length;for(let s=0;s<i;s++){let o=e[s];o==="0"&&n?(s+1<=i&&e[s+1]===t||s+1===i)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function _E(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var pE=/^\.\.?\//,mE=/^\/\.(\/|$)/,yE=/^\/\.\.(\/|$)/,xV=/^\/?(?:.|\n)*?(?=\/|$)/;function qV(e){let t=[];for(;e.length;)if(e.match(pE))e=e.replace(pE,"");else if(e.match(mE))e=e.replace(mE,"/");else if(e.match(yE))e=e.replace(yE,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(xV);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function jV(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function DV(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),i=gE(n);if(i.isIPV4)n=i.host;else{let s=vE(i.host,{isIPV4:!1});s.isIPV6===!0?n=`[${s.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}wE.exports={recomposeAuthority:DV,normalizeComponentEncoding:jV,removeDotSegments:qV,normalizeIPv4:gE,normalizeIPv6:vE,stringToHexStripped:Bp}});var OE=v((KZ,TE)=>{"use strict";var LV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,FV=/([A-Za-z0-9][A-Za-z0-9-]{0,31}):(([A-Za-z0-9()+,\-.:=@;$_!*']|%[0-9A-Fa-f]{2})+)/;function bE(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function EE(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function RE(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function zV(e){return e.secure=bE(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function MV(e){if((e.port===(bE(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function HV(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(FV);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${n}:${t.nid||e.nid}`,s=Gp[i];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function VV(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=`${r}:${t.nid||n}`,s=Gp[i];s&&(e=s.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function UV(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!LV.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function BV(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var PE={scheme:"http",domainHost:!0,parse:EE,serialize:RE},GV={scheme:"https",domainHost:PE.domainHost,parse:EE,serialize:RE},Xl={scheme:"ws",domainHost:!0,parse:zV,serialize:MV},KV={scheme:"wss",domainHost:Xl.domainHost,parse:Xl.parse,serialize:Xl.serialize},JV={scheme:"urn",parse:HV,serialize:VV,skipNormalize:!0},YV={scheme:"urn:uuid",parse:UV,serialize:BV,skipNormalize:!0},Gp={http:PE,https:GV,ws:Xl,wss:KV,urn:JV,"urn:uuid":YV};TE.exports=Gp});var Jp=v((JZ,Zl)=>{"use strict";var WV=require("url"),{normalizeIPv6:XV,normalizeIPv4:QV,removeDotSegments:xa,recomposeAuthority:ZV,normalizeComponentEncoding:Ql}=SE(),AE=OE();function e3(e,t){return typeof e=="string"?e=hn(Ln(e,t),t):typeof e=="object"&&(e=Ln(hn(e,t),t)),e}function t3(e,t,r){let n=Object.assign({scheme:"null"},r),i=$E(Ln(e,n),Ln(t,n),n,!0);return hn(i,{...n,skipEscape:!0})}function $E(e,t,r,n){let i={};return n||(e=Ln(hn(e,r),r),t=Ln(hn(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=xa(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=xa(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=xa(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=xa(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function r3(e,t,r){return typeof e=="string"?(e=unescape(e),e=hn(Ql(Ln(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=hn(Ql(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=hn(Ql(Ln(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=hn(Ql(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function hn(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),i=[],s=AE[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(i.push(r.scheme),i.push(":"));let o=ZV(r,n);if(o!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(o),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(a=xa(a)),o===void 0&&(a=a.replace(/^\/\//,"/%2F")),i.push(a)}return r.query!==void 0&&(i.push("?"),i.push(r.query)),r.fragment!==void 0&&(i.push("#"),i.push(r.fragment)),i.join("")}var n3=/^(?:([^:/?#]+):)?(?:\/\/((?:([^/?#@]*)@)?(\[[^/?#\]]+\]|[^/?#:]*)(?::(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;function Ln(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let s=e.match(n3);if(s){if(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5]),n.host){let a=QV(n.host);a.isIPV4===!1?n.host=XV(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=AE[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost))try{n.host=WV.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Kp={normalize:e3,resolve:t3,resolveComponents:$E,equal:r3,serialize:hn,parse:Ln};Zl.exports=Kp;Zl.exports.default=Kp;Zl.exports.fastUri=Kp});var ef=v(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.formatNames=dn.fastFormats=dn.fullFormats=void 0;function Xs(e,t){return{validate:e,compare:t}}dn.fullFormats={date:Xs(NE,Xp),time:Xs(kE,Qp),"date-time":Xs(a3,xE),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:f3,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:g3,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:c3,int32:{type:"number",validate:p3},int64:{type:"number",validate:m3},float:{type:"number",validate:IE},double:{type:"number",validate:IE},password:!0,binary:!0};dn.fastFormats={...dn.fullFormats,date:Xs(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Xp),time:Xs(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Qp),"date-time":Xs(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,xE),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};dn.formatNames=Object.keys(dn.fullFormats);function i3(e){return e%4===0&&(e%100!==0||e%400===0)}var s3=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o3=[0,31,28,31,30,31,30,31,31,30,31,30,31];function NE(e){let t=s3.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(n===2&&i3(r)?29:o3[n])}function Xp(e,t){if(e&&t)return e>t?1:e<t?-1:0}var Yp=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function kE(e,t){let r=Yp.exec(e);if(!r)return!1;let n=+r[1],i=+r[2],s=+r[3],o=r[5];return(n<=23&&i<=59&&s<=59||n===23&&i===59&&s===60)&&(!t||o!=="")}function Qp(e,t){if(!(e&&t))return;let r=Yp.exec(e),n=Yp.exec(t);if(r&&n)return e=r[1]+r[2]+r[3]+(r[4]||""),t=n[1]+n[2]+n[3]+(n[4]||""),e>t?1:e<t?-1:0}var Wp=/t|\s/i;function a3(e){let t=e.split(Wp);return t.length===2&&NE(t[0])&&kE(t[1],!0)}function xE(e,t){if(!(e&&t))return;let[r,n]=e.split(Wp),[i,s]=t.split(Wp),o=Xp(r,i);if(o!==void 0)return o||Qp(n,s)}var u3=/\/|:/,l3=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function f3(e){return u3.test(e)&&l3.test(e)}var CE=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function c3(e){return CE.lastIndex=0,CE.test(e)}var h3=-(2**31),d3=2**31-1;function p3(e){return Number.isInteger(e)&&e<=d3&&e>=h3}function m3(e){return Number.isInteger(e)}function IE(){return!0}var y3=/[^\\]\\Z/;function g3(e){if(y3.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var qE=v(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.formatLimitDefinition=void 0;var v3=Wl(),Wr=Z(),vi=Wr.operators,tf={formatMaximum:{okStr:"<=",ok:vi.LTE,fail:vi.GT},formatMinimum:{okStr:">=",ok:vi.GTE,fail:vi.LT},formatExclusiveMaximum:{okStr:"<",ok:vi.LT,fail:vi.GTE},formatExclusiveMinimum:{okStr:">",ok:vi.GT,fail:vi.LTE}},_3={message:({keyword:e,schemaCode:t})=>Wr.str`should be ${tf[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>Wr._`{comparison: ${tf[e].okStr}, limit: ${t}}`};Qs.formatLimitDefinition={keyword:Object.keys(tf),type:"string",schemaType:"string",$data:!0,error:_3,code(e){let{gen:t,data:r,schemaCode:n,keyword:i,it:s}=e,{opts:o,self:a}=s;if(!o.validateFormats)return;let u=new v3.KeywordCxt(s,a.RULES.all.format.definition,"format");u.$data?l():f();function l(){let h=t.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=t.const("fmt",Wr._`${h}[${u.schemaCode}]`);e.fail$data(Wr.or(Wr._`typeof ${d} != "object"`,Wr._`${d} instanceof RegExp`,Wr._`typeof ${d}.compare != "function"`,c(d)))}function f(){let h=u.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${i}": format "${h}" does not define "compare" function`);let p=t.scopeValue("formats",{key:h,ref:d,code:o.code.formats?Wr._`${o.code.formats}${Wr.getProperty(h)}`:void 0});e.fail$data(c(p))}function c(h){return Wr._`${h}.compare(${r}, ${n}) ${tf[i].fail} 0`}},dependencies:["format"]};var w3=e=>(e.addKeyword(Qs.formatLimitDefinition),e);Qs.default=w3});var tm=v((qa,LE)=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var Zs=ef(),S3=qE(),Zp=Z(),jE=new Zp.Name("fullFormats"),b3=new Zp.Name("fastFormats"),em=(e,t={keywords:!0})=>{if(Array.isArray(t))return DE(e,t,Zs.fullFormats,jE),e;let[r,n]=t.mode==="fast"?[Zs.fastFormats,b3]:[Zs.fullFormats,jE],i=t.formats||Zs.formatNames;return DE(e,i,r,n),t.keywords&&S3.default(e),e};em.get=(e,t="full")=>{let n=(t==="fast"?Zs.fastFormats:Zs.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n};function DE(e,t,r,n){var i,s;(i=(s=e.opts.code).formats)!==null&&i!==void 0||(s.formats=Zp._`require("ajv-formats/dist/formats").${n}`);for(let o of t)e.addFormat(o,r[o])}LE.exports=qa=em;Object.defineProperty(qa,"__esModule",{value:!0});qa.default=em});var rm=v((XZ,FE)=>{"use strict";var E3=Wl(),R3=Jp(),P3=tm(),T3=ia()({proto:!0}),ja=class{constructor(t){this.ajv=new E3({...t,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:R3}),P3(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=t||{}}addSchema(t,r){let n=t.$id||r;if(t.$id!==void 0&&t.$id[0]==="#"&&(n=r+t.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let i=T3(t);this.convertSchemaToAjvFormat(i),this.ajv.addSchema(i,n),this._ajvSchemas[n]=t}}validate(t,r){return this.ajv.validate(t,r)}convertSchemaToAjvFormat(t){if(t!==null){t.type==="string"?(t.fjs_type="string",t.type=["string","object"]):Array.isArray(t.type)&&t.type.includes("string")&&!t.type.includes("object")&&(t.fjs_type="string",t.type.push("object"));for(let r in t)typeof t[r]=="object"&&this.convertSchemaToAjvFormat(t[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(t){let r=new ja(t.ajvOptions);for(let[n,i]of Object.entries(t.ajvSchemas))r.ajv.addSchema(i,n);return r}};FE.exports=ja});var im=v((QZ,nm)=>{"use strict";function O3(e,t,r,n){let i="";return t.validatorSchemasIds.size>0?(i+=`const validatorState = ${JSON.stringify(n.getState())}
`,i+=`const validator = Validator.restoreFromState(validatorState)
`):i+=`const validator = null
`,`
  'use strict'
  const { dependencies } = require('fast-json-stringify/lib/standalone')

  const { Serializer, Validator } = dependencies

  const serializerState = ${JSON.stringify(r.getState())}
  const serializer = Serializer.restoreFromState(serializerState)

  ${i}

  module.exports = ${e.toString()}(validator, serializer)`}nm.exports=O3;nm.exports.dependencies={Serializer:cd(),Validator:rm()}});var ME=v((eee,zE)=>{"use strict";var{dependencies:A3}=im(),{Serializer:$3,Validator:ZZ}=A3,C3={mode:"standalone"},I3=$3.restoreFromState(C3),N3=null;zE.exports=function(t,r){function n(s){let o=s&&typeof s.toJSON=="function"?s.toJSON():s,a="{",u=!1;return o.statusCode!==void 0&&(!u&&(u=!0)||(a+=","),a+='"statusCode":',a+=r.asNumber(o.statusCode)),o.code!==void 0&&(!u&&(u=!0)||(a+=","),a+='"code":',a+=r.asString(o.code)),o.error!==void 0&&(!u&&(u=!0)||(a+=","),a+='"error":',a+=r.asString(o.error)),o.message!==void 0&&(!u&&(u=!0)||(a+=","),a+='"message":',a+=r.asString(o.message)),a+"}"}return n}(N3,I3)});var Da=v((tee,BE)=>{"use strict";var HE=require("http").STATUS_CODES,k3=ch(),{kReplyHeaders:eo,kReplyNextErrorHandler:rf,kReplyIsRunningOnErrorHook:x3,kReplyHasStatusCode:q3,kRouteContext:UE}=Et(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:j3,FST_ERR_FAILED_ERROR_SERIALIZATION:D3}=zt(),{getSchemaSerializer:L3}=sa(),sm=ME(),F3={func:M3,toJSON(){return this.func.name.toString()+"()"}};function z3(e,t,r){e[x3]=!1;let n=e[UE];if(e[rf]===!1){VE(t,e,function(a,u){try{a.raw.writeHead(a.raw.statusCode,a[eo])}catch(l){a.log.warn({req:a.request,res:a,err:l},l&&l.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(u)});return}let i=e[rf]||n.errorHandler;e[rf]=Object.getPrototypeOf(i),delete e[eo]["content-type"],delete e[eo]["content-length"];let s=i.func;if(!s){e[rf]=!1,VE(t,e,r);return}let o=s(t,e.request,e);o!==void 0&&(o!==null&&typeof o.then=="function"?k3(o,e):e.send(o))}function M3(e,t,r){if(V3(e,r),!r[q3]||r.statusCode===200){let n=e.statusCode||e.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:e},e&&e.message):r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)}function VE(e,t,r){let n=t.raw,i=t.statusCode,s;try{let o=L3(t[UE],i,t[eo]["content-type"]);s=o===!1?sm({error:HE[i+""],code:e.code,message:e.message,statusCode:i}):o(Object.create(e,{error:{value:HE[i+""]},message:{value:e.message},statusCode:{value:i}}))}catch(o){t.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),t.code(500),s=sm(new D3(o.message,e.message))}typeof s!="string"&&!Buffer.isBuffer(s)&&(s=sm(new j3(typeof s))),t[eo]["content-type"]="application/json; charset=utf-8",t[eo]["content-length"]=""+Buffer.byteLength(s),r(t,s)}function H3(e=F3,t){if(!t)return e;let r=Object.create(e);return r.func=t,r}function V3(e,t){let r=t.raw,n=r.statusCode;n=n>=400?n:500,e!=null&&(e.headers!==void 0&&t.headers(e.headers),e.status>=400?n=e.status:e.statusCode>=400&&(n=e.statusCode)),r.statusCode=n}BE.exports={buildErrorHandler:H3,handleError:z3}});var uf=v((ree,af)=>{"use strict";var um=require("stream").finished,{kFourOhFourContext:GE,kReplyErrorHandlerCalled:eR,kReplyHijacked:La,kReplyStartTime:Fa,kReplyEndTime:cm,kReplySerializer:Fn,kReplySerializerDefault:nf,kReplyIsError:sf,kReplyHeaders:qe,kReplyTrailers:Rt,kReplyHasStatusCode:hm,kReplyIsRunningOnErrorHook:dm,kReplyNextErrorHandler:U3,kDisableRequestLogging:tR,kSchemaResponse:of,kReplyCacheSerializeFns:_i,kSchemaController:om,kOptions:B3,kRouteContext:ce}=Et(),{onSendHookRunner:pm,onResponseHookRunner:G3,onPreHandlerHookRunner:K3}=zi(),KE=mh()[Symbol.for("internals")],J3=na(),lm=J3.now,{handleError:JE}=Da(),{getSchemaSerializer:Y3}=sa(),am={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:W3,FST_ERR_REP_ALREADY_SENT:rR,FST_ERR_REP_SENT_VALUE:X3,FST_ERR_SEND_INSIDE_ONERR:Q3,FST_ERR_BAD_STATUS_CODE:Z3,FST_ERR_BAD_TRAILER_NAME:eU,FST_ERR_BAD_TRAILER_VALUE:tU,FST_ERR_MISSING_SERIALIZATION_FN:rU,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:nU}=zt(),nR=ii();function xe(e,t,r){this.raw=e,this[Fn]=null,this[eR]=!1,this[sf]=!1,this[dm]=!1,this.request=t,this[qe]={},this[Rt]=null,this[hm]=!1,this[Fa]=void 0,this.log=r}xe.props=[];Object.defineProperties(xe.prototype,{[ce]:{get(){return this.request[ce]}},context:{get(){return this.request[ce]}},server:{get(){return this.request[ce].server}},sent:{enumerable:!0,get(){return(this[La]||this.raw.writableEnded)===!0},set(e){if(nR.emit("FSTDEP010"),e!==!0)throw new X3;if(this.sent&&this[La])throw new rR(this.request.url,this.request.method);this[La]=!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}}});xe.prototype.hijack=function(){return this[La]=!0,this};xe.prototype.send=function(e){if(this[dm]===!0)throw new Q3;if(this.sent)return this.log.warn({err:new rR(this.request.url,this.request.method)}),this;if(e instanceof Error||this[sf]===!0)return this[sf]=!1,za(this,e,ts),this;if(e===void 0)return ts(this,e),this;let t=this.getHeader("content-type"),r=t!==void 0;if(e!==null){if(typeof e.pipe=="function")return ts(this,e),this;if((e==null?void 0:e.buffer)instanceof ArrayBuffer){r===!1&&(this[qe]["content-type"]=am.OCTET);let n=Buffer.isBuffer(e)?e:Buffer.from(e.buffer);return ts(this,n),this}if(r===!1&&typeof e=="string")return this[qe]["content-type"]=am.PLAIN,ts(this,e),this}if(this[Fn]!==null){if(typeof e!="string")return YE(this,e),this;e=this[Fn](e)}else if(r===!1||t.indexOf("json")>-1){if(r===!1)this[qe]["content-type"]=am.JSON;else if(t.indexOf("charset")===-1){let n=t.trim();n.endsWith(";")?this[qe]["content-type"]=`${n} charset=utf-8`:this[qe]["content-type"]=`${n}; charset=utf-8`}if(typeof e!="string")return YE(this,e),this}return ts(this,e),this};xe.prototype.getHeader=function(e){e=e.toLowerCase();let t=this.raw,r=this[qe][e];return r===void 0&&t.hasHeader(e)&&(r=t.getHeader(e)),r};xe.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[qe]}};xe.prototype.hasHeader=function(e){return e=e.toLowerCase(),this[qe][e]!==void 0||this.raw.hasHeader(e)};xe.prototype.removeHeader=function(e){return delete this[qe][e.toLowerCase()],this};xe.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[qe][e]&&e==="set-cookie"?(typeof this[qe][e]=="string"&&(this[qe][e]=[this[qe][e]]),Array.isArray(t)?this[qe][e].push(...t):this[qe][e].push(t)):this[qe][e]=t,this};xe.prototype.headers=function(e){let t=Object.keys(e);for(var r=0;r!==t.length;++r){let n=t[r];this.header(n,e[n])}return this};var iU=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);xe.prototype.trailer=function(e,t){if(e=e.toLowerCase(),iU.has(e))throw new eU(e);if(typeof t!="function")throw new tU(e,typeof t);return this[Rt]===null&&(this[Rt]={}),this[Rt][e]=t,this};xe.prototype.hasTrailer=function(e){var t;return((t=this[Rt])==null?void 0:t[e.toLowerCase()])!==void 0};xe.prototype.removeTrailer=function(e){return this[Rt]===null?this:(this[Rt][e.toLowerCase()]=void 0,this)};xe.prototype.code=function(e){let t=Number(e);if(isNaN(t)||t<100||t>599)throw new Z3(e||String(e));return this.raw.statusCode=t,this[hm]=!0,this};xe.prototype.status=xe.prototype.code;xe.prototype.getSerializationFunction=function(e,t){var n,i,s,o;let r;return typeof e=="string"||typeof e=="number"?typeof t=="string"?r=(i=(n=this[ce][of])==null?void 0:n[e])==null?void 0:i[t]:r=(s=this[ce][of])==null?void 0:s[e]:typeof e=="object"&&(r=(o=this[ce][_i])==null?void 0:o.get(e)),r};xe.prototype.compileSerializationSchema=function(e,t=null,r=null){var u;let{request:n}=this,{method:i,url:s}=n;if((u=this[ce][_i])!=null&&u.has(e))return this[ce][_i].get(e);let a=(this[ce].serializerCompiler||this.server[om].serializerCompiler||this.server[om].setupSerializer(this.server[B3])||this.server[om].serializerCompiler)({schema:e,method:i,url:s,httpStatus:t,contentType:r});return this[ce][_i]==null&&(this[ce][_i]=new WeakMap),this[ce][_i].set(e,a),a};xe.prototype.serializeInput=function(e,t,r,n){var o,a,u,l;let i=r,s;if(r=typeof t=="string"||typeof t=="number"?t:r,n=r&&i!==r?i:n,r!=null){if(n!=null?s=(a=(o=this[ce][of])==null?void 0:o[r])==null?void 0:a[n]:s=(u=this[ce][of])==null?void 0:u[r],s==null)throw n?new nU(r,n):new rU(r)}else(l=this[ce][_i])!=null&&l.has(t)?s=this[ce][_i].get(t):s=this.compileSerializationSchema(t,r,n);return s(e)};xe.prototype.serialize=function(e){return this[Fn]!==null?this[Fn](e):this[ce]&&this[ce][nf]?this[ce][nf](e,this.raw.statusCode):sR(this[ce],e,this.raw.statusCode)};xe.prototype.serializer=function(e){return this[Fn]=e,this};xe.prototype.type=function(e){return this[qe]["content-type"]=e,this};xe.prototype.redirect=function(e,t){return typeof e=="string"&&(t=e,e=this[hm]?this.raw.statusCode:302),this.header("location",t).code(e).send()};xe.prototype.callNotFound=function(){return cU(this),this};xe.prototype.getResponseTime=function(){let e=0;return this[Fa]!==void 0&&(e=(this[cm]||lm())-this[Fa]),e};xe.prototype.then=function(e,t){if(this.sent){e();return}um(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?t?t(r):this.log&&this.log.warn("unhandled rejection on reply.then"):e()})};function YE(e,t){e[ce].preSerialization!==null?pm(e[ce].preSerialization,e.request,e,t,WE):WE(null,e.request,e,t)}function WE(e,t,r,n){if(e!=null){za(r,e);return}try{r[Fn]!==null?n=r[Fn](n):r[ce]&&r[ce][nf]?n=r[ce][nf](n,r.raw.statusCode):n=sR(r[ce],n,r.raw.statusCode,r[qe]["content-type"])}catch(i){sU(i,r),za(r,i);return}ts(r,n)}function sU(e,t){e.serialization=t[ce].config}function ts(e,t){e[ce].onSend!==null?pm(e[ce].onSend,e.request,e,t,oU):iR(e,t)}function oU(e,t,r,n){e!=null?za(r,e):iR(r,n)}function XE(e,t){let r=e.raw;try{r.writeHead(t,e[qe])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&e.log.warn(`Reply was already sent, did you forget to "return reply" in the "${e.request.raw.url}" (${e.request.raw.method}) route?`),n}}function iR(e,t){let r=e.raw,n=e.request,i=r.statusCode;if(e[Rt]!==null){let s=Object.keys(e[Rt]),o="";for(let a of s)typeof e[Rt][a]=="function"&&(o+=" ",o+=a);e.header("Transfer-Encoding","chunked"),e.header("Trailer",o.trim())}if(t==null){i>=200&&i!==204&&i!==304&&n.method!=="HEAD"&&e[Rt]===null&&(e[qe]["content-length"]="0"),XE(e,i),fm(t,r,e);return}if(typeof t.pipe=="function"){aU(t,r,e);return}if(typeof t!="string"&&!Buffer.isBuffer(t))throw new W3(typeof t);if(e[Rt]===null){let s=e[qe]["content-length"];(!s||n.raw.method!=="HEAD"&&Number(s)!==Buffer.byteLength(t))&&(e[qe]["content-length"]=""+Buffer.byteLength(t))}XE(e,i),r.write(t),fm(t,r,e)}function QE(e,t,r){t.code==="ERR_STREAM_PREMATURE_CLOSE"?e[tR]||e.info({res:r},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function aU(e,t,r){let n=!0,i=!1;if(uU(e,t,r),um(e,{readable:!0,writable:!1},function(s){n=!1,s!=null&&(t.headersSent||r.request.raw.aborted===!0?(i||(i=!0,QE(r.log,s,t)),t.destroy()):za(r,s))}),um(t,function(s){n&&(s!=null&&t.headersSent&&!i&&(i=!0,QE(r.log,s,t)),typeof e.destroy=="function"?e.destroy():typeof e.close=="function"?e.close(hU):typeof e.abort=="function"?e.abort():r.log.warn("stream payload does not end properly"))}),t.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let s in r[qe])t.setHeader(s,r[qe][s]);e.pipe(t)}function fm(e,t,r){if(r[Rt]===null){t.end(null,null,null);return}let n=Object.keys(r[Rt]),i={},s=0,o=!0;function a(){s===0&&(t.addTrailers(i),t.end(null,null,null))}for(let u of n){let l=function(c,h){s++,c?r.log.debug(c):i[u]=h,process.nextTick(a)};if(typeof r[Rt][u]!="function")continue;o=!1,s--;let f=r[Rt][u](r,e,l);typeof f=="object"&&typeof f.then=="function"?f.then(c=>l(null,c),l):f!=null&&(nR.emit("FSTDEP013"),l(null,f))}o&&t.end(null,null,null)}function uU(e,t,r){r[Rt]!==null&&e.on("end",()=>fm(null,t,r))}function za(e,t,r){e[ce].onError!==null&&!e[U3]?(e[dm]=!0,pm(e[ce].onError,e.request,e,t,()=>JE(e,t,r))):JE(e,t,r)}function lU(e){e[Fa]=lm();let t=r=>{e[cm]=lm(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);let n=e[ce];n&&n.onResponse!==null?G3(n.onResponse,e.request,e,ZE):ZE(r,e.request,e)};e.raw.on("finish",t),e.raw.on("error",t)}function ZE(e,t,r){if(r.log[tR])return;let n=r.getResponseTime();if(e!=null){r.log.error({res:r,err:e,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function fU(e){let t=[...e.props];function r(n,i,s){this.raw=n,this[sf]=!1,this[eR]=!1,this[La]=!1,this[Fn]=null,this.request=i,this[qe]={},this[Rt]=null,this[Fa]=void 0,this[cm]=void 0,this.log=s;for(var o,a=0;a<t.length;a++)o=t[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.parent=e,r.props=t,r}function cU(e){if(e[ce][GE]===null){e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),e.code(404).send("404 Not Found");return}e.request[ce]=e[ce][GE],e[ce].preHandler!==null?K3(e[ce].preHandler,e.request,e,KE.preHandlerCallback):KE.preHandlerCallback(null,e.request,e)}function sR(e,t,r,n){let i=Y3(e,r,n);return i?i(t):JSON.stringify(t)}function hU(){}af.exports=xe;af.exports.buildReply=fU;af.exports.setupResponseListeners=lU});var aR=v((nee,oR)=>{"use strict";oR.exports=dU;function dU(e){if(!e)throw new TypeError("argument req is required");var t=mU(e.headers["x-forwarded-for"]||""),r=pU(e),n=[r].concat(t);return n}function pU(e){return e.socket?e.socket.remoteAddress:e.connection.remoteAddress}function mU(e){for(var t=e.length,r=[],n=e.length,i=e.length-1;i>=0;i--)switch(e.charCodeAt(i)){case 32:n===t&&(n=t=i);break;case 44:n!==t&&r.push(e.substring(n,t)),n=t=i;break;default:n=i;break}return n!==t&&r.push(e.substring(n,t)),r}});var lR=v((uR,Ma)=>{(function(){var e,t,r,n,i,s,o,a,u;t={},a=this,typeof Ma<"u"&&Ma!==null&&Ma.exports?Ma.exports=t:a.ipaddr=t,o=function(l,f,c,h){var d,p;if(l.length!==f.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(d=0;h>0;){if(p=c-h,p<0&&(p=0),l[d]>>p!==f[d]>>p)return!1;h-=c,d+=1}return!0},t.subnetMatch=function(l,f,c){var h,d,p,y,w;c==null&&(c="unicast");for(p in f)for(y=f[p],y[0]&&!(y[0]instanceof Array)&&(y=[y]),h=0,d=y.length;h<d;h++)if(w=y[h],l.kind()===w[0].kind()&&l.match.apply(l,w))return p;return c},t.IPv4=function(){function l(f){var c,h,d;if(f.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(c=0,h=f.length;c<h;c++)if(d=f[c],!(0<=d&&d<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=f}return l.prototype.kind=function(){return"ipv4"},l.prototype.toString=function(){return this.octets.join(".")},l.prototype.toNormalizedString=function(){return this.toString()},l.prototype.toByteArray=function(){return this.octets.slice(0)},l.prototype.match=function(f,c){var h;if(c===void 0&&(h=f,f=h[0],c=h[1]),f.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,f.octets,8,c)},l.prototype.SpecialRanges={unspecified:[[new l([0,0,0,0]),8]],broadcast:[[new l([255,255,255,255]),32]],multicast:[[new l([224,0,0,0]),4]],linkLocal:[[new l([169,254,0,0]),16]],loopback:[[new l([127,0,0,0]),8]],carrierGradeNat:[[new l([100,64,0,0]),10]],private:[[new l([10,0,0,0]),8],[new l([172,16,0,0]),12],[new l([192,168,0,0]),16]],reserved:[[new l([192,0,0,0]),24],[new l([192,0,2,0]),24],[new l([192,88,99,0]),24],[new l([198,51,100,0]),24],[new l([203,0,113,0]),24],[new l([240,0,0,0]),4]]},l.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},l.prototype.toIPv4MappedAddress=function(){return t.IPv6.parse("::ffff:"+this.toString())},l.prototype.prefixLengthFromSubnetMask=function(){var f,c,h,d,p,y,w;for(w={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},f=0,p=!1,c=h=3;h>=0;c=h+=-1)if(d=this.octets[c],d in w){if(y=w[d],p&&y!==0)return null;y!==8&&(p=!0),f+=y}else return null;return 32-f},l}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},t.IPv4.parser=function(l){var f,c,h,d,p;if(c=function(y){return y[0]==="0"&&y[1]!=="x"?parseInt(y,8):parseInt(y)},f=l.match(n.fourOctet))return function(){var y,w,_,S;for(_=f.slice(1,6),S=[],y=0,w=_.length;y<w;y++)h=_[y],S.push(c(h));return S}();if(f=l.match(n.longValue)){if(p=c(f[1]),p>4294967295||p<0)throw new Error("ipaddr: address outside defined range");return function(){var y,w;for(w=[],d=y=0;y<=24;d=y+=8)w.push(p>>d&255);return w}().reverse()}else return null},t.IPv6=function(){function l(f,c){var h,d,p,y,w,_;if(f.length===16)for(this.parts=[],h=d=0;d<=14;h=d+=2)this.parts.push(f[h]<<8|f[h+1]);else if(f.length===8)this.parts=f;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(_=this.parts,p=0,y=_.length;p<y;p++)if(w=_[p],!(0<=w&&w<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");c&&(this.zoneId=c)}return l.prototype.kind=function(){return"ipv6"},l.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},l.prototype.toRFC5952String=function(){var f,c,h,d,p;for(d=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString(),f=0,c=-1;h=d.exec(p);)h[0].length>c&&(f=h.index,c=h[0].length);return c<0?p:p.substring(0,f)+"::"+p.substring(f+c)},l.prototype.toByteArray=function(){var f,c,h,d,p;for(f=[],p=this.parts,c=0,h=p.length;c<h;c++)d=p[c],f.push(d>>8),f.push(d&255);return f},l.prototype.toNormalizedString=function(){var f,c,h;return f=function(){var d,p,y,w;for(y=this.parts,w=[],d=0,p=y.length;d<p;d++)c=y[d],w.push(c.toString(16));return w}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),f+h},l.prototype.toFixedLengthString=function(){var f,c,h;return f=function(){var d,p,y,w;for(y=this.parts,w=[],d=0,p=y.length;d<p;d++)c=y[d],w.push(c.toString(16).padStart(4,"0"));return w}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),f+h},l.prototype.match=function(f,c){var h;if(c===void 0&&(h=f,f=h[0],c=h[1]),f.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,f.parts,16,c)},l.prototype.SpecialRanges={unspecified:[new l([0,0,0,0,0,0,0,0]),128],linkLocal:[new l([65152,0,0,0,0,0,0,0]),10],multicast:[new l([65280,0,0,0,0,0,0,0]),8],loopback:[new l([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new l([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new l([0,0,0,0,0,65535,0,0]),96],rfc6145:[new l([0,0,0,0,65535,0,0,0]),96],rfc6052:[new l([100,65435,0,0,0,0,0,0]),96],"6to4":[new l([8194,0,0,0,0,0,0,0]),16],teredo:[new l([8193,0,0,0,0,0,0,0]),32],reserved:[[new l([8193,3512,0,0,0,0,0,0]),32]]},l.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},l.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},l.prototype.toIPv4Address=function(){var f,c,h;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return h=this.parts.slice(-2),f=h[0],c=h[1],new t.IPv4([f>>8,f&255,c>>8,c&255])},l.prototype.prefixLengthFromSubnetMask=function(){var f,c,h,d,p,y,w;for(w={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},f=0,p=!1,c=h=7;h>=0;c=h+=-1)if(d=this.parts[c],d in w){if(y=w[d],p&&y!==0)return null;y!==16&&(p=!0),f+=y}else return null;return 128-f},l}(),i="(?:[0-9a-f]+::?)+",u="%[0-9a-z]{1,}",s={zoneIndex:new RegExp(u,"i"),native:new RegExp("^(::)?("+i+")?([0-9a-f]+)?(::)?("+u+")?$","i"),transitional:new RegExp("^((?:"+i+")|(?:::)(?:"+i+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+u+")?$"),"i")},e=function(l,f){var c,h,d,p,y,w;if(l.indexOf("::")!==l.lastIndexOf("::"))return null;for(w=(l.match(s.zoneIndex)||[])[0],w&&(w=w.substring(1),l=l.replace(/%.+$/,"")),c=0,h=-1;(h=l.indexOf(":",h+1))>=0;)c++;if(l.substr(0,2)==="::"&&c--,l.substr(-2,2)==="::"&&c--,c>f)return null;for(y=f-c,p=":";y--;)p+="0:";return l=l.replace("::",p),l[0]===":"&&(l=l.slice(1)),l[l.length-1]===":"&&(l=l.slice(0,-1)),f=function(){var _,S,g,m;for(g=l.split(":"),m=[],_=0,S=g.length;_<S;_++)d=g[_],m.push(parseInt(d,16));return m}(),{parts:f,zoneId:w}},t.IPv6.parser=function(l){var f,c,h,d,p,y,w;if(s.native.test(l))return e(l,8);if((d=l.match(s.transitional))&&(w=d[6]||"",f=e(d[1].slice(0,-1)+w,6),f.parts)){for(y=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])],c=0,h=y.length;c<h;c++)if(p=y[c],!(0<=p&&p<=255))return null;return f.parts.push(y[0]<<8|y[1]),f.parts.push(y[2]<<8|y[3]),{parts:f.parts,zoneId:f.zoneId}}return null},t.IPv4.isIPv4=t.IPv6.isIPv6=function(l){return this.parser(l)!==null},t.IPv4.isValid=function(l){var f;try{return new this(this.parser(l)),!0}catch(c){return f=c,!1}},t.IPv4.isValidFourPartDecimal=function(l){return!!(t.IPv4.isValid(l)&&l.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},t.IPv6.isValid=function(l){var f,c;if(typeof l=="string"&&l.indexOf(":")===-1)return!1;try{return f=this.parser(l),new this(f.parts,f.zoneId),!0}catch(h){return c=h,!1}},t.IPv4.parse=function(l){var f;if(f=this.parser(l),f===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(f)},t.IPv6.parse=function(l){var f;if(f=this.parser(l),f.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(f.parts,f.zoneId)},t.IPv4.parseCIDR=function(l){var f,c,h;if((c=l.match(/^(.+)\/(\d+)$/))&&(f=parseInt(c[2]),f>=0&&f<=32))return h=[this.parse(c[1]),f],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},t.IPv4.subnetMaskFromPrefixLength=function(l){var f,c,h;if(l=parseInt(l),l<0||l>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(h=[0,0,0,0],c=0,f=Math.floor(l/8);c<f;)h[c]=255,c++;return f<4&&(h[f]=Math.pow(2,l%8)-1<<8-l%8),new this(h)},t.IPv4.broadcastAddressFromCIDR=function(l){var f,c,h,d,p,y;try{for(f=this.parseCIDR(l),d=f[0].toByteArray(),y=this.subnetMaskFromPrefixLength(f[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)|parseInt(y[h],10)^255),h++;return new this(p)}catch(w){throw c=w,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv4.networkAddressFromCIDR=function(l){var f,c,h,d,p,y;try{for(f=this.parseCIDR(l),d=f[0].toByteArray(),y=this.subnetMaskFromPrefixLength(f[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)&parseInt(y[h],10)),h++;return new this(p)}catch(w){throw c=w,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv6.parseCIDR=function(l){var f,c,h;if((c=l.match(/^(.+)\/(\d+)$/))&&(f=parseInt(c[2]),f>=0&&f<=128))return h=[this.parse(c[1]),f],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},t.isValid=function(l){return t.IPv6.isValid(l)||t.IPv4.isValid(l)},t.parse=function(l){if(t.IPv6.isValid(l))return t.IPv6.parse(l);if(t.IPv4.isValid(l))return t.IPv4.parse(l);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},t.parseCIDR=function(l){var f;try{return t.IPv6.parseCIDR(l)}catch(c){f=c;try{return t.IPv4.parseCIDR(l)}catch(h){throw f=h,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},t.fromByteArray=function(l){var f;if(f=l.length,f===4)return new t.IPv4(l);if(f===16)return new t.IPv6(l);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},t.process=function(l){var f;return f=this.parse(l),f.kind()==="ipv6"&&f.isIPv4MappedAddress()?f.toIPv4Address():f}}).call(uR)});var pR=v((iee,cf)=>{"use strict";cf.exports=bU;cf.exports.all=hR;cf.exports.compile=dR;var yU=aR(),cR=lR(),gU=/^[0-9]+$/,lf=cR.isValid,ff=cR.parse,fR={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function hR(e,t){var r=yU(e);if(!t)return r;typeof t!="function"&&(t=dR(t));for(var n=0;n<r.length-1;n++)t(r[n],n)||(r.length=n+1);return r}function dR(e){if(!e)throw new TypeError("argument is required");var t;if(typeof e=="string")t=[e];else if(Array.isArray(e))t=e.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<t.length;r++)e=t[r],Object.prototype.hasOwnProperty.call(fR,e)&&(e=fR[e],t.splice.apply(t,[r,1].concat(e)),r+=e.length-1);return _U(vU(t))}function vU(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=wU(e[r]);return t}function _U(e){var t=e.length;return t===0?EU:t===1?PU(e[0]):RU(e)}function wU(e){var t=e.lastIndexOf("/"),r=t!==-1?e.substring(0,t):e;if(!lf(r))throw new TypeError("invalid IP address: "+r);var n=ff(r);t===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var i=n.kind()==="ipv6"?128:32,s=t!==-1?e.substring(t+1,e.length):null;if(s===null?s=i:gU.test(s)?s=parseInt(s,10):n.kind()==="ipv4"&&lf(s)?s=SU(s):s=null,s<=0||s>i)throw new TypeError("invalid range on address: "+e);return[n,s]}function SU(e){var t=ff(e),r=t.kind();return r==="ipv4"?t.prefixLengthFromSubnetMask():null}function bU(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var r=hR(e,t),n=r[r.length-1];return n}function EU(){return!1}function RU(e){return function(r){if(!lf(r))return!1;for(var n=ff(r),i,s=n.kind(),o=0;o<e.length;o++){var a=e[o],u=a[0],l=u.kind(),f=a[1],c=n;if(s!==l){if(l==="ipv4"&&!n.isIPv4MappedAddress())continue;i||(i=l==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),c=i}if(c.match(u,f))return!0}return!1}}function PU(e){var t=e[0],r=t.kind(),n=r==="ipv4",i=e[1];return function(o){if(!lf(o))return!1;var a=ff(o),u=a.kind();if(u!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(t,i)}}});var Ha=v((see,mR)=>{var TU="2.0.0",OU=Number.MAX_SAFE_INTEGER||9007199254740991,AU=16,$U=256-6,CU=["major","premajor","minor","preminor","patch","prepatch","prerelease"];mR.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:AU,MAX_SAFE_BUILD_LENGTH:$U,MAX_SAFE_INTEGER:OU,RELEASE_TYPES:CU,SEMVER_SPEC_VERSION:TU,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Va=v((oee,yR)=>{var IU=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};yR.exports=IU});var to=v((zn,gR)=>{var{MAX_SAFE_COMPONENT_LENGTH:mm,MAX_SAFE_BUILD_LENGTH:NU,MAX_LENGTH:kU}=Ha(),xU=Va();zn=gR.exports={};var qU=zn.re=[],jU=zn.safeRe=[],G=zn.src=[],K=zn.t={},DU=0,ym="[a-zA-Z0-9-]",LU=[["\\s",1],["\\d",kU],[ym,NU]],FU=e=>{for(let[t,r]of LU)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},ae=(e,t,r)=>{let n=FU(t),i=DU++;xU(e,i,t),K[e]=i,G[i]=t,qU[i]=new RegExp(t,r?"g":void 0),jU[i]=new RegExp(n,r?"g":void 0)};ae("NUMERICIDENTIFIER","0|[1-9]\\d*");ae("NUMERICIDENTIFIERLOOSE","\\d+");ae("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ym}*`);ae("MAINVERSION",`(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})`);ae("MAINVERSIONLOOSE",`(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})`);ae("PRERELEASEIDENTIFIER",`(?:${G[K.NUMERICIDENTIFIER]}|${G[K.NONNUMERICIDENTIFIER]})`);ae("PRERELEASEIDENTIFIERLOOSE",`(?:${G[K.NUMERICIDENTIFIERLOOSE]}|${G[K.NONNUMERICIDENTIFIER]})`);ae("PRERELEASE",`(?:-(${G[K.PRERELEASEIDENTIFIER]}(?:\\.${G[K.PRERELEASEIDENTIFIER]})*))`);ae("PRERELEASELOOSE",`(?:-?(${G[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[K.PRERELEASEIDENTIFIERLOOSE]})*))`);ae("BUILDIDENTIFIER",`${ym}+`);ae("BUILD",`(?:\\+(${G[K.BUILDIDENTIFIER]}(?:\\.${G[K.BUILDIDENTIFIER]})*))`);ae("FULLPLAIN",`v?${G[K.MAINVERSION]}${G[K.PRERELEASE]}?${G[K.BUILD]}?`);ae("FULL",`^${G[K.FULLPLAIN]}$`);ae("LOOSEPLAIN",`[v=\\s]*${G[K.MAINVERSIONLOOSE]}${G[K.PRERELEASELOOSE]}?${G[K.BUILD]}?`);ae("LOOSE",`^${G[K.LOOSEPLAIN]}$`);ae("GTLT","((?:<|>)?=?)");ae("XRANGEIDENTIFIERLOOSE",`${G[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ae("XRANGEIDENTIFIER",`${G[K.NUMERICIDENTIFIER]}|x|X|\\*`);ae("XRANGEPLAIN",`[v=\\s]*(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:${G[K.PRERELEASE]})?${G[K.BUILD]}?)?)?`);ae("XRANGEPLAINLOOSE",`[v=\\s]*(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:${G[K.PRERELEASELOOSE]})?${G[K.BUILD]}?)?)?`);ae("XRANGE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAIN]}$`);ae("XRANGELOOSE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAINLOOSE]}$`);ae("COERCE",`(^|[^\\d])(\\d{1,${mm}})(?:\\.(\\d{1,${mm}}))?(?:\\.(\\d{1,${mm}}))?(?:$|[^\\d])`);ae("COERCERTL",G[K.COERCE],!0);ae("LONETILDE","(?:~>?)");ae("TILDETRIM",`(\\s*)${G[K.LONETILDE]}\\s+`,!0);zn.tildeTrimReplace="$1~";ae("TILDE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAIN]}$`);ae("TILDELOOSE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAINLOOSE]}$`);ae("LONECARET","(?:\\^)");ae("CARETTRIM",`(\\s*)${G[K.LONECARET]}\\s+`,!0);zn.caretTrimReplace="$1^";ae("CARET",`^${G[K.LONECARET]}${G[K.XRANGEPLAIN]}$`);ae("CARETLOOSE",`^${G[K.LONECARET]}${G[K.XRANGEPLAINLOOSE]}$`);ae("COMPARATORLOOSE",`^${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]})$|^$`);ae("COMPARATOR",`^${G[K.GTLT]}\\s*(${G[K.FULLPLAIN]})$|^$`);ae("COMPARATORTRIM",`(\\s*)${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]}|${G[K.XRANGEPLAIN]})`,!0);zn.comparatorTrimReplace="$1$2$3";ae("HYPHENRANGE",`^\\s*(${G[K.XRANGEPLAIN]})\\s+-\\s+(${G[K.XRANGEPLAIN]})\\s*$`);ae("HYPHENRANGELOOSE",`^\\s*(${G[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[K.XRANGEPLAINLOOSE]})\\s*$`);ae("STAR","(<|>)?=?\\s*\\*");ae("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ae("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var hf=v((aee,vR)=>{var zU=Object.freeze({loose:!0}),MU=Object.freeze({}),HU=e=>e?typeof e!="object"?zU:e:MU;vR.exports=HU});var gm=v((uee,SR)=>{var _R=/^[0-9]+$/,wR=(e,t)=>{let r=_R.test(e),n=_R.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},VU=(e,t)=>wR(t,e);SR.exports={compareIdentifiers:wR,rcompareIdentifiers:VU}});var Ut=v((lee,PR)=>{var df=Va(),{MAX_LENGTH:bR,MAX_SAFE_INTEGER:pf}=Ha(),{safeRe:ER,t:RR}=to(),UU=hf(),{compareIdentifiers:ro}=gm(),_r=class{constructor(t,r){if(r=UU(r),t instanceof _r){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>bR)throw new TypeError(`version is longer than ${bR} characters`);df("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?ER[RR.LOOSE]:ER[RR.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>pf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>pf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>pf||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<pf)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(df("SemVer.compare",this.version,this.options,t),!(t instanceof _r)){if(typeof t=="string"&&t===this.version)return 0;t=new _r(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _r||(t=new _r(t,this.options)),ro(this.major,t.major)||ro(this.minor,t.minor)||ro(this.patch,t.patch)}comparePre(t){if(t instanceof _r||(t=new _r(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(df("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ro(n,i)}while(++r)}compareBuild(t){t instanceof _r||(t=new _r(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(df("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return ro(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),ro(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};PR.exports=_r});var rs=v((fee,OR)=>{var TR=Ut(),BU=(e,t,r=!1)=>{if(e instanceof TR)return e;try{return new TR(e,t)}catch(n){if(!r)return null;throw n}};OR.exports=BU});var $R=v((cee,AR)=>{var GU=rs(),KU=(e,t)=>{let r=GU(e,t);return r?r.version:null};AR.exports=KU});var IR=v((hee,CR)=>{var JU=rs(),YU=(e,t)=>{let r=JU(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};CR.exports=YU});var xR=v((dee,kR)=>{var NR=Ut(),WU=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new NR(e instanceof NR?e.version:e,r).inc(t,n,i).version}catch{return null}};kR.exports=WU});var DR=v((pee,jR)=>{var qR=rs(),XU=(e,t)=>{let r=qR(e,null,!0),n=qR(t,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let f=u?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};jR.exports=XU});var FR=v((mee,LR)=>{var QU=Ut(),ZU=(e,t)=>new QU(e,t).major;LR.exports=ZU});var MR=v((yee,zR)=>{var e4=Ut(),t4=(e,t)=>new e4(e,t).minor;zR.exports=t4});var VR=v((gee,HR)=>{var r4=Ut(),n4=(e,t)=>new r4(e,t).patch;HR.exports=n4});var BR=v((vee,UR)=>{var i4=rs(),s4=(e,t)=>{let r=i4(e,t);return r&&r.prerelease.length?r.prerelease:null};UR.exports=s4});var jr=v((_ee,KR)=>{var GR=Ut(),o4=(e,t,r)=>new GR(e,r).compare(new GR(t,r));KR.exports=o4});var YR=v((wee,JR)=>{var a4=jr(),u4=(e,t,r)=>a4(t,e,r);JR.exports=u4});var XR=v((See,WR)=>{var l4=jr(),f4=(e,t)=>l4(e,t,!0);WR.exports=f4});var mf=v((bee,ZR)=>{var QR=Ut(),c4=(e,t,r)=>{let n=new QR(e,r),i=new QR(t,r);return n.compare(i)||n.compareBuild(i)};ZR.exports=c4});var tP=v((Eee,eP)=>{var h4=mf(),d4=(e,t)=>e.sort((r,n)=>h4(r,n,t));eP.exports=d4});var nP=v((Ree,rP)=>{var p4=mf(),m4=(e,t)=>e.sort((r,n)=>p4(n,r,t));rP.exports=m4});var Ua=v((Pee,iP)=>{var y4=jr(),g4=(e,t,r)=>y4(e,t,r)>0;iP.exports=g4});var yf=v((Tee,sP)=>{var v4=jr(),_4=(e,t,r)=>v4(e,t,r)<0;sP.exports=_4});var vm=v((Oee,oP)=>{var w4=jr(),S4=(e,t,r)=>w4(e,t,r)===0;oP.exports=S4});var _m=v((Aee,aP)=>{var b4=jr(),E4=(e,t,r)=>b4(e,t,r)!==0;aP.exports=E4});var gf=v(($ee,uP)=>{var R4=jr(),P4=(e,t,r)=>R4(e,t,r)>=0;uP.exports=P4});var vf=v((Cee,lP)=>{var T4=jr(),O4=(e,t,r)=>T4(e,t,r)<=0;lP.exports=O4});var wm=v((Iee,fP)=>{var A4=vm(),$4=_m(),C4=Ua(),I4=gf(),N4=yf(),k4=vf(),x4=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return A4(e,r,n);case"!=":return $4(e,r,n);case">":return C4(e,r,n);case">=":return I4(e,r,n);case"<":return N4(e,r,n);case"<=":return k4(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};fP.exports=x4});var hP=v((Nee,cP)=>{var q4=Ut(),j4=rs(),{safeRe:_f,t:wf}=to(),D4=(e,t)=>{if(e instanceof q4)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(_f[wf.COERCE]);else{let n;for(;(n=_f[wf.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),_f[wf.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;_f[wf.COERCERTL].lastIndex=-1}return r===null?null:j4(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};cP.exports=D4});var pP=v((kee,dP)=>{"use strict";dP.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var yP=v((xee,mP)=>{"use strict";mP.exports=Ee;Ee.Node=ns;Ee.create=Ee;function Ee(e){var t=this;if(t instanceof Ee||(t=new Ee),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Ee.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Ee.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Ee.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Ee.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)F4(this,arguments[e]);return this.length};Ee.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)z4(this,arguments[e]);return this.length};Ee.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Ee.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Ee.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Ee.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Ee.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Ee.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Ee.prototype.map=function(e,t){t=t||this;for(var r=new Ee,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Ee.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Ee,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Ee.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};Ee.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};Ee.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Ee.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Ee.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ee;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};Ee.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ee;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};Ee.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var s=[],n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=L4(this,i,r[n]);return s};Ee.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function L4(e,t,r){var n=t===e.head?new ns(r,null,t,e):new ns(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function F4(e,t){e.tail=new ns(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function z4(e,t){e.head=new ns(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ns(e,t,r,n){if(!(this instanceof ns))return new ns(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{pP()(Ee)}catch{}});var SP=v((qee,wP)=>{"use strict";var M4=yP(),is=Symbol("max"),Hn=Symbol("length"),no=Symbol("lengthCalculator"),Ga=Symbol("allowStale"),ss=Symbol("maxAge"),Mn=Symbol("dispose"),gP=Symbol("noDisposeOnSet"),Pt=Symbol("lruList"),Xr=Symbol("cache"),_P=Symbol("updateAgeOnGet"),Sm=()=>1,Em=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[is]=t.max||1/0,n=t.length||Sm;if(this[no]=typeof n!="function"?Sm:n,this[Ga]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ss]=t.maxAge||0,this[Mn]=t.dispose,this[gP]=t.noDisposeOnSet||!1,this[_P]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[is]=t||1/0,Ba(this)}get max(){return this[is]}set allowStale(t){this[Ga]=!!t}get allowStale(){return this[Ga]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ss]=t,Ba(this)}get maxAge(){return this[ss]}set lengthCalculator(t){typeof t!="function"&&(t=Sm),t!==this[no]&&(this[no]=t,this[Hn]=0,this[Pt].forEach(r=>{r.length=this[no](r.value,r.key),this[Hn]+=r.length})),Ba(this)}get lengthCalculator(){return this[no]}get length(){return this[Hn]}get itemCount(){return this[Pt].length}rforEach(t,r){r=r||this;for(let n=this[Pt].tail;n!==null;){let i=n.prev;vP(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Pt].head;n!==null;){let i=n.next;vP(this,t,n,r),n=i}}keys(){return this[Pt].toArray().map(t=>t.key)}values(){return this[Pt].toArray().map(t=>t.value)}reset(){this[Mn]&&this[Pt]&&this[Pt].length&&this[Pt].forEach(t=>this[Mn](t.key,t.value)),this[Xr]=new Map,this[Pt]=new M4,this[Hn]=0}dump(){return this[Pt].map(t=>Sf(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Pt]}set(t,r,n){if(n=n||this[ss],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[no](r,t);if(this[Xr].has(t)){if(s>this[is])return io(this,this[Xr].get(t)),!1;let u=this[Xr].get(t).value;return this[Mn]&&(this[gP]||this[Mn](t,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Hn]+=s-u.length,u.length=s,this.get(t),Ba(this),!0}let o=new Rm(t,r,s,i,n);return o.length>this[is]?(this[Mn]&&this[Mn](t,r),!1):(this[Hn]+=o.length,this[Pt].unshift(o),this[Xr].set(t,this[Pt].head),Ba(this),!0)}has(t){if(!this[Xr].has(t))return!1;let r=this[Xr].get(t).value;return!Sf(this,r)}get(t){return bm(this,t,!0)}peek(t){return bm(this,t,!1)}pop(){let t=this[Pt].tail;return t?(io(this,t),t.value):null}del(t){io(this,this[Xr].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let i=t[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Xr].forEach((t,r)=>bm(this,r,!1))}},bm=(e,t,r)=>{let n=e[Xr].get(t);if(n){let i=n.value;if(Sf(e,i)){if(io(e,n),!e[Ga])return}else r&&(e[_P]&&(n.value.now=Date.now()),e[Pt].unshiftNode(n));return i.value}},Sf=(e,t)=>{if(!t||!t.maxAge&&!e[ss])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ss]&&r>e[ss]},Ba=e=>{if(e[Hn]>e[is])for(let t=e[Pt].tail;e[Hn]>e[is]&&t!==null;){let r=t.prev;io(e,t),t=r}},io=(e,t)=>{if(t){let r=t.value;e[Mn]&&e[Mn](r.key,r.value),e[Hn]-=r.length,e[Xr].delete(r.key),e[Pt].removeNode(t)}},Rm=class{constructor(t,r,n,i,s){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},vP=(e,t,r,n)=>{let i=r.value;Sf(e,i)&&(io(e,r),e[Ga]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};wP.exports=Em});var Dr=v((jee,PP)=>{var os=class{constructor(t,r){if(r=V4(r),t instanceof os)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new os(t.raw,r);if(t instanceof Pm)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!EP(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&W4(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&J4)|(this.options.loose&&Y4))+":"+t,i=bP.get(n);if(i)return i;let s=this.options.loose,o=s?cr[Qt.HYPHENRANGELOOSE]:cr[Qt.HYPHENRANGE];t=t.replace(o,o5(this.options.includePrerelease)),Me("hyphen replace",t),t=t.replace(cr[Qt.COMPARATORTRIM],B4),Me("comparator trim",t),t=t.replace(cr[Qt.TILDETRIM],G4),Me("tilde trim",t),t=t.replace(cr[Qt.CARETTRIM],K4),Me("caret trim",t);let a=t.split(" ").map(c=>X4(c,this.options)).join(" ").split(/\s+/).map(c=>s5(c,this.options));s&&(a=a.filter(c=>(Me("loose invalid filter",c,this.options),!!c.match(cr[Qt.COMPARATORLOOSE])))),Me("range list",a);let u=new Map,l=a.map(c=>new Pm(c,this.options));for(let c of l){if(EP(c))return[c];u.set(c.value,c)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return bP.set(n,f),f}intersects(t,r){if(!(t instanceof os))throw new TypeError("a Range is required");return this.set.some(n=>RP(n,r)&&t.set.some(i=>RP(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new U4(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(a5(this.set[r],t,this.options))return!0;return!1}};PP.exports=os;var H4=SP(),bP=new H4({max:1e3}),V4=hf(),Pm=Ka(),Me=Va(),U4=Ut(),{safeRe:cr,t:Qt,comparatorTrimReplace:B4,tildeTrimReplace:G4,caretTrimReplace:K4}=to(),{FLAG_INCLUDE_PRERELEASE:J4,FLAG_LOOSE:Y4}=Ha(),EP=e=>e.value==="<0.0.0-0",W4=e=>e.value==="",RP=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,t)),i=n.pop();return r},X4=(e,t)=>(Me("comp",e,t),e=e5(e,t),Me("caret",e),e=Q4(e,t),Me("tildes",e),e=r5(e,t),Me("xrange",e),e=i5(e,t),Me("stars",e),e),Zt=e=>!e||e.toLowerCase()==="x"||e==="*",Q4=(e,t)=>e.trim().split(/\s+/).map(r=>Z4(r,t)).join(" "),Z4=(e,t)=>{let r=t.loose?cr[Qt.TILDELOOSE]:cr[Qt.TILDE];return e.replace(r,(n,i,s,o,a)=>{Me("tilde",e,n,i,s,o,a);let u;return Zt(i)?u="":Zt(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Zt(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Me("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Me("tilde return",u),u})},e5=(e,t)=>e.trim().split(/\s+/).map(r=>t5(r,t)).join(" "),t5=(e,t)=>{Me("caret",e,t);let r=t.loose?cr[Qt.CARETLOOSE]:cr[Qt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,s,o,a,u)=>{Me("caret",e,i,s,o,a,u);let l;return Zt(s)?l="":Zt(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Zt(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(Me("replaceCaret pr",u),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Me("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Me("caret return",l),l})},r5=(e,t)=>(Me("replaceXRanges",e,t),e.split(/\s+/).map(r=>n5(r,t)).join(" ")),n5=(e,t)=>{e=e.trim();let r=t.loose?cr[Qt.XRANGELOOSE]:cr[Qt.XRANGE];return e.replace(r,(n,i,s,o,a,u)=>{Me("xRange",e,n,i,s,o,a,u);let l=Zt(s),f=l||Zt(o),c=f||Zt(a),h=c;return i==="="&&h&&(i=""),u=t.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(f&&(o=0),a=0,i===">"?(i=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",f?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):f?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:c&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Me("xRange return",n),n})},i5=(e,t)=>(Me("replaceStars",e,t),e.trim().replace(cr[Qt.STAR],"")),s5=(e,t)=>(Me("replaceGTE0",e,t),e.trim().replace(cr[t.includePrerelease?Qt.GTE0PRE:Qt.GTE0],"")),o5=e=>(t,r,n,i,s,o,a,u,l,f,c,h,d)=>(Zt(n)?r="":Zt(i)?r=`>=${n}.0.0${e?"-0":""}`:Zt(s)?r=`>=${n}.${i}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Zt(l)?u="":Zt(f)?u=`<${+l+1}.0.0-0`:Zt(c)?u=`<${l}.${+f+1}.0-0`:h?u=`<=${l}.${f}.${c}-${h}`:e?u=`<${l}.${f}.${+c+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),a5=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Me(e[n].semver),e[n].semver!==Pm.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var Ka=v((Dee,IP)=>{var Ja=Symbol("SemVer ANY"),so=class{static get ANY(){return Ja}constructor(t,r){if(r=TP(r),t instanceof so){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Om("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Ja?this.value="":this.value=this.operator+this.semver.version,Om("comp",this)}parse(t){let r=this.options.loose?OP[AP.COMPARATORLOOSE]:OP[AP.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new $P(n[2],this.options.loose):this.semver=Ja}toString(){return this.value}test(t){if(Om("Comparator.test",t,this.options.loose),this.semver===Ja||t===Ja)return!0;if(typeof t=="string")try{t=new $P(t,this.options)}catch{return!1}return Tm(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof so))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new CP(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new CP(this.value,r).test(t.semver):(r=TP(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||Tm(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||Tm(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};IP.exports=so;var TP=hf(),{safeRe:OP,t:AP}=to(),Tm=wm(),Om=Va(),$P=Ut(),CP=Dr()});var Ya=v((Lee,NP)=>{var u5=Dr(),l5=(e,t,r)=>{try{t=new u5(t,r)}catch{return!1}return t.test(e)};NP.exports=l5});var xP=v((Fee,kP)=>{var f5=Dr(),c5=(e,t)=>new f5(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));kP.exports=c5});var jP=v((zee,qP)=>{var h5=Ut(),d5=Dr(),p5=(e,t,r)=>{let n=null,i=null,s=null;try{s=new d5(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new h5(n,r))}),n};qP.exports=p5});var LP=v((Mee,DP)=>{var m5=Ut(),y5=Dr(),g5=(e,t,r)=>{let n=null,i=null,s=null;try{s=new y5(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new m5(n,r))}),n};DP.exports=g5});var MP=v((Hee,zP)=>{var Am=Ut(),v5=Dr(),FP=Ua(),_5=(e,t)=>{e=new v5(e,t);let r=new Am("0.0.0");if(e.test(r)||(r=new Am("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],s=null;i.forEach(o=>{let a=new Am(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||FP(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||FP(r,s))&&(r=s)}return r&&e.test(r)?r:null};zP.exports=_5});var VP=v((Vee,HP)=>{var w5=Dr(),S5=(e,t)=>{try{return new w5(e,t).range||"*"}catch{return null}};HP.exports=S5});var bf=v((Uee,KP)=>{var b5=Ut(),GP=Ka(),{ANY:E5}=GP,R5=Dr(),P5=Ya(),UP=Ua(),BP=yf(),T5=vf(),O5=gf(),A5=(e,t,r,n)=>{e=new b5(e,n),t=new R5(t,n);let i,s,o,a,u;switch(r){case">":i=UP,s=T5,o=BP,a=">",u=">=";break;case"<":i=BP,s=O5,o=UP,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(P5(e,t,n))return!1;for(let l=0;l<t.set.length;++l){let f=t.set[l],c=null,h=null;if(f.forEach(d=>{d.semver===E5&&(d=new GP(">=0.0.0")),c=c||d,h=h||d,i(d.semver,c.semver,n)?c=d:o(d.semver,h.semver,n)&&(h=d)}),c.operator===a||c.operator===u||(!h.operator||h.operator===a)&&s(e,h.semver))return!1;if(h.operator===u&&o(e,h.semver))return!1}return!0};KP.exports=A5});var YP=v((Bee,JP)=>{var $5=bf(),C5=(e,t,r)=>$5(e,t,">",r);JP.exports=C5});var XP=v((Gee,WP)=>{var I5=bf(),N5=(e,t,r)=>I5(e,t,"<",r);WP.exports=N5});var eT=v((Kee,ZP)=>{var QP=Dr(),k5=(e,t,r)=>(e=new QP(e,r),t=new QP(t,r),e.intersects(t,r));ZP.exports=k5});var rT=v((Jee,tT)=>{var x5=Ya(),q5=jr();tT.exports=(e,t,r)=>{let n=[],i=null,s=null,o=e.sort((f,c)=>q5(f,c,r));for(let f of o)x5(f,t,r)?(s=f,i||(i=f)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[f,c]of n)f===c?a.push(f):!c&&f===o[0]?a.push("*"):c?f===o[0]?a.push(`<=${c}`):a.push(`${f} - ${c}`):a.push(`>=${f}`);let u=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return u.length<l.length?u:t}});var uT=v((Yee,aT)=>{var nT=Dr(),Cm=Ka(),{ANY:$m}=Cm,Wa=Ya(),Im=jr(),j5=(e,t,r={})=>{if(e===t)return!0;e=new nT(e,r),t=new nT(t,r);let n=!1;e:for(let i of e.set){for(let s of t.set){let o=L5(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},D5=[new Cm(">=0.0.0-0")],iT=[new Cm(">=0.0.0")],L5=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===$m){if(t.length===1&&t[0].semver===$m)return!0;r.includePrerelease?e=D5:e=iT}if(t.length===1&&t[0].semver===$m){if(r.includePrerelease)return!0;t=iT}let n=new Set,i,s;for(let d of e)d.operator===">"||d.operator===">="?i=sT(i,d,r):d.operator==="<"||d.operator==="<="?s=oT(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Im(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let d of n){if(i&&!Wa(d,String(i),r)||s&&!Wa(d,String(s),r))return null;for(let p of t)if(!Wa(d,String(p),r))return!1;return!0}let a,u,l,f,c=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;c&&c.prerelease.length===1&&s.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let d of t){if(f=f||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=sT(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!Wa(i.semver,String(d),r))return!1}if(s){if(c&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===c.major&&d.semver.minor===c.minor&&d.semver.patch===c.patch&&(c=!1),d.operator==="<"||d.operator==="<="){if(u=oT(s,d,r),u===d&&u!==s)return!1}else if(s.operator==="<="&&!Wa(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&f&&!i&&o!==0||h||c)},sT=(e,t,r)=>{if(!e)return t;let n=Im(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},oT=(e,t,r)=>{if(!e)return t;let n=Im(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};aT.exports=j5});var km=v((Wee,cT)=>{var Nm=to(),lT=Ha(),F5=Ut(),fT=gm(),z5=rs(),M5=$R(),H5=IR(),V5=xR(),U5=DR(),B5=FR(),G5=MR(),K5=VR(),J5=BR(),Y5=jr(),W5=YR(),X5=XR(),Q5=mf(),Z5=tP(),e9=nP(),t9=Ua(),r9=yf(),n9=vm(),i9=_m(),s9=gf(),o9=vf(),a9=wm(),u9=hP(),l9=Ka(),f9=Dr(),c9=Ya(),h9=xP(),d9=jP(),p9=LP(),m9=MP(),y9=VP(),g9=bf(),v9=YP(),_9=XP(),w9=eT(),S9=rT(),b9=uT();cT.exports={parse:z5,valid:M5,clean:H5,inc:V5,diff:U5,major:B5,minor:G5,patch:K5,prerelease:J5,compare:Y5,rcompare:W5,compareLoose:X5,compareBuild:Q5,sort:Z5,rsort:e9,gt:t9,lt:r9,eq:n9,neq:i9,gte:s9,lte:o9,cmp:a9,coerce:u9,Comparator:l9,Range:f9,satisfies:c9,toComparators:h9,maxSatisfying:d9,minSatisfying:p9,minVersion:m9,validRange:y9,outside:g9,gtr:v9,ltr:_9,intersects:w9,simplifyRange:S9,subset:b9,SemVer:F5,re:Nm.re,src:Nm.src,tokens:Nm.t,SEMVER_SPEC_VERSION:lT.SEMVER_SPEC_VERSION,RELEASE_TYPES:lT.RELEASE_TYPES,compareIdentifiers:fT.compareIdentifiers,rcompareIdentifiers:fT.rcompareIdentifiers}});var Rf=v((Xee,Dm)=>{"use strict";var Ef=pR(),E9=km(),hT=ii(),{kHasBeenDecorated:R9,kSchemaBody:P9,kSchemaHeaders:T9,kSchemaParams:O9,kSchemaQuerystring:dT,kSchemaController:xm,kOptions:A9,kRequestCacheValidateFns:wi,kRouteContext:nt,kPublicRouteContext:pT,kRequestOriginalUrl:qm}=Et(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:$9}=zt(),mT={body:P9,headers:T9,params:O9,querystring:dT,query:dT};function jm(e,t,r,n,i,s){this.id=e,this[nt]=s,this.params=t,this.raw=r,this.query=n,this.log=i,this.body=void 0}jm.props=[];function C9(e){if(typeof e=="function")return e;if(e===!0)return function(){return!0};if(typeof e=="number")return function(t,r){return r<e};if(typeof e=="string"){let t=e.split(",").map(r=>r.trim());return Ef.compile(t)}return Ef.compile(e)}function I9(e,t){return t?N9(e,t):gT(e)}function gT(e){let t=[...e.props];function r(n,i,s,o,a,u){this.id=n,this[nt]=u,this.params=i,this.raw=s,this.query=o,this.log=a,this.body=void 0;for(var l,f=0;f<t.length;f++)l=t[f],this[l.key]=l.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.props=t,r.parent=e,r}function yT(e){let t=e.lastIndexOf(",");return t===-1?e.trim():e.slice(t+1).trim()}function N9(e,t){let r=gT(e),n=C9(t);return r[R9]=!0,Object.defineProperties(r.prototype,{ip:{get(){return Ef(this.raw,n)}},ips:{get(){return Ef.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?yT(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return yT(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(jm.prototype,{server:{get(){return this[nt].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[qm]||(this[qm]=this.raw.originalUrl||this.raw.url),this[qm]}},method:{get(){return this.raw.method}},context:{get(){return hT.emit("FSTDEP012"),this[nt]}},routerPath:{get(){var e;return(e=this[nt].config)==null?void 0:e.url}},routeOptions:{get(){var s,o;let e=this[nt],t=e._parserOptions.limit,r=e.server.initialConfig.bodyLimit,n=e.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,i={method:(s=e.config)==null?void 0:s.method,url:(o=e.config)==null?void 0:o.url,bodyLimit:t||r,attachValidation:e.attachValidation,logLevel:e.logLevel,exposeHeadRoute:e.exposeHeadRoute,prefixTrailingSlash:e.prefixTrailingSlash,version:n};return Object.freeze(i)}},routerMethod:{get(){var e;return(e=this[nt].config)==null?void 0:e.method}},routeConfig:{get(){var e;return(e=this[nt][pT])==null?void 0:e.config}},routeSchema:{get(){return this[nt][pT].schema}},is404:{get(){var e;return((e=this[nt].config)==null?void 0:e.url)===void 0}},connection:{get(){return E9.gte(process.versions.node,"13.0.0")&&hT.emit("FSTDEP005"),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){var t;if(typeof e=="string"){let r=mT[e];return this[nt][r]}else if(typeof e=="object")return(t=this[nt][wi])==null?void 0:t.get(e)}},compileValidationSchema:{value:function(e,t=null){var o;let{method:r,url:n}=this;if((o=this[nt][wi])!=null&&o.has(e))return this[nt][wi].get(e);let s=(this[nt].validatorCompiler||this.server[xm].validatorCompiler||this.server[xm].setupValidator(this.server[A9])||this.server[xm].validatorCompiler)({schema:e,method:r,url:n,httpPart:t});return this[nt][wi]==null&&(this[nt][wi]=new WeakMap),this[nt][wi].set(e,s),s}},validateInput:{value:function(e,t,r){var s;r=typeof t=="string"?t:r;let n=r!=null&&typeof r=="string"&&mT[r],i;if(n&&(i=this[nt][n]),i==null&&(t==null||typeof t!="object"||Array.isArray(t)))throw new $9(r);return i==null&&((s=this[nt][wi])!=null&&s.has(t)?i=this[nt][wi].get(t):i=this.compileValidationSchema(t,r)),i(e)}}});Dm.exports=jm;Dm.exports.buildRequest=I9});var Pf=v((Qee,vT)=>{"use strict";var{kFourOhFourContext:k9,kReplySerializerDefault:x9,kSchemaErrorFormatter:q9,kErrorHandler:j9,kChildLoggerFactory:D9,kOptions:L9,kReply:F9,kRequest:z9,kBodyLimit:M9,kLogLevel:H9,kContentTypeParser:V9,kRouteByFastify:U9,kRequestCacheValidateFns:B9,kReplyCacheSerializeFns:G9,kPublicRouteContext:K9}=Et();function J9({schema:e,handler:t,config:r,requestIdLogLabel:n,childLoggerFactory:i,errorHandler:s,bodyLimit:o,logLevel:a,logSerializers:u,attachValidation:l,validatorCompiler:f,serializerCompiler:c,replySerializer:h,schemaErrorFormatter:d,exposeHeadRoute:p,prefixTrailingSlash:y,server:w,isFastify:_}){this.schema=e,this.handler=t,this.Reply=w[F9],this.Request=w[z9],this.contentTypeParser=w[V9],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=s||w[j9],this.requestIdLogLabel=n||w[L9].requestIdLogLabel,this.childLoggerFactory=i||w[D9],this._middie=null,this._parserOptions={limit:o||w[M9]},this.exposeHeadRoute=p,this.prefixTrailingSlash=y,this.logLevel=a||w[H9],this.logSerializers=u,this[k9]=null,this.attachValidation=l,this[x9]=h,this.schemaErrorFormatter=d||w[q9]||W9,this[U9]=_,this[B9]=null,this[G9]=null,this.validatorCompiler=f||null,this.serializerCompiler=c||null,this[K9]=Y9(this),this.server=w}function Y9(e){return Object.create(null,{schema:{enumerable:!0,get(){return e.schema}},config:{enumerable:!0,get(){return e.config}}})}function W9(e,t){let r="",n=", ";for(var i=0;i!==e.length;++i){let s=e[i];r+=t+(s.instancePath||"")+" "+s.message+n}return new Error(r.slice(0,-n.length))}vT.exports=J9});var Lm=v((Zee,_T)=>{"use strict";_T.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var Vm=v((ete,ET)=>{"use strict";var{kReply:Fm,kRequest:zm,kState:X9,kHasBeenDecorated:Q9}=Et(),{FST_ERR_DEC_ALREADY_PRESENT:wT,FST_ERR_DEC_MISSING_DEPENDENCY:Z9,FST_ERR_DEC_AFTER_START:eB,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:tB}=zt(),rB=ii();function nB(e,t,r,n){if(Object.prototype.hasOwnProperty.call(e,t))throw new wT(t);Mm(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(e,t,{get:r.getter,set:r.setter}):e[t]=r}function ST(e,t,r,n){let i=e.prototype;if(Object.prototype.hasOwnProperty.call(i,t)||Of(e,t))throw new wT(t);e[Q9]=!0,Mm(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(i,t,{get:r.getter,set:r.setter}):typeof r=="function"?i[t]=r:e.props.push({key:t,value:r})}function bT(e,t){typeof t=="object"&&t&&!(typeof t.getter=="function"||typeof t.setter=="function")&&rB.emit("FSTDEP006",e)}function iB(e,t,r){return Hm(this,e),nB(this,e,t,r),this}function Tf(e,t){return t?t in e||e.prototype&&t in e.prototype||Of(e,t):e in this}function Of(e,t){return e.props?e.props.find(({key:r})=>r===t):!1}function sB(e){return e&&Of(this[zm],e)?!0:Tf(this[zm].prototype,e)}function oB(e){return e&&Of(this[Fm],e)?!0:Tf(this[Fm].prototype,e)}function Mm(e,t,r){if(r!=null){if(!Array.isArray(r))throw new tB(t);for(var n=0;n!==r.length;++n)if(!Tf(e,r[n]))throw new Z9(r[n])}}function aB(e,t,r){return Hm(this,e),bT(e,t),ST(this[Fm],e,t,r),this}function uB(e,t,r){return Hm(this,e),bT(e,t),ST(this[zm],e,t,r),this}function Hm(e,t){if(e[X9].started)throw new eB(t)}ET.exports={add:iB,exist:Tf,existRequest:sB,existReply:oB,dependencies:Mm,decorateReply:aB,decorateRequest:uB}});var PT=v(RT=>{"use strict";function Af(e,t){return t in e}var Um=class{constructor(t=0,r=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=n,this.size=0,this.ttl=r}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(Af(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}return this}evict(t=!1){if(t||this.size>0){let r=this.first;delete this.items[r.key],--this.size===0?(this.first=null,this.last=null):(this.first=r.next,this.first.prev=null)}return this}expiresAt(t){let r;return Af(this.items,t)&&(r=this.items[t].expiry),r}get(t){let r;if(Af(this.items,t)){let n=this.items[t];this.ttl>0&&n.expiry<=Date.now()?this.delete(t):(r=n.value,this.set(t,r,!0))}return r}keys(){return Object.keys(this.items)}set(t,r,n=!1,i=this.resetTtl){let s;if(n||Af(this.items,t)){if(s=this.items[t],s.value=r,i&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==s){let o=this.last,a=s.next,u=s.prev;this.first===s&&(this.first=s.next),s.next=null,s.prev=this.last,o.next=s,u!==null&&(u.next=a),a!==null&&(a.prev=u)}}else this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r},++this.size===1?this.first=s:this.last.next=s;return this.last=s,this}};function lB(e=1e3,t=0,r=!1){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof r!="boolean")throw new TypeError("Invalid resetTtl value");return new Um(e,t,r)}RT.lru=lB});var $T=v((rte,Xa)=>{"use strict";var If=function(){};If.prototype=Object.create(null);var $f=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+)=("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Cf=/\\([\u000b\u0020-\u00ff])/g,TT=/^[!#$%&'*+.^_|~0-9A-Za-z-]+\/[!#$%&'*+.^_|~0-9A-Za-z-]+$/,as={type:"",parameters:new If};Object.freeze(as.parameters);Object.freeze(as);function OT(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(TT.test(r)===!1)throw new TypeError("invalid media type");let n={type:r.toLowerCase(),parameters:new If};if(t===-1)return n;let i,s,o;for($f.lastIndex=t;s=$f.exec(e);){if(s.index!==t)throw new TypeError("invalid parameter format");t+=s[0].length,i=s[1].toLowerCase(),o=s[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Cf.test(o)&&(o=o.replace(Cf,"$1"))),n.parameters[i]=o}if(t!==e.length)throw new TypeError("invalid parameter format");return n}function AT(e){if(typeof e!="string")return as;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(TT.test(r)===!1)return as;let n={type:r.toLowerCase(),parameters:new If};if(t===-1)return n;let i,s,o;for($f.lastIndex=t;s=$f.exec(e);){if(s.index!==t)return as;t+=s[0].length,i=s[1].toLowerCase(),o=s[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Cf.test(o)&&(o=o.replace(Cf,"$1"))),n.parameters[i]=o}return t!==e.length?as:n}Xa.exports.default={parse:OT,safeParse:AT};Xa.exports.parse=OT;Xa.exports.safeParse=AT;Xa.exports.defaultContentType=as});var xT=v((nte,oo)=>{"use strict";var fB=typeof Buffer<"u",CT=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,IT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function NT(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),fB&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",s=r&&r.constructorAction||"error";if(i==="ignore"&&s==="ignore")return n;if(i!=="ignore"&&s!=="ignore"){if(CT.test(e)===!1&&IT.test(e)===!1)return n}else if(i!=="ignore"&&s==="ignore"){if(CT.test(e)===!1)return n}else if(IT.test(e)===!1)return n;return kT(n,{protoAction:i,constructorAction:s,safe:r&&r.safe})}function kT(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let i=[e];for(;i.length;){let s=i;i=[];for(let o of s){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&i.push(u)}}}return e}function Bm(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return NT(e,t,r)}finally{Error.stackTraceLimit=n}}function cB(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return NT(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}oo.exports=Bm;oo.exports.default=Bm;oo.exports.parse=Bm;oo.exports.safeParse=cB;oo.exports.scan=kT});var Wm=v((ite,Za)=>{"use strict";var{AsyncResource:hB}=require("async_hooks"),jT=PT().lru,{safeParse:DT,defaultContentType:dB}=$T(),pB=xT(),{kDefaultJsonParse:Qa,kContentTypeParser:ao,kBodyLimit:mB,kRequestPayloadStream:LT,kState:Km,kTestInternals:yB,kReplyIsError:FT,kRouteContext:gB}=Et(),{FST_ERR_CTP_INVALID_TYPE:zT,FST_ERR_CTP_EMPTY_TYPE:vB,FST_ERR_CTP_ALREADY_PRESENT:_B,FST_ERR_CTP_INVALID_HANDLER:wB,FST_ERR_CTP_INVALID_PARSE_TYPE:SB,FST_ERR_CTP_BODY_TOO_LARGE:qT,FST_ERR_CTP_INVALID_MEDIA_TYPE:bB,FST_ERR_CTP_INVALID_CONTENT_LENGTH:EB,FST_ERR_CTP_EMPTY_JSON_BODY:RB,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Jm}=zt();function Vn(e,t,r){this[Qa]=HT(t,r),this.customParsers=new Map,this.customParsers.set("application/json",new Gm(!0,!1,e,this[Qa])),this.customParsers.set("text/plain",new Gm(!0,!1,e,Ym)),this.parserList=[new Nf("application/json"),new Nf("text/plain")],this.parserRegExpList=[],this.cache=jT(100)}Vn.prototype.add=function(e,t,r){let n=typeof e=="string";if(!n&&!(e instanceof RegExp))throw new zT;if(n&&e.length===0)throw new vB;if(typeof r!="function")throw new wB;if(this.existingParser(e))throw new _B(e);if(t.parseAs!==void 0&&t.parseAs!=="string"&&t.parseAs!=="buffer")throw new SB(t.parseAs);let i=new Gm(t.parseAs==="string",t.parseAs==="buffer",t.bodyLimit,r);n&&e==="*"?this.customParsers.set("",i):(n?this.parserList.unshift(new Nf(e)):(e.isEssence=e.source.indexOf(";")===-1,this.parserRegExpList.unshift(e)),this.customParsers.set(e.toString(),i))};Vn.prototype.hasParser=function(e){return this.customParsers.has(typeof e=="string"?e:e.toString())};Vn.prototype.existingParser=function(e){return e==="application/json"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==this[Qa]:e==="text/plain"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==Ym:this.hasParser(e)};Vn.prototype.getParser=function(e){if(this.hasParser(e))return this.customParsers.get(e);let t=this.cache.get(e);if(t!==void 0)return t;let r=DT(e);if(r===dB)return this.customParsers.get("");for(var n=0;n!==this.parserList.length;++n){let s=this.parserList[n];if(CB(r,s)){let o=this.customParsers.get(s.name);return this.cache.set(e,o),o}}for(var i=0;i!==this.parserRegExpList.length;++i){let s=this.parserRegExpList[i];if(IB(e,r.type,s)){let o=this.customParsers.get(s.toString());return this.cache.set(e,o),o}}return this.customParsers.get("")};Vn.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=jT(100)};Vn.prototype.remove=function(e){if(!(typeof e=="string"||e instanceof RegExp))throw new zT;let t=this.customParsers.delete(e.toString()),r=typeof e=="string"?this.parserList:this.parserRegExpList,n=r.findIndex(i=>i.toString()===e.toString());return n>-1&&r.splice(n,1),t||n>-1};Vn.prototype.run=function(e,t,r,n){let i=this.getParser(e),s=new hB("content-type-parser:run",r);if(i===void 0)r.is404?t(r,n):n.send(new bB(e||void 0));else if(i.asString===!0||i.asBuffer===!0)MT(r,n,n[gB]._parserOptions,i,o);else{let a=i.fn(r,r[LT],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){s.runInAsyncScope(()=>{a?(n[FT]=!0,n.send(a)):(r.body=u,t(r,n))})}};function MT(e,t,r,n,i){let s=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=e.headers["content-length"]===void 0?NaN:Number(e.headers["content-length"]);if(a>o){t.header("connection","close"),t.send(new qT);return}let u=0,l=s===!0?"":[],f=e[LT]||e.raw;s===!0&&f.setEncoding("utf8"),f.on("data",c),f.on("end",h),f.on("error",h),f.resume();function c(d){if(u+=d.length,(f.receivedEncodedLength||u)>o){f.removeListener("data",c),f.removeListener("end",h),f.removeListener("error",h),t.send(new qT);return}s===!0?l+=d:l.push(d)}function h(d){if(f.removeListener("data",c),f.removeListener("end",h),f.removeListener("error",h),d!==void 0){typeof d.statusCode=="number"&&d.statusCode>=400||(d.statusCode=400),t[FT]=!0,t.code(d.statusCode).send(d);return}if(s===!0&&(u=Buffer.byteLength(l)),!Number.isNaN(a)&&(f.receivedEncodedLength||u)!==a){t.header("connection","close"),t.send(new EB);return}s===!1&&(l=Buffer.concat(l));let p=n.fn(e,l,i);p&&typeof p.then=="function"&&p.then(y=>i(null,y),i)}}function HT(e,t){return r;function r(n,i,s){if(i===""||i==null||Buffer.isBuffer(i)&&i.length===0)return s(new RB,void 0);let o;try{o=pB.parse(i,{protoAction:e,constructorAction:t})}catch(a){return a.statusCode=400,s(a,void 0)}s(null,o)}}function Ym(e,t,r){r(null,t)}function Gm(e,t,r,n){this.asString=e,this.asBuffer=t,this.bodyLimit=r,this.fn=n}function PB(e){let t=new Vn;return t[Qa]=e[Qa],t.customParsers=new Map(e.customParsers.entries()),t.parserList=e.parserList.slice(),t.parserRegExpList=e.parserRegExpList.slice(),t}function TB(e,t,r){if(this[Km].started)throw new Jm("addContentTypeParser");return typeof t=="function"&&(r=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[mB]),Array.isArray(e)?e.forEach(n=>this[ao].add(n,t,r)):this[ao].add(e,t,r),this}function OB(e){return this[ao].hasParser(e)}function AB(e){if(this[Km].started)throw new Jm("removeContentTypeParser");if(Array.isArray(e))for(let t of e)this[ao].remove(t);else this[ao].remove(e)}function $B(){if(this[Km].started)throw new Jm("removeAllContentTypeParsers");this[ao].removeAll()}function CB(e,t){if(t.isEssence)return e.type.indexOf(t)!==-1;if(e.type.indexOf(t.type)===-1)return!1;for(let r of t.parameterKeys)if(!(r in e.parameters)||e.parameters[r]!==t.parameters[r])return!1;return!0}function IB(e,t,r){return r.isEssence?r.test(t):r.test(e)}function Nf(e){this.name=e;let t=DT(e);if(this.isEssence=e.indexOf(";")===-1,this.isEssence===!1&&t.type===""){let r=e.split(";")[0];this.type=r===""?e:r}else this.type=t.type;this.parameters=t.parameters,this.parameterKeys=Object.keys(t.parameters)}Nf.prototype.toString=function(){return this.name};Za.exports=Vn;Za.exports.helpers={buildContentTypeParser:PB,addContentTypeParser:TB,hasContentTypeParser:OB,removeContentTypeParser:AB,removeAllContentTypeParsers:$B};Za.exports.defaultParsers={getDefaultJsonParser:HT,defaultTextParser:Ym};Za.exports[yB]={rawBody:MT}});var VT=v((ste,kf)=>{"use strict";var NB=Object.getPrototypeOf({});function Xm(e){function t(_){return _!=="constructor"&&_!=="prototype"&&_!=="__proto__"}function r(_){let S=0,g=_.length,m=new Array(g);for(S=0;S<g;++S)m[S]=d(_[S]);return m}function n(_){let S={};if(u&&Object.getPrototypeOf(_)!==NB)return u(_);let g=a(_),m,P,$;for(m=0,P=g.length;m<P;++m)t($=g[m])&&(S[$]=d(_[$]));return S}function i(_,S){let g=_.length,m=S.length,P=0,$=new Array(g+m);for(P=0;P<g;++P)$[P]=d(_[P]);for(P=0;P<m;++P)$[P+g]=d(S[P]);return $}let s=Object.prototype.propertyIsEnumerable;function o(_){let S=Object.keys(_),g=Object.getOwnPropertySymbols(_);for(let m=0,P=g.length;m<P;++m)s.call(_,g[m])&&S.push(g[m]);return S}let a=e&&e.symbols?o:Object.keys,u=typeof(e==null?void 0:e.cloneProtoObject)=="function"?e.cloneProtoObject:void 0;function l(_){return typeof _=="object"&&_!==null&&!(_ instanceof RegExp)&&!(_ instanceof Date)}function f(_){return typeof _!="object"||_===null}let c=typeof Buffer<"u"?_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date||_ instanceof Buffer:_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date,h=e&&typeof e.mergeArray=="function"?e.mergeArray({clone:d,deepmerge:y,getKeys:a,isMergeableObject:l}):i;function d(_){return l(_)?Array.isArray(_)?r(_):n(_):_}function p(_,S){let g={},m=a(_),P=a(S),$,E,O;for($=0,E=m.length;$<E;++$)t(O=m[$])&&P.indexOf(O)===-1&&(g[O]=d(_[O]));for($=0,E=P.length;$<E;++$)t(O=P[$])&&(O in _&&(m.indexOf(O)!==-1&&(g[O]=y(_[O],S[O])),!0)||(g[O]=d(S[O])));return g}function y(_,S){let g=Array.isArray(S),m=Array.isArray(_);return f(S)?S:c(_)?d(S):g&&m?h(_,S):g!==m?d(S):p(_,S)}function w(){switch(arguments.length){case 0:return{};case 1:return d(arguments[0]);case 2:return y(arguments[0],arguments[1])}let _;for(let S=0,g=arguments.length;S<g;++S)_=y(_,arguments[S]);return _}return e&&e.all?w:y}kf.exports=Xm;kf.exports.default=Xm;kf.exports.deepmerge=Xm});var JT=v((ote,Zm)=>{"use strict";Zm.exports=F;Zm.exports.default=F;var kB={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},UT={enum:["array","boolean","integer","null","number","object","string"]},BT=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,xB=ef().fullFormats.uri,GT=ef().fullFormats.regex;function Lr(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0,a=o;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?o===a&&typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(Lr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Lr.errors=s,o===0):(Lr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Qm={validate:F};function er(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return er.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=e.length;for(let l=0;l<u;l++){let f=o;Qm.validate(e[l],{instancePath:t+"/"+l,parentData:e,parentDataProperty:l,rootData:i})||(s=s===null?Qm.validate.errors:s.concat(Qm.validate.errors),o=s.length);var a=f===o;if(!a)break}}}else return er.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return er.errors=s,o===0}var KT=Aa().default;function F(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return F.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:kB.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let g=e.$id,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!BT.test(g))return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$schema!==void 0){let g=e.$schema,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!xB(g))return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$ref!==void 0){let g=e.$ref,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!BT.test(g))return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$comment!==void 0){let g=o;if(typeof e.$comment!="string")return F.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){let g=o;if(typeof e.title!="string")return F.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){let g=o;if(typeof e.description!="string")return F.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){let g=o;if(typeof e.readOnly!="boolean")return F.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){let g=o;if(o===g&&!Array.isArray(e.examples))return F.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf,m=o;if(o===m)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength,m=o,P=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===P&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minLength!==void 0){let g=o;Lr(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:i})||(s=s===null?Lr.errors:s.concat(Lr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){let g=e.pattern,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!GT(g))return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalItems!==void 0){let g=o;F(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items,m=o,P=o,$=!1,E=o;F(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var u=E===o;if($=$||u,!$){let k=o;er(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:i})||(s=s===null?er.errors:s.concat(er.errors),o=s.length);var u=k===o;$=$||u}if($)o=P,s!==null&&(P?s.length=P:s=null);else{let k={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[k]:s.push(k),o++,F.errors=s,!1}var a=m===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems,m=o,P=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===P&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minItems!==void 0){let g=o;Lr(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:i})||(s=s===null?Lr.errors:s.concat(Lr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){let g=o;if(typeof e.uniqueItems!="boolean")return F.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){let g=o;F(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties,m=o,P=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===P&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minProperties!==void 0){let g=o;Lr(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:i})||(s=s===null?Lr.errors:s.concat(Lr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required,m=o;if(o===o)if(Array.isArray(g)){var l=!0;let E=g.length;for(let O=0;O<E;O++){let k=o;if(typeof g[O]!="string")return F.errors=[{instancePath:t+"/required/"+O,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=k===o;if(!l)break}if(l){let O=g.length,k;if(O>1){let R={};for(;O--;){let D=g[O];if(typeof D=="string"){if(typeof R[D]=="number"){return k=R[D],F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:O,j:k},message:"must NOT have duplicate items (items ## "+k+" and "+O+" are identical)"}],!1;break}R[D]=O}}}}}else return F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){let g=o;F(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let E=o;F(g[$],{instancePath:t+"/definitions/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var f=E===o;if(!f)break}else return F.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let E=o;F(g[$],{instancePath:t+"/properties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var c=E===o;if(!c)break}else return F.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g)){for(let $ in g){let E=o;if(o===E&&typeof $=="string"&&!GT($)){let O={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:$};s===null?s=[O]:s.push(O),o++}var h=E===o;if(!h){let O={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:$},message:"property name must be valid"};return s===null?s=[O]:s.push(O),o++,F.errors=s,!1;break}}if(h)for(let $ in g){let E=o;F(g[$],{instancePath:t+"/patternProperties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var d=E===o;if(!d)break}}else return F.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let E=g[$],O=o,k=o,R=!1,D=o;F(E,{instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var p=D===o;if(R=R||p,!R){let j=o;if(o===o)if(Array.isArray(E)){var y=!0;let te=E.length;for(let M=0;M<te;M++){let Q=o;if(typeof E[M]!="string"){let V={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+M,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[V]:s.push(V),o++}var y=Q===o;if(!y)break}if(y){let M=E.length,Q;if(M>1){let Ae={};for(;M--;){let V=E[M];if(typeof V=="string"){if(typeof Ae[V]=="number"){Q=Ae[V];let Ct={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:M,j:Q},message:"must NOT have duplicate items (items ## "+Q+" and "+M+" are identical)"};s===null?s=[Ct]:s.push(Ct),o++;break}Ae[V]=M}}}}}else{let te={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[te]:s.push(te),o++}var p=j===o;R=R||p}if(R)o=k,s!==null&&(k?s.length=k:s=null);else{let j={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[j]:s.push(j),o++,F.errors=s,!1}var w=O===o;if(!w)break}else return F.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.propertyNames!==void 0){let g=o;F(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum,m=o;if(o===m)if(Array.isArray(g)){if(g.length<1)return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let $=g.length,E;if($>1){e:for(;$--;)for(E=$;E--;)if(KT(g[$],g[E])){return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:$,j:E},message:"must NOT have duplicate items (items ## "+E+" and "+$+" are identical)"}],!1;break e}}}}else return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type,m=o,P=o,$=!1,E=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){let k={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:UT.enum},message:"must be equal to one of the allowed values"};s===null?s=[k]:s.push(k),o++}var _=E===o;if($=$||_,!$){let k=o;if(o===k)if(Array.isArray(g))if(g.length<1){let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[D]:s.push(D),o++}else{var S=!0;let D=g.length;for(let j=0;j<D;j++){let L=g[j],ee=o;if(!(L==="array"||L==="boolean"||L==="integer"||L==="null"||L==="number"||L==="object"||L==="string")){let M={instancePath:t+"/type/"+j,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:UT.enum},message:"must be equal to one of the allowed values"};s===null?s=[M]:s.push(M),o++}var S=ee===o;if(!S)break}if(S){let j=g.length,L;if(j>1){e:for(;j--;)for(L=j;L--;)if(KT(g[j],g[L])){let ee={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:j,j:L},message:"must NOT have duplicate items (items ## "+L+" and "+j+" are identical)"};s===null?s=[ee]:s.push(ee),o++;break e}}}}else{let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[D]:s.push(D),o++}var _=k===o;$=$||_}if($)o=P,s!==null&&(P?s.length=P:s=null);else{let k={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[k]:s.push(k),o++,F.errors=s,!1}var a=m===o}else var a=!0;if(a){if(e.format!==void 0){let g=o;if(typeof e.format!="string")return F.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){let g=o;if(typeof e.contentMediaType!="string")return F.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){let g=o;if(typeof e.contentEncoding!="string")return F.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){let g=o;F(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){let g=o;F(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){let g=o;F(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){let g=o;er(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:i})||(s=s===null?er.errors:s.concat(er.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){let g=o;er(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:i})||(s=s===null?er.errors:s.concat(er.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){let g=o;er(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:i})||(s=s===null?er.errors:s.concat(er.errors),o=s.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){let g=o;F(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:i})||(s=s===null?F.errors:s.concat(F.errors),o=s.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return F.errors=s,o===0}});var XT=v((ate,WT)=>{"use strict";var YT=Hs(),ey=class{constructor(){this.schemas={}}addSchema(t,r){t.$id!==void 0&&t.$id.charAt(0)!=="#"&&(r=t.$id),this.getSchema(r)===void 0&&(this.insertSchemaBySchemaId(t,r),this.insertSchemaSubschemas(t,r))}getSchema(t,r="#"){let n=this.schemas[t];if(n!==void 0)return n.anchors[r]!==void 0?n.anchors[r]:qB(n.schema,r)}getSchemaDependencies(t,r={}){let n=this.schemas[t];for(let i of n.dependencies)r[i]===void 0&&(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r));return r}insertSchemaBySchemaId(t,r){if(this.schemas[r]!==void 0&&!YT(t,this.schemas[r].schema))throw new Error(`There is already another schema with id ${r}`);this.schemas[r]={schema:t,anchors:{},dependencies:[]}}insertSchemaByAnchor(t,r,n){let{anchors:i}=this.schemas[r];if(i[n]!==void 0&&!YT(t,i[n]))throw new Error(`There is already another schema with id ${r}#${n}`);i[n]=t}insertSchemaSubschemas(t,r){let n=t.$id;n!==void 0&&typeof n=="string"&&(n.charAt(0)==="#"?this.insertSchemaByAnchor(t,r,n):(this.insertSchemaBySchemaId(t,n),r=n));let i=t.$ref;if(i!==void 0&&typeof i=="string"&&i.charAt(0)!=="#"){let s=i.split("#")[0];this.schemas[r].dependencies.push(s)}for(let s in t)typeof t[s]=="object"&&t[s]!==null&&this.insertSchemaSubschemas(t[s],r)}};function qB(e,t){let r=t.split("/"),n=e;for(let i of r)if(!(i===""||i==="#")){if(typeof n!="object"||n===null)return;n=n[i]}return n}WT.exports=ey});var ZT=v((ute,QT)=>{"use strict";var eu=class{constructor(t,r,n="#"){this.schema=t,this.schemaId=r,this.jsonPointer=n,this.mergedSchemaId=null}getPropertyLocation(t){let r=new eu(this.schema[t],this.schemaId,this.jsonPointer+"/"+t);return this.mergedSchemaId!==null&&r.addMergedSchema(this.schema[t],this.mergedSchemaId,this.jsonPointer+"/"+t),r}getSchemaId(){return this.mergedSchemaId||this.schemaId}getOriginSchemaId(){return this.schemaId}getSchemaRef(){return this.getSchemaId()+this.jsonPointer}addMergedSchema(t,r,n="#"){this.schema=t,this.mergedSchemaId=r,this.jsonPointer=n}};QT.exports=eu});var f1=v((lte,uo)=>{"use strict";var ty=VT()(),jB=ia()({proto:!0}),{randomUUID:t1}=require("crypto"),e1=JT(),DB=cd(),LB=rm(),FB=XT(),r1=ZT(),xf=2e4,n1="default",zB=["floor","ceil","round","trunc"],i1=["default","json-stringify"],tu="!addComma && (addComma = true) || (json += ',')";function ry(e,t){if(!e1(e)){t?t=`"${t}" `:t="";let r=e1.errors[0],n=new Error(`${t}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=ry.errors,n}}function ru(e,t,r){let n=r.indexOf("#");n===-1&&(n=r.length);let i=r.slice(0,n)||t.getOriginSchemaId(),s=r.slice(n)||"#",o=e.refResolver.getSchema(i,s);if(o===void 0)throw new Error(`Cannot find reference "${r}"`);let a=new r1(o,i,s);return o.$ref!==void 0?ru(e,a,o.$ref):a}function ny(e,t){ry(e),t=t||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:t,refResolver:new FB,rootSchemaId:e.$id||t1(),validatorSchemasIds:new Set};if(r.refResolver.addSchema(e,r.rootSchemaId),t.schema)for(let l of Object.keys(t.schema))ry(t.schema[l],l),r.refResolver.addSchema(t.schema[l],l);if(t.rounding&&!zB.includes(t.rounding))throw new Error(`Unsupported integer rounding method ${t.rounding}`);if(t.largeArrayMechanism)if(i1.includes(t.largeArrayMechanism))n1=t.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${t.largeArrayMechanism}`);if(t.largeArraySize)if(typeof t.largeArraySize=="string"&&Number.isFinite(Number.parseInt(t.largeArraySize,10)))xf=Number.parseInt(t.largeArraySize,10);else if(typeof t.largeArraySize=="number"&&Number.isInteger(t.largeArraySize))xf=t.largeArraySize;else if(typeof t.largeArraySize=="bigint")xf=Number(t.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof t.largeArraySize} with value ${t.largeArraySize}`);let n=new r1(e,r.rootSchemaId),i=Un(r,n,"input"),s;i==="json += anonymous0(input)"?s=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:s=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let o=new DB(t),a=new LB(t.ajv);for(let l of r.validatorSchemasIds){let f=r.refResolver.getSchema(l);a.addSchema(f,l);let c=r.refResolver.getSchemaDependencies(l);for(let[h,d]of Object.entries(c))a.addSchema(d,h)}if(t.debugMode&&(t.mode="debug"),t.mode==="debug")return{validator:a,serializer:o,code:`validator
serializer
${s}`,ajv:a.ajv};let u=new Function("validator","serializer",s);return t.mode==="standalone"?im()(u,r,o,a):u(a,o)}var MB=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],HB=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],VB=["maxLength","minLength","pattern"],UB=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function s1(e){for(var t of MB)if(t in e)return"object";for(var t of HB)if(t in e)return"array";for(var t of VB)if(t in e)return"string";for(var t of UB)if(t in e)return"number";return e.type}function BB(e,t){let r=t.schema,n=Object.keys(r.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(n)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,s=t.getPropertyLocation("patternProperties"),o=s.schema;if(o!==void 0)for(let l in o){let f=s.getPropertyLocation(l);i+=`
        if (/${l.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${tu}
          json += serializer.asString(key) + ':'
          ${Un(e,f,"value")}
          continue
        }
      `}let u=t.getPropertyLocation("additionalProperties").schema;if(u!==void 0)if(u===!0)i+=`
        ${tu}
        json += serializer.asString(key) + ':' + JSON.stringify(value)
      `;else{let l=t.getPropertyLocation("additionalProperties");i+=`
        ${tu}
        json += serializer.asString(key) + ':'
        ${Un(e,l,"value")}
      `}return i+=`
    }
  `,i}function GB(e,t){let r=t.schema,n=r.required||[],i="",s=t.getPropertyLocation("properties");Object.keys(r.properties||{}).forEach(o=>{let a=s.getPropertyLocation(o);a.schema.$ref&&(a=ru(e,t,a.schema.$ref));let u=JSON.stringify(o);i+=`
      if (obj[${u}] !== undefined) {
        ${tu}
        json += ${JSON.stringify(u+":")}
      `,i+=Un(e,a,`obj[${u}]`);let l=a.schema.default;l!==void 0?i+=`
      } else {
        ${tu}
        json += ${JSON.stringify(u+":"+JSON.stringify(l))}
      `:n.includes(o)&&(i+=`
      } else {
        throw new Error('${u} is required!')
      `),i+=`
      }
    `});for(let o of n)r.properties&&r.properties[o]!==void 0||(i+=`if (obj['${o}'] === undefined) throw new Error('"${o}" is required!')
`);return(r.patternProperties||r.additionalProperties)&&(i+=BB(e,t)),i}function o1(e,t,r,n){let i=t.getPropertyLocation("allOf");for(let s=0;s<r.allOf.length;s++){let o=r.allOf[s];if(o.$ref){let u=i.getPropertyLocation(s);o=ru(e,u,o.$ref).schema}let a=o.type;if(a===void 0&&(a=s1(o)),a!==void 0){if(n.type!==void 0&&n.type!==a)throw new Error("allOf schemas have different type values");n.type=a}if(o.format!==void 0){if(n.format!==void 0&&n.format!==o.format)throw new Error("allOf schemas have different format values");n.format=o.format}if(o.nullable!==void 0){if(n.nullable!==void 0&&n.nullable!==o.nullable)throw new Error("allOf schemas have different nullable values");n.nullable=o.nullable}o.properties!==void 0&&(n.properties===void 0&&(n.properties={}),Object.assign(n.properties,o.properties)),o.additionalProperties!==void 0&&(n.additionalProperties===void 0&&(n.additionalProperties={}),Object.assign(n.additionalProperties,o.additionalProperties)),o.patternProperties!==void 0&&(n.patternProperties===void 0&&(n.patternProperties={}),Object.assign(n.patternProperties,o.patternProperties)),o.required!==void 0&&(n.required===void 0&&(n.required=[]),n.required.push(...o.required)),o.oneOf!==void 0&&(n.oneOf===void 0&&(n.oneOf=[]),n.oneOf.push(...o.oneOf)),o.anyOf!==void 0&&(n.anyOf===void 0&&(n.anyOf=[]),n.anyOf.push(...o.anyOf)),o.allOf!==void 0&&o1(e,t,o,n)}delete n.allOf,n.$id=`merged_${t1()}`,e.refResolver.addSchema(n),t.addMergedSchema(n,n.$id)}function KB(e,t,r){e.validatorSchemasIds.add(t.getSchemaId());let n=ty({},t.schema),i=n.then,s=n.else||{additionalProperties:!0};delete n.if,delete n.then,delete n.else;let a=t.getPropertyLocation("if").getSchemaRef(),u=t.getPropertyLocation("then");u.schema=ty(n,i);let l=t.getPropertyLocation("else");return l.schema=ty(n,s),`
    if (validator.validate("${a}", ${r})) {
      ${Un(e,u,r)}
    } else {
      ${Un(e,l,r)}
    }
  `}function JB(e){return`(${e} && typeof ${e}.toJSON === 'function')
    ? ${e}.toJSON()
    : ${e}
  `}function YB(e,t){let r=t.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let n=u1(e);e.functionsNamesBySchema.set(r,n);let i=t.getSchemaRef();i.startsWith(e.rootSchemaId)&&(i=i.replace(e.rootSchemaId,""));let s=`
    function ${n} (input) {
      // ${i}
  `;return s+=`
      const obj = ${JB("input")}
      let json = '{'
      let addComma = false
  `,s+=GB(e,t),s+=`
      return json + '}'
    }
  `,e.functions.push(s),n}function WB(e,t){let r=t.schema,n=t.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=ru(e,n,n.schema.$ref));let i=n.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let s=u1(e);e.functionsNamesBySchema.set(r,s);let o=t.getSchemaRef();o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,""));let a=`
    function ${s} (obj) {
      // ${o}
  `;if(a+=`
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(i)&&(a+=`
      if (arrayLength > ${i.length}) {
        throw new Error(\`Item at ${i.length} does not match schema definition.\`)
      }
    `),n1==="json-stringify"&&(a+=`if (arrayLength && arrayLength >= ${xf}) return JSON.stringify(obj)
`),a+=`
    let jsonOutput = ''
  `,Array.isArray(i)){for(let u=0;u<i.length;u++){let l=i[u],f=Un(e,n.getPropertyLocation(u),`obj[${u}]`);a+=`
        if (${u} < arrayLength) {
          if (${a1(l.type,`[${u}]`)}) {
            let json = ''
            ${f}
            jsonOutput += json
            if (${u} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${u} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${i.length}; i < arrayLength; i++) {
          jsonOutput += JSON.stringify(obj[i])
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else{let u=Un(e,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${u}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`}return a+="\n    return `[${jsonOutput}]`\n  }",e.functions.push(a),s}function a1(e,t){let r;switch(e){case"null":r=`obj${t} === null`;break;case"string":r=`typeof obj${t} === 'string'`;break;case"integer":r=`Number.isInteger(obj${t})`;break;case"number":r=`Number.isFinite(obj${t})`;break;case"boolean":r=`typeof obj${t} === 'boolean'`;break;case"object":r=`obj${t} && typeof obj${t} === 'object' && obj${t}.constructor === Object`;break;case"array":r=`Array.isArray(obj${t})`;break;default:Array.isArray(e)&&(r=`(${e.map(i=>a1(i,t)).join(" || ")})`)}return r}function u1(e){return"anonymous"+e.functionsCounter++}function XB(e,t,r){let i=t.schema.type.sort(a=>a==="null"?-1:1),s="";i.forEach((a,u)=>{t.schema={...t.schema,type:a};let l=l1(e,t,r),f=u===0?"if":"else if";switch(a){case"null":s+=`
          ${f} (${r} === null)
            ${l}
          `;break;case"string":{s+=`
          ${f}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString &&
              !(${r} instanceof Date)
            )
          )
            ${l}
        `;break}case"array":{s+=`
          ${f}(Array.isArray(${r}))
            ${l}
        `;break}case"integer":{s+=`
          ${f}(Number.isInteger(${r}) || ${r} === null)
            ${l}
        `;break}default:{s+=`
          ${f}(typeof ${r} === "${a}" || ${r} === null)
            ${l}
        `;break}}});let o=t.getSchemaRef();return o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,"")),s+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,s}function l1(e,t,r){let n=t.schema;switch(n.type){case"null":return"json += 'null'";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:`json += serializer.asString(${r})`;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${YB(e,t)}(${r})`;case"array":return`json += ${WB(e,t)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function QB(e,t){let r=e.schema,n=r.type,i=Array.isArray(n)&&n.includes("null"),s="";return i&&(s+=`
      if (${t} === null) {
        json += 'null'
      } else {
    `),s+=`json += '${JSON.stringify(r.const)}'`,i&&(s+=`
      }
    `),s}function Un(e,t,r){let n=t.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(t=ru(e,t,n.$ref),n=t.schema),n.type===void 0){let a=s1(n);a&&(n.type=a)}if(n.if&&n.then)return KB(e,t,r);n.allOf&&(o1(e,t,n,jB(n)),n=t.schema);let i=n.type,s="";if(i===void 0&&(n.anyOf||n.oneOf)){e.validatorSchemasIds.add(t.getSchemaId());let a=n.anyOf?"anyOf":"oneOf",u=t.getPropertyLocation(a);for(let f=0;f<t.schema[a].length;f++){let c=u.getPropertyLocation(f),h=c.getSchemaRef(),d=Un(e,c,r);s+=`
        ${f===0?"if":"else if"}(validator.validate("${h}", ${r}))
          ${d}
      `}let l=t.getSchemaRef();return l.startsWith(e.rootSchemaId)&&(l=l.replace(e.rootSchemaId,"")),s+=`
      else throw new TypeError(\`The value of '${l}' does not match schema definition.\`)
    `,s}let o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += 'null'
      } else {
    `),n.const!==void 0?s+=QB(t,r):Array.isArray(i)?s+=XB(e,t,r):s+=l1(e,t,r),o&&(s+=`
      }
    `),s}uo.exports=ny;uo.exports.default=ny;uo.exports.build=ny;uo.exports.validLargeArrayMechanisms=i1;uo.exports.restore=function({code:e,validator:t,serializer:r}){return Function.apply(null,["validator","serializer",e]).apply(null,[t,r])}});var h1=v((fte,iy)=>{"use strict";var ZB=sy();function c1(e={readMode:!0}){if(e.readMode===!0&&typeof e.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(e.readMode!==!0&&typeof e.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=ZB();return function(n,i={}){i.mode="standalone";let s=t(n,i);return function(o){let a=s(o);return e.storeFunction(o,a),new Function(a)}}}iy.exports=c1;iy.exports.default=c1});var sy=v((cte,nu)=>{"use strict";var e6=f1();function oy(){return function(t,r){let n=Object.assign({},r,{schema:t});return t6.bind(null,n)}}function t6(e,{schema:t}){return e.schema&&t.$id&&e.schema[t.$id]&&(e.schema={...e.schema},delete e.schema[t.$id]),e6(t,e)}nu.exports=oy;nu.exports.default=oy;nu.exports.SerializerSelector=oy;nu.exports.StandaloneSerializer=h1()});var Bn=v(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.checkMetadata=void 0;var r6=oe(),n6={keyword:"metadata",schemaType:"object",code(e){d1(e);let{gen:t,schema:r,it:n}=e;if((0,r6.alwaysValidSchema)(n,r))return;let i=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},i),e.ok(i)}};function d1({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}iu.checkMetadata=d1;iu.default=n6});var qf=v(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.hasRef=void 0;var p1=Xi(),su=Z(),i6=yi(),m1=kr(),y1=rp(),s6=Bn(),o6={keyword:"ref",schemaType:"string",code(e){(0,s6.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:i,it:s}=e,{schemaEnv:{root:o}}=s,a=t.name("valid");i.nullable?(t.var(a,(0,su._)`${r} === null`),t.if((0,su.not)(a),u)):(t.var(a,!1),u()),e.ok(a);function u(){var c;let h=(c=o.schema.definitions)===null||c===void 0?void 0:c[n];if(!h)throw new i6.default(s.opts.uriResolver,"",n,`No definition ${n}`);ay(h)||!s.opts.inlineRefs?l(h):f(h)}function l(c){let h=p1.compileSchema.call(s.self,new p1.SchemaEnv({schema:c,root:o,schemaPath:`/definitions/${n}`})),d=(0,y1.getValidate)(e,h),p=t.const("_errs",m1.default.errors);(0,y1.callRef)(e,d,h,h.$async),t.assign(a,(0,su._)`${p} === ${m1.default.errors}`)}function f(c){let h=t.scopeValue("schema",s.opts.code.source===!0?{ref:c,code:(0,su.stringify)(c)}:{ref:c});e.subschema({schema:c,dataTypes:[],schemaPath:su.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function ay(e){for(let t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&ay(r))return!0}return!1}ou.hasRef=ay;ou.default=o6});var ly=v(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});var a6=/t|\s/i,u6=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,l6=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,f6=[0,31,28,31,30,31,30,31,31,30,31,30,31];function v1(e,t){let r=e.split(a6);return r.length===2&&g1(r[0])&&c6(r[1])||t&&r.length===1&&g1(r[0])}uy.default=v1;function g1(e){let t=u6.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&(i<=f6[n]||n===2&&i===29&&(r%100===0?r%400===0:r%4===0))}function c6(e){let t=l6.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3],s=+(t[4]||0),o=+(t[5]||0);return r<=23&&n<=59&&i<=59||r-s===23&&n-o===59&&i===60}v1.code='require("ajv/dist/runtime/timestamp").default'});var lo=v(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.typeErrorParams=Si.typeErrorMessage=Si.typeError=void 0;var h6=Z();function d6(e){return{message:t=>_1(t,e),params:t=>w1(t,e)}}Si.typeError=d6;function _1({parentSchema:e},t){return e!=null&&e.nullable?`must be ${t} or null`:`must be ${t}`}Si.typeErrorMessage=_1;function w1({parentSchema:e},t){return(0,h6._)`{type: ${t}, nullable: ${!!(e!=null&&e.nullable)}}`}Si.typeErrorParams=w1});var fy=v(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.intRange=void 0;var wr=Z(),p6=ly(),m6=oe(),y6=Bn(),S1=lo();fo.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var g6={message:e=>(0,S1.typeErrorMessage)(e,e.schema),params:e=>(0,S1.typeErrorParams)(e,e.schema)};function v6(e){let{gen:t,data:r,it:n}=e,{timestamp:i,allowDate:s}=n.opts;if(i==="date")return(0,wr._)`${r} instanceof Date `;let o=(0,m6.useFunc)(t,p6.default),a=s?(0,wr._)`, true`:wr.nil,u=(0,wr._)`typeof ${r} == "string" && ${o}(${r}${a})`;return i==="string"?u:(0,wr.or)((0,wr._)`${r} instanceof Date`,u)}var _6={keyword:"type",schemaType:"string",error:g6,code(e){(0,y6.checkMetadata)(e);let{data:t,schema:r,parentSchema:n,it:i}=e,s;switch(r){case"boolean":case"string":s=(0,wr._)`typeof ${t} == ${r}`;break;case"timestamp":{s=v6(e);break}case"float32":case"float64":s=(0,wr._)`typeof ${t} == "number"`;break;default:{let o=r;if(s=(0,wr._)`typeof ${t} == "number" && isFinite(${t}) && !(${t} % 1)`,!i.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(s=(0,wr._)`${s} && ${t} >= 0`);else{let[a,u]=fo.intRange[o];s=(0,wr._)`${s} && ${t} >= ${a} && ${t} <= ${u}`}}}e.pass(n.nullable?(0,wr.or)((0,wr._)`${t} === null`,s):s)}};fo.default=_6});var ho=v(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.checkNullableObject=co.checkNullable=void 0;var jf=Z();function b1({gen:e,data:t,parentSchema:r},n=jf.nil){let i=e.name("valid");return r.nullable?(e.let(i,(0,jf._)`${t} === null`),n=(0,jf.not)(i)):e.let(i,!1),[i,n]}co.checkNullable=b1;function w6(e,t){let[r,n]=b1(e,t);return[r,(0,jf._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}co.checkNullableObject=w6});var E1=v(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});var bi=Z(),S6=Bn(),b6=ho(),E6={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,bi._)`{allowedValues: ${e}}`},R6={keyword:"enum",schemaType:"array",error:E6,code(e){(0,S6.checkMetadata)(e);let{gen:t,data:r,schema:n,schemaValue:i,parentSchema:s,it:o}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,bi._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let f;[a,f]=(0,b6.checkNullable)(e,u),t.if(f,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,bi.and)(u,(0,bi.or)(...n.map(f=>(0,bi._)`${r} === ${f}`))),s.nullable&&(a=(0,bi.or)((0,bi._)`${r} === null`,a))}e.pass(a);function l(){t.forOf("v",i,f=>t.if((0,bi._)`${a} = ${r} === ${f}`,()=>t.break()))}}};cy.default=R6});var P1=v(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});var P6=oe(),T6=xt(),R1=Z(),O6=Bn(),A6=ho(),$6=lo(),C6={keyword:"elements",schemaType:"object",error:(0,$6.typeError)("array"),code(e){(0,O6.checkMetadata)(e);let{gen:t,data:r,schema:n,it:i}=e;if((0,P6.alwaysValidSchema)(i,n))return;let[s]=(0,A6.checkNullable)(e);t.if((0,R1.not)(s),()=>t.if((0,R1._)`Array.isArray(${r})`,()=>t.assign(s,(0,T6.validateArray)(e)),()=>e.error())),e.ok(s)}};hy.default=C6});var py=v(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.validateProperties=Ei.error=void 0;var dy=xt(),T1=oe(),Gn=Z(),I6=Bn(),N6=ho(),O1=lo(),po;(function(e){e.Additional="additional",e.Missing="missing"})(po||(po={}));Ei.error={message:e=>{let{params:t}=e;return t.propError?t.propError===po.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,O1.typeErrorMessage)(e,"object")},params:e=>{let{params:t}=e;return t.propError?t.propError===po.Additional?(0,Gn._)`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:(0,Gn._)`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,O1.typeErrorParams)(e,"object")}};var k6={keyword:"properties",schemaType:"object",error:Ei.error,code:A1};function A1(e){(0,I6.checkMetadata)(e);let{gen:t,data:r,parentSchema:n,it:i}=e,{additionalProperties:s,nullable:o}=n;if(i.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=p("properties"),[l,f]=p("optionalProperties");if(u.length===0&&f.length===0&&s)return;let[c,h]=i.jtdDiscriminator===void 0?(0,N6.checkNullableObject)(e,r):[t.let("valid",!1),!0];t.if(h,()=>t.assign(c,!0).block(()=>{y(u,"properties",!0),y(f,"optionalProperties"),s||_()})),e.pass(c);function d(){let g=n.properties,m=n.optionalProperties;if(!(g&&m))return!1;for(let P in g)if(Object.prototype.hasOwnProperty.call(m,P))return!0;return!1}function p(g){let m=n[g],P=m?(0,dy.allSchemaProperties)(m):[];if(i.jtdDiscriminator&&P.some(E=>E===i.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${g}`);let $=P.filter(E=>!(0,T1.alwaysValidSchema)(i,m[E]));return[P,$]}function y(g,m,P){let $=t.var("valid");for(let O of g)t.if((0,dy.propertyInData)(t,r,O,i.opts.ownProperties),()=>w(O,m,$),()=>E(O)),e.ok($);function E(O){P?(t.assign($,!1),e.error(!1,{propError:po.Missing,missingProperty:O},{schemaPath:O})):t.assign($,!0)}}function w(g,m,P){e.subschema({keyword:m,schemaProp:g,dataProp:g},P)}function _(){t.forIn("key",r,g=>{let m=S(g,a,"properties",i.jtdDiscriminator),P=S(g,l,"optionalProperties"),$=m===!0?P:P===!0?m:(0,Gn.and)(m,P);t.if($,()=>{i.opts.removeAdditional?t.code((0,Gn._)`delete ${r}[${g}]`):(e.error(!1,{propError:po.Additional,additionalProperty:g},{instancePath:g,parentSchema:!0}),i.opts.allErrors||t.break())})})}function S(g,m,P,$){let E;if(m.length>8){let O=(0,T1.schemaRefOrVal)(i,n[P],P);E=(0,Gn.not)((0,dy.isOwnProperty)(t,O,g)),$!==void 0&&(E=(0,Gn.and)(E,(0,Gn._)`${g} !== ${$}`))}else if(m.length||$!==void 0){let O=$===void 0?m:[$].concat(m);E=(0,Gn.and)(...O.map(k=>(0,Gn._)`${g} !== ${k}`))}else E=!0;return E}}Ei.validateProperties=A1;Ei.default=k6});var C1=v(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});var $1=py(),x6={keyword:"optionalProperties",schemaType:"object",error:$1.error,code(e){e.parentSchema.properties||(0,$1.validateProperties)(e)}};my.default=x6});var N1=v(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});var us=Z(),q6=Bn(),j6=ho(),I1=lo(),Df=Hp(),D6={message:e=>{let{schema:t,params:r}=e;return r.discrError?r.discrError===Df.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,I1.typeErrorMessage)(e,"object")},params:e=>{let{schema:t,params:r}=e;return r.discrError?(0,us._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,I1.typeErrorParams)(e,"object")}},L6={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:D6,code(e){(0,q6.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:i}=e,[s,o]=(0,j6.checkNullableObject)(e,r);t.if(o),a(),t.elseIf((0,us.not)(s)),e.error(),t.endIf(),e.ok(s);function a(){let f=t.const("tag",(0,us._)`${r}${(0,us.getProperty)(n)}`);t.if((0,us._)`${f} === undefined`),e.error(!1,{discrError:Df.DiscrError.Tag,tag:f}),t.elseIf((0,us._)`typeof ${f} == "string"`),u(f),t.else(),e.error(!1,{discrError:Df.DiscrError.Tag,tag:f},{instancePath:n}),t.endIf()}function u(f){t.if(!1);for(let c in i.mapping)t.elseIf((0,us._)`${f} === ${c}`),t.assign(s,l(c));t.else(),e.error(!1,{discrError:Df.DiscrError.Mapping,tag:f},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function l(f){let c=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:f,jtdDiscriminator:n},c),c}}};yy.default=L6});var x1=v(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});var k1=oe(),Lf=Z(),F6=Bn(),z6=ho(),M6=lo(),H6={keyword:"values",schemaType:"object",error:(0,M6.typeError)("object"),code(e){(0,F6.checkMetadata)(e);let{gen:t,data:r,schema:n,it:i}=e,[s,o]=(0,z6.checkNullableObject)(e,r);(0,k1.alwaysValidSchema)(i,n)?t.if((0,Lf.not)((0,Lf.or)(o,s)),()=>e.error()):(t.if(o),t.assign(s,a()),t.elseIf((0,Lf.not)(s)),e.error(),t.endIf()),e.ok(s);function a(){let u=t.name("valid");if(i.allErrors){let f=t.let("valid",!0);return l(()=>t.assign(f,!1)),f}return t.var(u,!0),l(()=>t.break()),u;function l(f){t.forIn("key",r,c=>{e.subschema({keyword:"values",dataProp:c,dataPropType:k1.Type.Str},u),t.if((0,Lf.not)(u),f)})}}}};gy.default=H6});var q1=v(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});var V6=xt(),U6={keyword:"union",schemaType:"array",trackErrors:!0,code:V6.validateUnion,error:{message:"must match a schema in union"}};vy.default=U6});var j1=v(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});var B6=qf(),G6=fy(),K6=E1(),J6=P1(),Y6=py(),W6=C1(),X6=N1(),Q6=x1(),Z6=q1(),eG=Bn(),tG=["definitions",B6.default,G6.default,K6.default,J6.default,Y6.default,W6.default,X6.default,Q6.default,Z6.default,eG.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];_y.default=tG});var z1=v(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});var Kn=e=>{let t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},rG=e=>({optionalProperties:Kn(e)}),nG=e=>({properties:{ref:{type:"string"}},optionalProperties:Kn(e)}),iG=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Kn(e)}),sG=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Kn(e)}),oG=e=>({properties:{elements:{ref:"schema"}},optionalProperties:Kn(e)}),L1=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Kn(e)}}),F1=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Kn(e)}}),aG=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[L1(!1),F1(!1)]}}}},optionalProperties:Kn(e)}),uG=e=>({properties:{values:{ref:"schema"}},optionalProperties:Kn(e)}),D1=e=>({metadata:{union:[rG,nG,iG,sG,oG,L1,F1,aG,uG].map(t=>t(e))}}),lG={definitions:{schema:D1(!1)},...D1(!0)};wy.default=lG});var Sy=v(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.jtdForms=void 0;Ff.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var H1=v(Ey=>{"use strict";Object.defineProperty(Ey,"__esModule",{value:!0});var by=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,fG={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function M1(e){return by.lastIndex=0,'"'+(by.test(e)?e.replace(by,t=>{let r=fG[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}Ey.default=M1;M1.code='require("ajv/dist/runtime/quote").default'});var J1=v(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});var cG=Sy(),U1=Xi(),de=Z(),hG=yi(),je=kr(),dG=xt(),pG=qf(),mG=oe(),yG=H1(),gG={elements:_G,values:wG,discriminator:SG,properties:V1,optionalProperties:V1,enum:au,type:bG,ref:RG};function B1(e,t){let r=U1.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new de.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:je.default.data},l;try{this._compilations.add(e),e.serializeName=a,o.func(a,je.default.data,!1,()=>{o.let(je.default.json,(0,de.str)``),uu(u),o.return(je.default.json)}),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(je.default.scope)}return ${f}`;let h=new Function(`${je.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),e.serialize=h}catch(f){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete e.serialize,delete e.serializeName,f}finally{this._compilations.delete(e)}return e}Py.default=B1;function uu(e){let t;for(let r of cG.jtdForms)if(r in e.schema){t=r;break}vG(e,t?gG[t]:TG)}function vG(e,t){let{gen:r,schema:n,data:i}=e;if(!n.nullable)return t(e);r.if((0,de._)`${i} === undefined || ${i} === null`,()=>r.add(je.default.json,(0,de._)`"null"`),()=>t(e))}function _G(e){let{gen:t,schema:r,data:n}=e;t.add(je.default.json,(0,de.str)`[`);let i=t.let("first",!0);t.forOf("el",n,s=>{Ry(e,i),uu({...e,schema:r.elements,data:s})}),t.add(je.default.json,(0,de.str)`]`)}function wG(e){let{gen:t,schema:r,data:n}=e;t.add(je.default.json,(0,de.str)`{`);let i=t.let("first",!0);t.forIn("key",n,s=>G1(e,s,r.values,i)),t.add(je.default.json,(0,de.str)`}`)}function G1(e,t,r,n){let{gen:i,data:s}=e;Ry(e,n),au({...e,data:t}),i.add(je.default.json,(0,de.str)`:`);let o=i.const("value",(0,de._)`${s}${(0,de.getProperty)(t)}`);uu({...e,schema:r,data:o})}function SG(e){let{gen:t,schema:r,data:n}=e,{discriminator:i}=r;t.add(je.default.json,(0,de.str)`{${JSON.stringify(i)}:`);let s=t.const("tag",(0,de._)`${n}${(0,de.getProperty)(i)}`);au({...e,data:s}),t.if(!1);for(let o in r.mapping){t.elseIf((0,de._)`${s} === ${o}`);let a=r.mapping[o];K1({...e,schema:a},i)}t.endIf(),t.add(je.default.json,(0,de.str)`}`)}function V1(e){let{gen:t}=e;t.add(je.default.json,(0,de.str)`{`),K1(e),t.add(je.default.json,(0,de.str)`}`)}function K1(e,t){let{gen:r,schema:n,data:i}=e,{properties:s,optionalProperties:o}=n,a=h(s),u=h(o),l=d(a.concat(u)),f=!t,c;for(let _ of a)f?f=!1:r.add(je.default.json,(0,de.str)`,`),y(_,s[_],p(_));f&&(c=r.let("first",!0));for(let _ of u){let S=p(_);r.if((0,de.and)((0,de._)`${S} !== undefined`,(0,dG.isOwnProperty)(r,i,_)),()=>{Ry(e,c),y(_,o[_],S)})}n.additionalProperties&&r.forIn("key",i,_=>r.if(w(_,l),()=>G1(e,_,{},c)));function h(_){return _?Object.keys(_):[]}function d(_){if(t&&_.push(t),new Set(_).size!==_.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return _}function p(_){return r.const("value",(0,de._)`${i}${(0,de.getProperty)(_)}`)}function y(_,S,g){r.add(je.default.json,(0,de.str)`${JSON.stringify(_)}:`),uu({...e,schema:S,data:g})}function w(_,S){return S.length?(0,de.and)(...S.map(g=>(0,de._)`${_} !== ${g}`)):!0}}function bG(e){let{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(je.default.json,(0,de._)`${n} ? "true" : "false"`);break;case"string":au(e);break;case"timestamp":t.if((0,de._)`${n} instanceof Date`,()=>t.add(je.default.json,(0,de._)`'"' + ${n}.toISOString() + '"'`),()=>au(e));break;default:EG(e)}}function au({gen:e,data:t}){e.add(je.default.json,(0,de._)`${(0,mG.useFunc)(e,yG.default)}(${t})`)}function EG({gen:e,data:t}){e.add(je.default.json,(0,de._)`"" + ${t}`)}function RG(e){let{gen:t,self:r,data:n,definitions:i,schema:s,schemaEnv:o}=e,{ref:a}=s,u=i[a];if(!u)throw new hG.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,pG.hasRef)(u))return uu({...e,schema:u});let{root:l}=o,f=B1.call(r,new U1.SchemaEnv({schema:u,root:l}),i);t.add(je.default.json,(0,de._)`${PG(t,f)}(${n})`)}function PG(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,de._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function TG({gen:e,data:t}){e.add(je.default.json,(0,de._)`JSON.stringify(${t})`)}function Ry({gen:e},t){t?e.if(t,()=>e.assign(t,!1),()=>e.add(je.default.json,(0,de.str)`,`)):e.add(je.default.json,(0,de.str)`,`)}});var W1=v(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.parseJsonString=Pi.parseJsonNumber=Pi.parseJson=void 0;var OG=/position\s(\d+)$/;function Jn(e,t){let r;Jn.message=void 0;let n;t&&(e=e.slice(t));try{return Jn.position=t+e.length,JSON.parse(e)}catch(i){if(n=OG.exec(i.message),!n){Jn.message="unexpected end";return}r=+n[1];let s=e[r];e=e.slice(0,r),Jn.position=t+r;try{return JSON.parse(e)}catch{Jn.message=`unexpected token ${s}`;return}}}Pi.parseJson=Jn;Jn.message=void 0;Jn.position=0;Jn.code='require("ajv/dist/runtime/parseJson").parseJson';function Yn(e,t,r){let n="",i;if(Yn.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!s(r)){o();return}if(r)return Yn.position=t,+n;if(e[t]==="."&&(n+=".",t++,!s())){o();return}if(i=e[t],(i==="e"||i==="E")&&(n+="e",t++,i=e[t],(i==="+"||i==="-")&&(n+=i,t++),!s())){o();return}return Yn.position=t,+n;function s(a){let u=!1;for(;i=e[t],i>="0"&&i<="9"&&(a===void 0||a-- >0);)u=!0,n+=i,t++;return u}function o(){Yn.position=t,Yn.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}Pi.parseJsonNumber=Yn;Yn.message=void 0;Yn.position=0;Yn.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var Y1={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},AG="a".charCodeAt(0),$G="0".charCodeAt(0);function Ri(e,t){let r="",n;for(Ri.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in Y1)r+=Y1[n],t++;else if(n==="u"){t++;let s=4,o=0;for(;s--;){if(o<<=4,n=e[t],n===void 0){i("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-AG+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-$G;else{i(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(o)}else{i(`unexpected token ${n}`);return}else if(n===void 0){i("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{i(`unexpected token ${n}`);return}return Ri.position=t,r;function i(s){Ri.position=t,Ri.message=s}}Pi.parseJsonString=Ri;Ri.message=void 0;Ri.position=0;Ri.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var aO=v(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});var CG=Sy(),eO=Xi(),W=Z(),IG=yi(),he=kr(),NG=xt(),kG=qf(),xG=fy(),Ay=W1(),tO=oe(),qG=ly(),jG={elements:zG,values:MG,discriminator:VG,properties:X1,optionalProperties:X1,enum:BG,type:UG,ref:GG};function rO(e,t){let r=eO.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new W.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("parse"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:he.default.data,parseName:a,char:o.name("c")},l;try{this._compilations.add(e),e.parseName=a,DG(u),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(he.default.scope)}return ${f}`;let h=new Function(`${he.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),e.parse=h}catch(f){throw l&&this.logger.error("Error compiling parser, function code:",l),delete e.parse,delete e.parseName,f}finally{this._compilations.delete(e)}return e}ky.default=rO;var Oy=(0,W._)`undefined`;function DG(e){let{gen:t,parseName:r,char:n}=e;t.func(r,(0,W._)`${he.default.json}, ${he.default.jsonPos}, ${he.default.jsonPart}`,!1,()=>{t.let(he.default.data),t.let(n),t.assign((0,W._)`${r}.message`,Oy),t.assign((0,W._)`${r}.position`,Oy),t.assign(he.default.jsonPos,(0,W._)`${he.default.jsonPos} || 0`),t.const(he.default.jsonLen,(0,W._)`${he.default.json}.length`),zf(e),Ny(e),t.if(he.default.jsonPart,()=>{t.assign((0,W._)`${r}.position`,he.default.jsonPos),t.return(he.default.data)}),t.if((0,W._)`${he.default.jsonPos} === ${he.default.jsonLen}`,()=>t.return(he.default.data)),mo(e)})}function zf(e){let t;for(let r of CG.jtdForms)if(r in e.schema){t=r;break}t?FG(e,jG[t]):Cy(e)}var LG=Z1(!0,Z1(!1,mo));function FG(e,t){let{gen:r,schema:n,data:i}=e;if(!n.nullable)return t(e);lu(e,"null",t,()=>r.assign(i,null))}function zG(e){let{gen:t,schema:r,data:n}=e;pn(e,"[");let i=t.let("i",0);t.assign(n,(0,W._)`[]`),$y(e,"]",()=>{let s=t.let("el");zf({...e,schema:r.elements,data:s}),t.assign((0,W._)`${n}[${i}++]`,s)})}function MG(e){let{gen:t,schema:r,data:n}=e;pn(e,"{"),t.assign(n,(0,W._)`{}`),$y(e,"}",()=>HG(e,r.values))}function $y(e,t,r){nO(e,t,r),pn(e,t)}function nO(e,t,r){let{gen:n}=e;n.for((0,W._)`;${he.default.jsonPos}<${he.default.jsonLen} && ${Mf(1)}!==${t};`,()=>{r(),lu(e,",",()=>n.break(),i)});function i(){lu(e,t,()=>{},mo)}}function HG(e,t){let{gen:r}=e,n=r.let("key");ls({...e,data:n}),pn(e,":"),sO(e,n,t)}function VG(e){let{gen:t,data:r,schema:n}=e,{discriminator:i,mapping:s}=n;pn(e,"{"),t.assign(r,(0,W._)`{}`);let o=t.const("pos",he.default.jsonPos),a=t.let("value"),u=t.let("tag");nO(e,"}",()=>{let l=t.let("key");ls({...e,data:l}),pn(e,":"),t.if((0,W._)`${l} === ${i}`,()=>{ls({...e,data:u}),t.assign((0,W._)`${r}[${l}]`,u),t.break()},()=>Cy({...e,data:a}))}),t.assign(he.default.jsonPos,o),t.if((0,W._)`${u} === undefined`),Wn(e,(0,W.str)`discriminator tag not found`);for(let l in s)t.elseIf((0,W._)`${u} === ${l}`),iO({...e,schema:s[l]},i);t.else(),Wn(e,(0,W.str)`discriminator value not in schema`),t.endIf()}function X1(e){let{gen:t,data:r}=e;pn(e,"{"),t.assign(r,(0,W._)`{}`),iO(e)}function iO(e,t){let{gen:r,schema:n,data:i}=e,{properties:s,optionalProperties:o,additionalProperties:a}=n;if($y(e,"}",()=>{let u=r.let("key");if(ls({...e,data:u}),pn(e,":"),r.if(!1),Q1(e,u,s),Q1(e,u,o),t){r.elseIf((0,W._)`${u} === ${t}`);let l=r.let("tag");ls({...e,data:l})}r.else(),a?Cy({...e,data:(0,W._)`${i}[${u}]`}):Wn(e,(0,W.str)`property ${u} not allowed`),r.endIf()}),s){let u=(0,NG.hasPropFunc)(r),l=(0,W.and)(...Object.keys(s).map(f=>(0,W._)`${u}.call(${i}, ${f})`));r.if((0,W.not)(l),()=>Wn(e,(0,W.str)`missing required properties`))}}function Q1(e,t,r={}){let{gen:n}=e;for(let i in r)n.elseIf((0,W._)`${t} === ${i}`),sO(e,t,r[i])}function sO(e,t,r){zf({...e,schema:r,data:(0,W._)`${e.data}[${t}]`})}function UG(e){let{gen:t,schema:r,data:n,self:i}=e;switch(r.type){case"boolean":LG(e);break;case"string":ls(e);break;case"timestamp":{ls(e);let s=(0,tO.useFunc)(t,qG.default),{allowDate:o,parseDate:a}=i.opts,u=o?(0,W._)`!${s}(${n}, true)`:(0,W._)`!${s}(${n})`,l=a?(0,W.or)(u,(0,W._)`(${n} = new Date(${n}), false)`,(0,W._)`isNaN(${n}.valueOf())`):u;t.if(l,()=>Wn(e,(0,W.str)`invalid timestamp`));break}case"float32":case"float64":Ty(e);break;default:{let s=r.type;if(!i.opts.int32range&&(s==="int32"||s==="uint32"))Ty(e,16),s==="uint32"&&t.if((0,W._)`${n} < 0`,()=>Wn(e,(0,W.str)`integer out of range`));else{let[o,a,u]=xG.intRange[s];Ty(e,u),t.if((0,W._)`${n} < ${o} || ${n} > ${a}`,()=>Wn(e,(0,W.str)`integer out of range`))}}}}function ls(e){pn(e,'"'),Iy(e,Ay.parseJsonString)}function BG(e){let{gen:t,data:r,schema:n}=e,i=n.enum;pn(e,'"'),t.if(!1);for(let s of i){let o=JSON.stringify(s).slice(1);t.elseIf((0,W._)`${Mf(o.length)} === ${o}`),t.assign(r,(0,W.str)`${s}`),t.add(he.default.jsonPos,o.length)}t.else(),mo(e),t.endIf()}function Ty(e,t){let{gen:r}=e;Ny(e),r.if((0,W._)`"-0123456789".indexOf(${Mf(1)}) < 0`,()=>mo(e),()=>Iy(e,Ay.parseJsonNumber,t))}function Z1(e,t){return r=>{let{gen:n,data:i}=r;lu(r,`${e}`,()=>t(r),()=>n.assign(i,e))}}function GG(e){let{gen:t,self:r,definitions:n,schema:i,schemaEnv:s}=e,{ref:o}=i,a=n[o];if(!a)throw new IG.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,kG.hasRef)(a))return zf({...e,schema:a});let{root:u}=s,l=rO.call(r,new eO.SchemaEnv({schema:a,root:u}),n);oO(e,KG(t,l),!0)}function KG(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,W._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function Cy(e){Iy(e,Ay.parseJson)}function Iy(e,t,r){oO(e,(0,tO.useFunc)(e.gen,t),r)}function oO(e,t,r){let{gen:n,data:i}=e;n.assign(i,(0,W._)`${t}(${he.default.json}, ${he.default.jsonPos}${r?(0,W._)`, ${r}`:W.nil})`),n.assign(he.default.jsonPos,(0,W._)`${t}.position`),n.if((0,W._)`${i} === undefined`,()=>Wn(e,(0,W._)`${t}.message`))}function pn(e,t){lu(e,t,mo)}function lu(e,t,r,n){let{gen:i}=e,s=t.length;Ny(e),i.if((0,W._)`${Mf(s)} === ${t}`,()=>{i.add(he.default.jsonPos,s),n==null||n(e)},()=>r(e))}function Ny({gen:e,char:t}){e.code((0,W._)`while((${t}=${he.default.json}[${he.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${he.default.jsonPos}++;`)}function Mf(e){return e===1?(0,W._)`${he.default.json}[${he.default.jsonPos}]`:(0,W._)`${he.default.json}.slice(${he.default.jsonPos}, ${he.default.jsonPos}+${e})`}function mo(e){Wn(e,(0,W._)`"unexpected token " + ${he.default.json}[${he.default.jsonPos}]`)}function Wn({gen:e,parseName:t},r){e.assign((0,W._)`${t}.message`,r),e.assign((0,W._)`${t}.position`,he.default.jsonPos),e.return(Oy)}});var qy=v((We,uO)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.MissingRefError=We.ValidationError=We.CodeGen=We.Name=We.nil=We.stringify=We.str=We._=We.KeywordCxt=void 0;var JG=ep(),YG=j1(),WG=z1(),XG=J1(),QG=aO(),xy="JTD-meta-schema",Hf=class extends JG.default{constructor(t={}){super({...t,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(YG.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(WG.default,xy,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(xy)?xy:void 0)}compileSerializer(t){let r=this._addSchema(t);return r.serialize||this._compileSerializer(r)}compileParser(t){let r=this._addSchema(t);return r.parse||this._compileParser(r)}_compileSerializer(t){if(XG.default.call(this,t,t.schema.definitions||{}),!t.serialize)throw new Error("ajv implementation error");return t.serialize}_compileParser(t){if(QG.default.call(this,t,t.schema.definitions||{}),!t.parse)throw new Error("ajv implementation error");return t.parse}};uO.exports=We=Hf;Object.defineProperty(We,"__esModule",{value:!0});We.default=Hf;var ZG=Us();Object.defineProperty(We,"KeywordCxt",{enumerable:!0,get:function(){return ZG.KeywordCxt}});var yo=Z();Object.defineProperty(We,"_",{enumerable:!0,get:function(){return yo._}});Object.defineProperty(We,"str",{enumerable:!0,get:function(){return yo.str}});Object.defineProperty(We,"stringify",{enumerable:!0,get:function(){return yo.stringify}});Object.defineProperty(We,"nil",{enumerable:!0,get:function(){return yo.nil}});Object.defineProperty(We,"Name",{enumerable:!0,get:function(){return yo.Name}});Object.defineProperty(We,"CodeGen",{enumerable:!0,get:function(){return yo.CodeGen}});var e8=_a();Object.defineProperty(We,"ValidationError",{enumerable:!0,get:function(){return e8.default}});var t8=yi();Object.defineProperty(We,"MissingRefError",{enumerable:!0,get:function(){return t8.default}})});var jy=v((Nte,lO)=>{"use strict";var r8=Jp();lO.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:r8,addUsedSchema:!1,allErrors:!1})});var hO=v((kte,cO)=>{"use strict";var n8=Wl().default,i8=qy(),fO=jy(),Dy=class{constructor(t,r){r.mode==="JTD"?this.ajv=new i8(Object.assign({},fO,r.customOptions)):this.ajv=new n8(Object.assign({},fO,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let s of r.plugins)Array.isArray(s)?(n=n&&s[0].name!=="formatsPlugin",s[0](this.ajv,s[1])):(n=n&&s.name!=="formatsPlugin",s(this.ajv));n&&tm()(this.ajv);let i=Object.values(t);for(let s of i)this.ajv.addSchema(s)}buildValidatorFunction({schema:t}){if(t.$id){let r=this.ajv.getSchema(t.$id);if(r)return r}return this.ajv.compile(t)}};cO.exports=Dy});var pO=v((xte,dO)=>{"use strict";var s8=qy(),o8=jy(),Ly=class{constructor(t,r){this.ajv=new s8(Object.assign({},o8,r))}buildSerializerFunction({schema:t}){return this.ajv.compileSerializer(t)}};dO.exports=Ly});var gO=v((cu,yO)=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var fu=El(),Qr=js();function mO(e,t){if(!e.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=e.scope.opts;return typeof t=="function"?i(t.source):t!==void 0?s(t,n):s(e.schemas,a=>a.meta?void 0:e.compile(a.schema));function n(a){let u=e.getSchema(a);if(!u)throw new Error(`moduleCode: no schema with id ${a}`);return u}function i(a){let u={},l=a==null?void 0:a.validateName,f=o(u,a);return e.opts.code.esm?`"use strict";${r}export const validate = ${l};${r}export default ${l};${r}${f}`:`"use strict";${r}module.exports = ${l};${r}module.exports.default = ${l};${r}${f}`}function s(a,u){var l;let f={},c=(0,Qr._)`"use strict";`;for(let h in a){let d=u(a[h]);if(d){let p=o(f,d.source),y=e.opts.code.esm?(0,Qr._)`export const ${(0,Qr.getEsmExportName)(h)}`:(0,Qr._)`exports${(0,Qr.getProperty)(h)}`;c=(0,Qr._)`${c}${r}${y} = ${(l=d.source)===null||l===void 0?void 0:l.validateName};${r}${p}`}}return`${c}`}function o(a,u){if(!u)throw new Error('moduleCode: function does not have "source" property');if(h(u.validateName)===fu.UsedValueState.Completed)return Qr.nil;d(u.validateName,fu.UsedValueState.Started);let l=e.scope.scopeCode(u.scopeValues,a,c),f=new Qr._Code(`${l}${r}${u.validateCode}`);return u.evaluated?(0,Qr._)`${f}${u.validateName}.evaluated = ${u.evaluated};${r}`:f;function c(p){var y;let w=(y=p.value)===null||y===void 0?void 0:y.ref;if(p.prefix==="validate"&&typeof w=="function")return o(a,w.source);if((p.prefix==="root"||p.prefix==="wrapper")&&typeof w=="object"){let{validate:_,validateName:S}=w;if(!S)throw new Error("ajv internal error");let g=e.opts.code.es5?fu.varKinds.var:fu.varKinds.const,m=(0,Qr._)`${g} ${p} = {validate: ${S}};`;if(h(S)===fu.UsedValueState.Started)return m;let P=o(a,_==null?void 0:_.source);return(0,Qr._)`${m}${r}${P}`}}function h(p){var y;return(y=a[p.prefix])===null||y===void 0?void 0:y.get(p)}function d(p,y){let{prefix:w}=p;(a[w]=a[w]||new Map).set(p,y)}}}yO.exports=cu=mO;Object.defineProperty(cu,"__esModule",{value:!0});cu.default=mO});var wO=v((qte,_O)=>{"use strict";var vO=Fy(),a8=gO().default;function u8(e={readMode:!0}){if(e.readMode===!0&&!e.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(e.readMode!==!0&&!e.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=vO();return function(n,i={}){(!i.customOptions||!i.customOptions.code)&&(i.customOptions=Object.assign({},i.customOptions,{code:{source:!0}}));let s=t(n,i);return function(o){let a=s(o),u=a8(s[vO.AjvReference].ajv,a);return e.storeFunction(o,u),a}}}_O.exports=u8});var Fy=v((jte,go)=>{"use strict";var bO=Symbol.for("fastify.ajv-compiler.reference"),l8=hO(),f8=pO();function zy(e){let t=new Map,r=new Map;return e&&e.jtdSerializer===!0?function(i,s){let o=SO({},s);if(r.has(o))return r.get(o);let a=new f8(i,s),u=a.buildSerializerFunction.bind(a);return r.set(o,u),u}:function(i,s){let o=SO(i,s.customOptions);if(t.has(o))return t.get(o);let a=new l8(i,s),u=a.buildValidatorFunction.bind(a);return t.set(o,u),s.customOptions.code!==void 0&&(u[bO]=a),u}}function SO(e,t){let r=JSON.stringify(e),n=JSON.stringify(t);return`${r}${n}`}go.exports=zy;go.exports.default=zy;go.exports.AjvCompiler=zy;go.exports.AjvReference=bO;go.exports.StandaloneValidator=wO()});var My=v((Dte,EO)=>{"use strict";var{buildSchemas:c8}=sa(),h8=sy(),d8=Fy();function p8(e,t){var i,s;if(e)return new vo(e,t);let r=Object.assign({buildValidator:null,buildSerializer:null},t==null?void 0:t.compilersFactory);r.buildValidator||(r.buildValidator=d8()),r.buildSerializer||(r.buildSerializer=h8());let n={bucket:t&&t.bucket||c8,compilersFactory:r,isCustomValidatorCompiler:typeof((i=t==null?void 0:t.compilersFactory)==null?void 0:i.buildValidator)=="function",isCustomSerializerCompiler:typeof((s=t==null?void 0:t.compilersFactory)==null?void 0:s.buildValidator)=="function"};return new vo(void 0,n)}var vo=class{constructor(t,r){this.opts=r||t&&t.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1,t?(this.schemaBucket=this.opts.bucket(t.getSchemas()),this.validatorCompiler=t.getValidatorCompiler(),this.serializerCompiler=t.getSerializerCompiler(),this.isCustomValidatorCompiler=t.isCustomValidatorCompiler,this.isCustomSerializerCompiler=t.isCustomSerializerCompiler,this.parent=t):this.schemaBucket=this.opts.bucket()}add(t){return this.addedSchemas=!0,this.schemaBucket.add(t)}getSchema(t){return this.schemaBucket.getSchema(t)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(t){this.validatorCompiler=t,this.isCustomValidatorCompiler=!0}setSerializerCompiler(t){this.serializerCompiler=t,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(t){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),t.ajv))}setupSerializer(t){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),t.serializerOpts))}};vo.buildSchemaController=p8;EO.exports=vo});var Ky=v((Lte,Gy)=>{"use strict";var Hy=km(),Uy=require("assert"),By=Symbol.for("registered-plugin"),{kTestInternals:m8}=Et(),{exist:y8,existReply:g8,existRequest:v8}=Vm(),{FST_ERR_PLUGIN_VERSION_MISMATCH:_8,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:w8}=zt();function hu(e){return e[Symbol.for("plugin-meta")]}function S8(e){let t=RO(e);if(t)return t;let r=require.cache,n=Object.keys(r);for(let i=0;i<n.length;i++){let s=n[i];if(r[s].exports===e)return s}return e.name?e.name:null}function b8(e){return e.toString().split(`
`).slice(0,2).map(t=>t.trim()).join(" -- ")}function RO(e){return e[Symbol.for("fastify.display-name")]}function PO(e){return!!e[Symbol.for("skip-override")]}function TO(e){let t=hu(e);if(!t)return;let r=t.dependencies;r&&(Uy(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{Uy(this[By].indexOf(n)>-1,`The dependency '${n}' of plugin '${t.name}' is not registered`)}))}function OO(e){let t=hu(e);if(!t)return;let{decorators:r,name:n}=t;r&&(r.fastify&&Vy(this,"Fastify",r.fastify,n),r.reply&&Vy(this,"Reply",r.reply,n),r.request&&Vy(this,"Request",r.request,n))}var E8={Fastify:y8,Request:v8,Reply:g8};function Vy(e,t,r,n){Uy(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(i=>{let s=typeof n=="string"?` required by '${n}'`:"";if(!E8[t].call(e,i))throw new w8(i,s,t)})}function R8(e){let t=hu(e);if(!t)return;let r=t.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&Hy.gt(this.version,Hy.coerce(r))===!0)&&r&&Hy.satisfies(this.version,r,{includePrerelease:n})===!1)throw new _8(t.name,r,this.version)}function P8(e){let t=hu(e);if(!t)return;let r=t.name;r&&this[By].push(r)}function T8(e){return P8.call(this,e),R8.call(this,e),OO.call(this,e),TO.call(this,e),PO(e)}Gy.exports={getPluginName:S8,getFuncPreview:b8,registeredPlugins:By,getDisplayName:RO,registerPlugin:T8};Gy.exports[m8]={shouldSkipOverride:PO,getMeta:hu,checkDecorators:OO,checkDependencies:TO}});var $O=v((Fte,AO)=>{"use strict";function O8(e,t){let n=0;function i(o){return n=n+1&2147483647,`req-${n.toString(36)}`}let s=t||i;return e?function(o){return o.headers[e]||s(o)}:s}AO.exports={reqIdGenFactory:O8}});var kO=v((zte,NO)=>{"use strict";var CO=12,A8=0,Jy=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function $8(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,n="",i=0,s=0,o=t,a=CO;t>-1&&t<r;){var u=IO(e[t+1],4),l=IO(e[t+2],0),f=u|l,c=Jy[f];if(a=Jy[256+a+c],s=s<<6|f&Jy[364+c],a===CO)n+=e.slice(i,o),n+=s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(s&1023)),s=0,i=t+3,t=o=e.indexOf("%",i);else{if(a===A8)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return n+e.slice(i)}var C8={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function IO(e,t){var r=C8[e];return r===void 0?255:r<<t}NO.exports=$8});var LO=v((Mte,DO)=>{"use strict";var xO=kO(),qO=/\+/g,jO=function(){};jO.prototype=Object.create(null);function I8(e){let t=new jO;if(typeof e!="string")return t;let r=e.length,n="",i="",s=-1,o=-1,a=!1,u=!1,l=!1,f=!1,c=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?e.charCodeAt(d):38,h===38){if(c=o>s,c||(o=d),n=e.slice(s+1,o),c||n.length>0){l&&(n=n.replace(qO," ")),a&&(n=xO(n)||n),c&&(i=e.slice(o+1,d),f&&(i=i.replace(qO," ")),u&&(i=xO(i)||i));let p=t[n];p===void 0?t[n]=i:p.pop?p.push(i):t[n]=[p,i]}i="",s=d,o=d,a=!1,u=!1,l=!1,f=!1}else h===61?o<=s?o=d:u=!0:h===43?o>s?f=!0:l=!0:h===37&&(o>s?u=!0:a=!0);return t}DO.exports=I8});var zO=v((Hte,FO)=>{var mn=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),N8=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function k8(e){let t=e.length;if(t===0)return"";let r="",n=0,i=0;e:for(;i<t;i++){let s=e.charCodeAt(i);for(;s<128;){if(N8[s]!==1&&(n<i&&(r+=e.slice(n,i)),n=i+1,r+=mn[s]),++i===t)break e;s=e.charCodeAt(i)}if(n<i&&(r+=e.slice(n,i)),s<2048){n=i+1,r+=mn[192|s>>6]+mn[128|s&63];continue}if(s<55296||s>=57344){n=i+1,r+=mn[224|s>>12]+mn[128|s>>6&63]+mn[128|s&63];continue}if(++i,i>=t)throw new Error("URI malformed");let o=e.charCodeAt(i)&1023;n=i+1,s=65536+((s&1023)<<10|o),r+=mn[240|s>>18]+mn[128|s>>12&63]+mn[128|s>>6&63]+mn[128|s&63]}return n===0?e:n<t?r+e.slice(n):r}FO.exports={encodeString:k8}});var VO=v((Vte,HO)=>{"use strict";var{encodeString:Yy}=zO();function MO(e){let t=typeof e;return t==="string"?Yy(e):t==="bigint"?e.toString():t==="boolean"?e?"true":"false":t==="number"&&Number.isFinite(e)?e<1e21?""+e:Yy(""+e):""}function x8(e){let t="";if(e===null||typeof e!="object")return t;let r="&",n=Object.keys(e),i=n.length,s=0;for(let o=0;o<i;o++){let a=n[o],u=e[a],l=Yy(a)+"=";if(o&&(t+=r),Array.isArray(u)){s=u.length;for(let f=0;f<s;f++)f&&(t+=r),t+=l,t+=MO(u[f])}else t+=l,t+=MO(u)}return t}HO.exports=x8});var KO=v((Ute,du)=>{"use strict";var UO=LO(),BO=VO(),GO={parse:UO,stringify:BO};du.exports=GO;du.exports.default=GO;du.exports.parse=UO;du.exports.stringify=BO});var pu=v((Bte,JO)=>{JO.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var Xy=v(Ti=>{var Oe=pu(),Wy=()=>[{type:Oe.RANGE,from:48,to:57}],YO=()=>[{type:Oe.CHAR,value:95},{type:Oe.RANGE,from:97,to:122},{type:Oe.RANGE,from:65,to:90}].concat(Wy()),WO=()=>[{type:Oe.CHAR,value:9},{type:Oe.CHAR,value:10},{type:Oe.CHAR,value:11},{type:Oe.CHAR,value:12},{type:Oe.CHAR,value:13},{type:Oe.CHAR,value:32},{type:Oe.CHAR,value:160},{type:Oe.CHAR,value:5760},{type:Oe.RANGE,from:8192,to:8202},{type:Oe.CHAR,value:8232},{type:Oe.CHAR,value:8233},{type:Oe.CHAR,value:8239},{type:Oe.CHAR,value:8287},{type:Oe.CHAR,value:12288},{type:Oe.CHAR,value:65279}],q8=()=>[{type:Oe.CHAR,value:10},{type:Oe.CHAR,value:13},{type:Oe.CHAR,value:8232},{type:Oe.CHAR,value:8233}];Ti.words=()=>({type:Oe.SET,set:YO(),not:!1});Ti.notWords=()=>({type:Oe.SET,set:YO(),not:!0});Ti.ints=()=>({type:Oe.SET,set:Wy(),not:!1});Ti.notInts=()=>({type:Oe.SET,set:Wy(),not:!0});Ti.whitespace=()=>({type:Oe.SET,set:WO(),not:!1});Ti.notWhitespace=()=>({type:Oe.SET,set:WO(),not:!0});Ti.anyChar=()=>({type:Oe.SET,set:q8(),not:!0})});var QO=v(mu=>{var XO=pu(),_o=Xy(),j8="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",D8={0:0,t:9,n:10,v:11,f:12,r:13};mu.strToChars=function(e){var t=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return e=e.replace(t,function(r,n,i,s,o,a,u,l){if(i)return r;var f=n?8:s?parseInt(s,16):o?parseInt(o,16):a?parseInt(a,8):u?j8.indexOf(u):D8[l],c=String.fromCharCode(f);return/[[\]{}^$.|?*+()]/.test(c)&&(c="\\"+c),c}),e};mu.tokenizeClass=(e,t)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,i,s;(i=n.exec(e))!=null;)if(i[1])r.push(_o.words());else if(i[2])r.push(_o.ints());else if(i[3])r.push(_o.whitespace());else if(i[4])r.push(_o.notWords());else if(i[5])r.push(_o.notInts());else if(i[6])r.push(_o.notWhitespace());else if(i[7])r.push({type:XO.RANGE,from:(i[8]||i[9]).charCodeAt(0),to:i[10].charCodeAt(0)});else if(s=i[12])r.push({type:XO.CHAR,value:s.charCodeAt(0)});else return[r,n.lastIndex];mu.error(t,"Unterminated character class")};mu.error=(e,t)=>{throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}});var ZO=v(yu=>{var Vf=pu();yu.wordBoundary=()=>({type:Vf.POSITION,value:"b"});yu.nonWordBoundary=()=>({type:Vf.POSITION,value:"B"});yu.begin=()=>({type:Vf.POSITION,value:"^"});yu.end=()=>({type:Vf.POSITION,value:"$"})});var eA=v((Yte,Qy)=>{var wo=QO(),Fr=pu(),fs=Xy(),Uf=ZO();Qy.exports=e=>{var t=0,r,n,i={type:Fr.ROOT,stack:[]},s=i,o=i.stack,a=[],u=_=>{wo.error(e,`Nothing to repeat at column ${_-1}`)},l=wo.strToChars(e);for(r=l.length;t<r;)switch(n=l[t++],n){case"\\":switch(n=l[t++],n){case"b":o.push(Uf.wordBoundary());break;case"B":o.push(Uf.nonWordBoundary());break;case"w":o.push(fs.words());break;case"W":o.push(fs.notWords());break;case"d":o.push(fs.ints());break;case"D":o.push(fs.notInts());break;case"s":o.push(fs.whitespace());break;case"S":o.push(fs.notWhitespace());break;default:/\d/.test(n)?o.push({type:Fr.REFERENCE,value:parseInt(n,10)}):o.push({type:Fr.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(Uf.begin());break;case"$":o.push(Uf.end());break;case"[":var f;l[t]==="^"?(f=!0,t++):f=!1;var c=wo.tokenizeClass(l.slice(t),e);t+=c[1],o.push({type:Fr.SET,set:c[0],not:f});break;case".":o.push(fs.anyChar());break;case"(":var h={type:Fr.GROUP,stack:[],remember:!0};n=l[t],n==="?"&&(n=l[t+1],t+=2,n==="="?h.followedBy=!0:n==="!"?h.notFollowedBy=!0:n!==":"&&wo.error(e,`Invalid group, character '${n}' after '?' at column ${t-1}`),h.remember=!1),o.push(h),a.push(s),s=h,o=h.stack;break;case")":a.length===0&&wo.error(e,`Unmatched ) at column ${t-1}`),s=a.pop(),o=s.options?s.options[s.options.length-1]:s.stack;break;case"|":s.options||(s.options=[s.stack],delete s.stack);var d=[];s.options.push(d),o=d;break;case"{":var p=/^(\d+)(,(\d+)?)?\}/.exec(l.slice(t)),y,w;p!==null?(o.length===0&&u(t),y=parseInt(p[1],10),w=p[2]?p[3]?parseInt(p[3],10):1/0:y,t+=p[0].length,o.push({type:Fr.REPETITION,min:y,max:w,value:o.pop()})):o.push({type:Fr.CHAR,value:123});break;case"?":o.length===0&&u(t),o.push({type:Fr.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&u(t),o.push({type:Fr.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&u(t),o.push({type:Fr.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:Fr.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&wo.error(e,"Unterminated group"),i};Qy.exports.types=Fr});var nA=v((Wte,rA)=>{"use strict";var tA=eA(),L8=tA.types;rA.exports=function(e,t){t||(t={});var r=t.limit===void 0?25:t.limit;F8(e)?e=e.source:typeof e!="string"&&(e=String(e));try{e=tA(e)}catch{return!1}var n=0;return function i(s,o){var a,u,l;if(s.type===L8.REPETITION&&(o++,n++,o>1||n>r))return!1;if(s.options){for(a=0,l=s.options.length;a<l;a++)if(u=i({stack:s.options[a]},o),!u)return!1}var f=s.stack||s.value&&s.value.stack;if(!f)return!0;for(a=0;a<f.length;a++)if(u=i(f[a],o),!u)return!1;return!0}(e,0)};function F8(e){return{}.toString.call(e)==="[object RegExp]"}});var Bf=v((Xte,iA)=>{"use strict";iA.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let e={};return{get:t=>e[t]||null,set:(t,r)=>{e[t]=r}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0}});var cA=v((Qte,fA)=>{"use strict";var sA=Hs(),oA=Bf(),aA=Symbol("treeData");function uA(e,t=""){let r="",n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s],a=i===n.length-1,u=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",l=a?"    ":"\u2502   ",c=(o[aA]||"").split(`
`).join(`
`+t+l);r+=t+u+s+c+`
`,r+=uA(o,t+l)}return r}function z8(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}function lA(e){return Array.isArray(e)?e.map(t=>lA(t)):typeof e=="symbol"?e.toString():typeof e=="function"?z8(e):e}function M8(e,t){if(!t.includeMeta)return{};let r=t.buildPrettyMeta(e),n={},i=t.includeMeta;Array.isArray(i)||(i=Reflect.ownKeys(r));for(let s of i){if(!Object.prototype.hasOwnProperty.call(r,s))continue;let o=s.toString(),a=r[s];if(a!=null){let u=JSON.stringify(lA(a));n[o]=u}}return n}function H8(e){let t="";for(let[r,n]of Object.entries(e))t+=`
\u2022 (${r}) ${n}`;return t}function V8(e){let t={...e.opts.constraints},r=t[oA.name];return delete t[oA.name],{...e,method:r,opts:{constraints:t}}}function U8(e){let t=` (${e.method})`,r=e.opts.constraints||{};return Object.keys(r).length!==0&&(t+=" "+JSON.stringify(r)),t+=H8(e.metaData),t}function B8(e){return e.reduce((t,r)=>{for(let n of t)if(sA(r.opts.constraints,n.opts.constraints)&&sA(r.metaData,n.metaData))return n.method+=", "+r.method,t;return t.push(r),t},[])}function G8(e,t,r){let n=e.routes;return r.method===void 0&&(n=n.map(V8)),n=n.map(i=>(i.metaData=M8(i,r),i)),r.method===void 0&&(n=B8(n)),n.map(U8).join(`
${t}`)}function Gf(e,t,r,n){if((e.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",t=t[r]={},e.isLeafNode&&(t[aA]=G8(e,r,n)),r=""),e.staticChildren)for(let i of Object.values(e.staticChildren))Gf(i,t,r+i.prefix,n);if(e.parametricChildren)for(let i of Object.values(e.parametricChildren)){let s=Array.from(i.nodePaths).join("|");Gf(i,t,r+s,n)}e.wildcardChild&&Gf(e.wildcardChild,t,"*",n)}function K8(e,t){let r={};return Gf(e,r,e.prefix,t),uA(r)}fA.exports={prettyPrintTree:K8}});var dA=v((Zte,hA)=>{"use strict";var J8=Bf(),Zy=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return t===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,r){let n=r.params,i=r.opts.constraints||{},s={params:n,constraints:i,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(i);o.length===0&&(this.unconstrainedHandler=s);for(let u of o)this.constraints.includes(u)||(u==="version"?this.constraints.unshift(u):this.constraints.push(u));let a=o.includes(J8.name);if(!a&&this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(s),this.handlers.sort((u,l)=>Object.keys(u.constraints).length-Object.keys(l.constraints).length),a||this._compileGetHandlerMatchingConstraints(t,i)}_compileCreateParamsObject(t){let r=[];for(let n=0;n<t.length;n++)r.push(`'${t[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,r){for(let n=0;n<this.handlers.length;n++){let s=this.handlers[n].constraints[r];if(s!==void 0){let o=t.get(s)||0;o|=1<<n,t.set(s,o)}}}_constrainedIndexBitmask(t){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[t]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(let n of this.constraints){let i=t.newStoreForConstraint(n);this.constrainedHandlerStores[n]=i,this._buildConstraintStore(i,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let s=t.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${s}
      }
      if (candidates === 0) return null;
      `)}for(let n in t.strategies)t.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};hA.exports=Zy});var mA=v((ere,pA)=>{"use strict";var Y8=dA(),Xf={STATIC:0,PARAMETRIC:1,WILDCARD:2},Kf=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(t,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new Y8),this.isLeafNode=!0,this.routes.push(t),this.handlerStorage.addHandler(r,t)}},Jf=class extends Kf{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,r){let n=this.staticChildren[t.charAt(r)];return n===void 0||!n.matchPrefix(t,r)?null:n}createStaticChild(t){if(t.length===0)return this;let r=this.staticChildren[t.charAt(0)];if(r){let i=1;for(;i<r.prefix.length;i++)if(t.charCodeAt(i)!==r.prefix.charCodeAt(i)){r=r.split(this,i);break}return r.createStaticChild(t.slice(i))}let n=t.charAt(0);return this.staticChildren[n]=new So(t),this.staticChildren[n]}},So=class extends Jf{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=Xf.STATIC,this._compilePrefixMatch()}createParametricChild(t,r,n){let i=t&&t.source,s=this.parametricChildren.find(o=>(o.regex&&o.regex.source)===i);return s?(s.nodePaths.add(n),s):(s=new Yf(t,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((o,a)=>o.isRegex?a.isRegex?o.staticSuffix===null?1:a.staticSuffix===null?-1:a.staticSuffix.endsWith(o.staticSuffix)?1:o.staticSuffix.endsWith(a.staticSuffix)?-1:0:-1:1),s)}createWildcardChild(){return this.wildcardChild?this.wildcardChild:(this.wildcardChild=new Wf,this.wildcardChild)}split(t,r){let n=this.prefix.slice(0,r),i=this.prefix.slice(r);this.prefix=i,this._compilePrefixMatch();let s=new So(n);return s.staticChildren[i.charAt(0)]=this,t.staticChildren[n.charAt(0)]=s,s}getNextNode(t,r,n,i){let s=this.findStaticMatchingChild(t,r),o=0;if(s===null){if(this.parametricChildren.length===0)return this.wildcardChild;s=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return s}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let t=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);t.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}},Yf=class extends Jf{constructor(t,r,n){super(),this.isRegex=!!t,this.regex=t||null,this.staticSuffix=r||null,this.kind=Xf.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(t,r){return this.findStaticMatchingChild(t,r)}},Wf=class extends Kf{constructor(){super(),this.kind=Xf.WILDCARD}getNextNode(){return null}};pA.exports={StaticNode:So,ParametricNode:Yf,WildcardNode:Wf,NODE_TYPES:Xf}});var gA=v((tre,yA)=>{"use strict";var W8=require("assert");function gu(){if(!(this instanceof gu))return new gu;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}gu.prototype.set=function(e,t){if(typeof e!="string")throw new TypeError("Version should be a string");let[r,n,i]=e.split(".");return r=Number(r)||0,n=Number(n)||0,i=Number(i)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=t,this.store[`${r}.x.x`]=t),i>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=i,this.store[`${r}.${n}.x`]=t),this.store[`${r}.${n}.${i}`]=t,this};gu.prototype.get=function(e){return this.store[e]};yA.exports={name:"version",mustMatchWhenDerived:!0,storage:gu,validate(e){W8(typeof e=="string","Version should be a string")}}});var _A=v((rre,vA)=>{"use strict";var X8=require("assert");function Q8(){let e={},t=[];return{get:r=>{let n=e[r];if(n)return n;for(let i of t)if(i.host.test(r))return i.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e[r]=n}}}vA.exports={name:"host",mustMatchWhenDerived:!1,storage:Q8,validate(e){X8(typeof e=="string"||Object.prototype.toString.call(e)==="[object RegExp]","Host should be a string or a RegExp")}}});var SA=v((nre,wA)=>{"use strict";var Z8=gA(),eK=_A(),eg=require("assert"),tg=class{constructor(t){if(this.strategies={version:Z8,host:eK},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,t)for(let r of Object.values(t))this.addConstraintStrategy(r)}isStrategyUsed(t){return this.strategiesInUse.has(t)||this.asyncStrategiesInUse.has(t)}hasConstraintStrategy(t){let r=this.strategies[t];return r!==void 0?r.isCustom||this.isStrategyUsed(t):!1}addConstraintStrategy(t){if(eg(typeof t.name=="string"&&t.name!=="","strategy.name is required."),eg(t.storage&&typeof t.storage=="function","strategy.storage function is required."),eg(t.deriveConstraint&&typeof t.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.isStrategyUsed(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,t.isAsync=t.deriveConstraint.length===3,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,r,n){let i=this.deriveSyncConstraints(t,r);if(n===void 0)return i;this.deriveAsyncConstraints(i,t,r,n)}deriveSyncConstraints(t,r){}noteUsage(t){if(t){let r=this.strategiesInUse.size;for(let n in t)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(let r in t){let n=t[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let i=this.strategies[r];if(!i)throw new Error(`No strategy registered for constraint key ${r}`);i.validate&&i.validate(n)}}deriveAsyncConstraints(t,r,n,i){let s=this.asyncStrategiesInUse.size;if(s===0){i(null,t);return}t=t||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(u,l)=>{if(u!==null){i(u);return}t[o]=l,--s===0&&i(null,t)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let t=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)t.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")t.push("   version: req.headers['accept-version'],");else if(r==="host")t.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}t.push("}"),this.deriveSyncConstraints=new Function("req","ctx",t.join(`
`)).bind(this)}};wA.exports=tg});var EA=v((ire,bA)=>{"use strict";var tK=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];bA.exports=tK});var TA=v((sre,PA)=>{"use strict";function RA(e,t){return e===50?t===53?"%":t===51?"#":t===52?"$":t===54?"&":t===66||t===98?"+":t===67||t===99?",":t===70||t===102?"/":null:e===51?t===65||t===97?":":t===66||t===98?";":t===68||t===100?"=":t===70||t===102?"?":null:e===52&&t===48?"@":null}function rK(e){let t=!1,r=!1,n="";for(let s=1;s<e.length;s++){let o=e.charCodeAt(s);if(o===37){let a=e.charCodeAt(s+1),u=e.charCodeAt(s+2);RA(a,u)===null?t=!0:(r=!0,a===50&&u===53&&(t=!0,e=e.slice(0,s+1)+"25"+e.slice(s+1),s+=2),s+=2)}else if(o===63||o===59||o===35){n=e.slice(s+1),e=e.slice(0,s);break}}return{path:t?decodeURI(e):e,querystring:n,shouldDecodeParam:r}}function nK(e){let t=e.indexOf("%");if(t===-1)return e;let r="",n=t;for(let i=t;i<e.length;i++)if(e.charCodeAt(i)===37){let s=e.charCodeAt(i+1),o=e.charCodeAt(i+2),a=RA(s,o);r+=e.slice(n,i)+a,n=i+3}return e.slice(0,t)+r+e.slice(n)}PA.exports={safeDecodeURI:rK,safeDecodeURIComponent:nK}});var ug=v((ore,IA)=>{"use strict";var ht=require("assert"),iK=KO(),sg=nA(),$A=Hs(),{prettyPrintTree:sK}=cA(),{StaticNode:OA,NODE_TYPES:rg}=mA(),oK=SA(),bo=EA(),ng=Bf(),{safeDecodeURI:aK,safeDecodeURIComponent:AA}=TA(),CA=/^https?:\/\/.*?\//,cs=/(\/:[^/()]*?)\?(\/?)/;if(!sg(CA))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!sg(cs))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function it(e){if(!(this instanceof it))return new it(e);e=e||{},this._opts=e,e.defaultRoute?(ht(typeof e.defaultRoute=="function","The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(ht(typeof e.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(ht(typeof e.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=cK,e.querystringParser?(ht(typeof e.querystringParser=="function","querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=t=>t===""?{}:iK.parse(t),this.caseSensitive=e.caseSensitive===void 0?!0:e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new oK(e.constraints),this.routes=[],this.trees={}}it.prototype.on=function(t,r,n,i,s){typeof n=="function"&&(i!==void 0&&(s=i),i=n,n={}),ht(typeof r=="string","Path should be a string"),ht(r.length>0,"The path could not be empty"),ht(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),ht(typeof i=="function","Handler should be a function");let o=r.match(cs);if(o){ht(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let l=r.replace(cs,"$1$2"),f=r.replace(cs,"$2");this.on(t,l,n,i,s),this.on(t,f,n,i,s);return}let a=r;this.ignoreDuplicateSlashes&&(r=og(r)),this.ignoreTrailingSlash&&(r=ag(r));let u=Array.isArray(t)?t:[t];for(let l of u)ht(typeof l=="string","Method should be a string"),ht(bo.includes(l),`Method '${l}' is not an http method.`),this._on(l,r,n,i,s,a)};it.prototype._on=function(t,r,n,i,s){let o={};n.constraints!==void 0&&(ht(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[t]===void 0&&(this.trees[t]=new OA("/"));let a=r;if(a==="*"&&this.trees[t].prefix.length!==0){let h=this.trees[t];this.trees[t]=new OA(""),this.trees[t].staticChildren["/"]=h}let u=this.trees[t],l=u.prefix.length,f=[];for(let h=0;h<=a.length;h++){if(a.charCodeAt(h)===58&&a.charCodeAt(h+1)===58){h++;continue}let d=a.charCodeAt(h)===58&&a.charCodeAt(h+1)!==58,p=a.charCodeAt(h)===42;if(d||p||h===a.length&&h!==l){let y=a.slice(l,h);this.caseSensitive||(y=y.toLowerCase()),y=y.split("::").join(":"),y=y.split("%").join("%25"),u=u.createStaticChild(y)}if(d){let y=!1,w=[],_=h+1;for(let S=_;;S++){let g=a.charCodeAt(S),m=g===40,P=g===45||g===46,$=g===47||S===a.length;if(m||P||$){let E=a.slice(_,S);if(f.push(E),y=y||m||P,m){let R=fK(a,S),D=a.slice(S,R+1);this.allowUnsafeRegex||ht(sg(new RegExp(D)),`The regex '${D}' is not safe!`),w.push(lK(D)),S=R+1}else w.push("(.*?)");let O=S;for(;S<a.length;S++){let R=a.charCodeAt(S);if(R===47)break;if(R===58)if(a.charCodeAt(S+1)===58)S++;else break}let k=a.slice(O,S);if(k&&(k=k.split("::").join(":"),k=k.split("%").join("%25"),w.push(uK(k))),_=S+1,$||a.charCodeAt(S)===47||S===a.length){let R=y?"()"+k:k,D=a.slice(h,S);a=a.slice(0,h+1)+R+a.slice(S),h+=R.length;let j=y?new RegExp("^"+w.join("")+"$"):null;u=u.createParametricChild(j,k||null,D),l=h+1;break}}}}else if(p&&(f.push("*"),u=u.createWildcardChild(),l=h+1,h!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let h of this.routes){let d=h.opts.constraints||{};if(h.method===t&&h.pattern===a&&$A(d,o))throw new Error(`Method '${t}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let c={method:t,path:r,pattern:a,params:f,opts:n,handler:i,store:s};this.routes.push(c),u.addRoute(c,this.constrainer)};it.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)};it.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)};it.prototype.reset=function(){this.trees={},this.routes=[]};it.prototype.off=function(t,r,n){ht(typeof r=="string","Path should be a string"),ht(r.length>0,"The path could not be empty"),ht(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),ht(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let i=r.match(cs);if(i){ht(r.length===i.index+i[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(cs,"$1$2"),a=r.replace(cs,"$2");this.off(t,o,n),this.off(t,a,n);return}this.ignoreDuplicateSlashes&&(r=og(r)),this.ignoreTrailingSlash&&(r=ag(r));let s=Array.isArray(t)?t:[t];for(let o of s)this._off(o,r,n)};it.prototype._off=function(t,r,n){ht(typeof t=="string","Method should be a string"),ht(bo.includes(t),`Method '${t}' is not an http method.`);function i(u){return t!==u.method||r!==u.path}function s(u){return i(u)||!$A(n,u.opts.constraints||{})}let o=n?s:i,a=this.routes.filter(o);this._rebuild(a)};it.prototype.lookup=function(t,r,n,i){if(typeof n=="function"&&(i=n,n=void 0),i===void 0){let s=this.constrainer.deriveConstraints(t,n),o=this.find(t.method,t.url,s);return this.callHandler(o,t,r,n)}this.constrainer.deriveConstraints(t,n,(s,o)=>{if(s!==null){i(s);return}try{let a=this.find(t.method,t.url,o),u=this.callHandler(a,t,r,n);i(null,u)}catch(a){i(a)}})};it.prototype.callHandler=function(t,r,n,i){return t===null?this._defaultRoute(r,n,i):i===void 0?t.handler(r,n,t.params,t.store,t.searchParams):t.handler.call(i,r,n,t.params,t.store,t.searchParams)};it.prototype.find=function(t,r,n){let i=this.trees[t];if(i===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(CA,"/")),this.ignoreDuplicateSlashes&&(r=og(r));let s,o,a;try{s=aK(r),r=s.path,o=s.querystring,a=s.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=ag(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let l=this.maxParamLength,f=i.prefix.length,c=[],h=r.length,d=[];for(;;){if(f===h&&i.isLeafNode){let y=i.handlerStorage.getMatchingHandler(n);if(y!==null)return{handler:y.handler,store:y.store,params:y._createParamsObject(c),searchParams:this.querystringParser(o)}}let p=i.getNextNode(r,f,d,c.length);if(p===null){if(d.length===0)return null;let y=d.pop();f=y.brotherPathIndex,c.splice(y.paramsCount),p=y.brotherNode}if(i=p,i.kind===rg.STATIC){f+=i.prefix.length;continue}if(i.kind===rg.WILDCARD){let y=u.slice(f);a&&(y=AA(y)),c.push(y),f=h;continue}if(i.kind===rg.PARAMETRIC){let y=u.indexOf("/",f);y===-1&&(y=h);let w=u.slice(f,y);if(a&&(w=AA(w)),i.isRegex){let _=i.regex.exec(w);if(_===null)continue;for(let S=1;S<_.length;S++){let g=_[S];if(g.length>l)return null;c.push(g)}}else{if(w.length>l)return null;c.push(w)}f=y}}};it.prototype._rebuild=function(e){this.reset();for(let t of e){let{method:r,path:n,opts:i,handler:s,store:o}=t;this._on(r,n,i,s,o)}};it.prototype._defaultRoute=function(e,t,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()};it.prototype._onBadUrl=function(e){if(this.onBadUrl===null)return null;let t=this.onBadUrl;return{handler:(r,n,i)=>t(e,r,n),params:{},store:null}};it.prototype.prettyPrint=function(e={}){let t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(t===void 0){let{version:n,host:i,...s}=this.constrainer.strategies;s[ng.name]=ng;let o=new it({...this._opts,constraints:s}),a=this.routes.map(u=>{let l={...u.opts.constraints,[ng.name]:u.method};return{...u,method:"MERGED",opts:{constraints:l}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[t];return r==null?"(empty tree)":sK(r,e)};for(ig in bo){if(!bo.hasOwnProperty(ig))continue;let e=bo[ig],t=e.toLowerCase();if(it.prototype[t])throw new Error("Method already exists: "+t);it.prototype[t]=function(r,n,i){return this.on(e,r,n,i)}}var ig;it.prototype.all=function(e,t,r){this.on(bo,e,t,r)};IA.exports=it;function uK(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function og(e){return e.replace(/\/\/+/g,"/")}function ag(e){return e.length>1&&e.charCodeAt(e.length-1)===47?e.slice(0,-1):e}function lK(e){return e.charCodeAt(1)===94&&(e=e.slice(0,1)+e.slice(2)),e.charCodeAt(e.length-2)===36&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function fK(e,t){for(var r=1;t<e.length;){if(t++,e[t]==="\\"){t++;continue}if(e[t]===")"?r--:e[t]==="("&&r++,!r)return t}throw new TypeError('Invalid regexp expression in "'+e+'"')}function cK(e){return e?e.store?Object.assign({},e.store):{}:{}}});var kA=v((are,NA)=>{"use strict";function lg(e,t,r,n){if(r===void 0)return t.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",s=>{t.log.error({err:s},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let i=""+Buffer.byteLength(r);t.header("content-length",i),n(null,null)}function hK(e){return e==null?lg:Array.isArray(e)?[...e,lg]:[e,lg]}NA.exports={parseHeadOnSendHandlers:hK}});var YA=v((ure,JA)=>{"use strict";var dK=ug(),pK=Pf(),xA=mh(),{onRequestAbortHookRunner:mK,lifecycleHooks:qA,preParsingHookRunner:yK,onTimeoutHookRunner:gK,onRequestHookRunner:vK}=zi(),{supportedMethods:_K}=Lm(),{normalizeSchema:wK}=sa(),{parseHeadOnSendHandlers:SK}=kA(),Qf=ii(),{compileSchemasForValidation:bK,compileSchemasForSerialization:EK}=fh(),{FST_ERR_SCH_VALIDATION_BUILD:RK,FST_ERR_SCH_SERIALIZATION_BUILD:PK,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:TK,FST_ERR_DUPLICATED_ROUTE:OK,FST_ERR_INVALID_URL:AK,FST_ERR_HOOK_INVALID_HANDLER:jA,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:$K,FST_ERR_ROUTE_DUPLICATED_HANDLER:CK,FST_ERR_ROUTE_HANDLER_NOT_FN:DA,FST_ERR_ROUTE_MISSING_HANDLER:IK,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:NK,FST_ERR_ROUTE_METHOD_INVALID:kK,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:xK,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:qK}=zt(),{kRoutePrefix:jK,kLogLevel:DK,kLogSerializers:LA,kHooks:FA,kSchemaController:LK,kOptions:zA,kReplySerializerDefault:fg,kReplyIsError:FK,kRequestPayloadStream:zK,kDisableRequestLogging:MK,kSchemaErrorFormatter:HK,kErrorHandler:MA,kHasBeenDecorated:HA,kRequestAcceptVersion:cg,kRouteByFastify:hg,kRouteContext:VA}=Et(),{buildErrorHandler:VK}=Da(),{createChildLogger:UK}=na();function BK(e){let t=dK(e.config),r,n,i,s,o,a,u,l,f,c,h,d,p,y,w=!1;return{setup(O,k){r=k.avvio,n=k.fourOhFour,i=k.logger,s=k.hasLogger,o=k.setupResponseListeners,a=k.throwIfAlreadyStarted,p=k.validateHTTPVersion,d=O.exposeHeadRoutes,u=O.genReqId,l=O.disableRequestLogging,f=O.ignoreTrailingSlash,c=O.ignoreDuplicateSlashes,h=Object.prototype.hasOwnProperty.call(O,"return503OnClosing")?O.return503OnClosing:!0,y=k.keepAliveConnections},routing:t.lookup.bind(t),route:$,hasRoute:P,prepareRoute:m,getDefaultRoute:function(){return Qf.emit("FSTDEP014"),t.defaultRoute},setDefaultRoute:function(O){if(Qf.emit("FSTDEP014"),typeof O!="function")throw new TK;t.defaultRoute=O},routeHandler:E,closeRoutes:()=>{w=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:_,hasConstraintStrategy:S,isAsyncConstraint:g};function _(O){return a("Cannot add constraint strategy!"),t.addConstraintStrategy(O)}function S(O){return t.hasConstraintStrategy(O)}function g(){return t.constrainer.asyncStrategiesInUse.size>0}function m({method:O,url:k,options:R,handler:D,isFastify:j}){if(typeof k!="string")throw new AK(typeof k);if(!D&&typeof R=="function")D=R,R={};else if(D&&typeof D=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new $K(O,k);if(R.handler)throw typeof R.handler=="function"?new CK(O,k):new DA(O,k)}return R=Object.assign({},R,{method:O,url:k,path:k,handler:D||R&&R.handler}),$.call(this,{options:R,isFastify:j})}function P({options:O}){return t.find(O.method,O.url||"",O.constraints)!==null}function $({options:O,isFastify:k}){let R={...O},{exposeHeadRoute:D}=R,L=D!=null?D:d,ee=L&&O.method==="GET"?{...O}:null;a("Cannot add route!");let te=R.url||R.path||"";if(Array.isArray(R.method))for(var M=0;M<R.method.length;++M)R.method[M]=UA(R.method[M]),BA(R.method[M],te,R.schema);else R.method=UA(R.method),BA(R.method,te,R.schema);if(!R.handler)throw new IK(R.method,te);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new DA(R.method,te);KA(R.bodyLimit);let Q=this[jK];if(te==="/"&&Q.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":Ae.call(this,{path:te,isFastify:k});break;case"no-slash":Ae.call(this,{path:"",isFastify:k});break;case"both":default:Ae.call(this,{path:"",isFastify:k}),f!==!0&&(c!==!0||!Q.endsWith("/"))&&Ae.call(this,{path:te,prefixing:!0,isFastify:k})}else te[0]==="/"&&Q.endsWith("/")?Ae.call(this,{path:te.slice(1),isFastify:k}):Ae.call(this,{path:te,isFastify:k});return this;function Ae({path:V,prefixing:Ct=!1,isFastify:nn=!1}){let me=Q+V;if(R.url=me,R.path=me,R.routePath=V,R.prefix=Q,R.logLevel=R.logLevel||this[DK],(this[LA]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[LA]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),Ct===!1)for(let re of this[FA].onRoute)re.call(this,R);for(let re of qA)if(R&&re in R){if(Array.isArray(R[re])){for(let Jt of R[re])if(typeof Jt!="function")throw new jA(re,Object.prototype.toString.call(Jt))}else if(R[re]!==void 0&&typeof R[re]!="function")throw new jA(re,Object.prototype.toString.call(R[re]))}let Pr=R.constraints||{},ir={...R.config,url:me,method:R.method},Y=new pK({schema:R.schema,handler:R.handler.bind(this),config:ir,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[fg],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:L,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:nn});R.version&&(Qf.emit("FSTDEP008"),Pr.version=R.version);let et=t.find("HEAD",R.url,Pr),tt=et!=null;tt&&!Y[hg]&&et.store[hg]&&t.off("HEAD",R.url,{constraints:Pr});try{t.on(R.method,R.url,{constraints:Pr},E,Y)}catch(re){if(!Y[hg])throw re.message.includes(`Method '${R.method}' already declared for route '${R.url}'`)?new OK(R.method,R.url):re}if(this.after((re,Jt)=>{Y.errorHandler=R.errorHandler?VK(this[MA],R.errorHandler):this[MA],Y._parserOptions.limit=R.bodyLimit||null,Y.logLevel=R.logLevel,Y.logSerializers=R.logSerializers,Y.attachValidation=R.attachValidation,Y[fg]=this[fg],Y.schemaErrorFormatter=R.schemaErrorFormatter||this[HK]||Y.schemaErrorFormatter,r.once("preReady",()=>{for(let It of qA){let N=this[FA][It].concat(R[It]||[]).map(x=>x.bind(this));Y[It]=N.length?N:null}for(;!Y.Request[HA]&&Y.Request.parent;)Y.Request=Y.Request.parent;for(;!Y.Reply[HA]&&Y.Reply.parent;)Y.Reply=Y.Reply.parent;if(n.setContext(this,Y),R.schema){Y.schema=wK(Y.schema,this.initialConfig);let It=this[LK];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&It.setupValidator(this[zA]);try{let N=typeof(R==null?void 0:R.validatorCompiler)=="function"||It.isCustomValidatorCompiler;bK(Y,R.validatorCompiler||It.validatorCompiler,N)}catch(N){throw new RK(R.method,me,N.message)}R.schema.response&&!R.serializerCompiler&&It.setupSerializer(this[zA]);try{EK(Y,R.serializerCompiler||It.serializerCompiler)}catch(N){throw new PK(R.method,me,N.message)}}}),Jt(re)}),L&&O.method==="GET"&&!tt){let re=SK(ee.onSend);m.call(this,{method:"HEAD",url:V,options:{...ee,onSend:re},isFastify:!0})}else tt&&D&&Qf.emit("FSTDEP007")}}function E(O,k,R,D,j){let L=u(O),ee={level:D.logLevel};D.logSerializers&&(ee.serializers=D.logSerializers);let te=UK(D,i,O,L,ee);if(te[MK]=l,!p(O.httpVersion)){te.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let V='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',Ct={"Content-Type":"application/json","Content-Length":V.length};k.writeHead(505,Ct),k.end(V);return}if(w===!0&&(O.httpVersionMajor!==2&&k.setHeader("Connection","close"),h)){let V={"Content-Type":"application/json","Content-Length":"80"};k.writeHead(503,V),k.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),te.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(O.headers.connection||"")==="keep-alive"&&y.has(O.socket)===!1&&(y.add(O.socket),O.socket.on("close",JK.bind({keepAliveConnections:y,socket:O.socket}))),O.headers[cg]!==void 0&&(O.headers["accept-version"]=O.headers[cg],O.headers[cg]=void 0);let Q=new D.Request(L,R,O,j,te,D),Ae=new D.Reply(k,Q,te);l===!1&&te.info({req:Q},"incoming request"),(s===!0||D.onResponse!==null)&&o(Ae),D.onRequest!==null?vK(D.onRequest,Q,Ae,GA):GA(null,Q,Ae),D.onRequestAbort!==null&&O.on("close",()=>{O.aborted&&mK(D.onRequestAbort,Q,GK.bind(null,Ae))}),D.onTimeout!==null&&(Q.raw.socket._meta||Q.raw.socket.on("timeout",KK),Q.raw.socket._meta={context:D,request:Q,reply:Ae})}}function GK(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function KK(){let{context:e,request:t,reply:r}=this._meta;gK(e.onTimeout,t,r,YK)}function UA(e){if(typeof e!="string")throw new kK;if(e=e.toUpperCase(),_K.indexOf(e)===-1)throw new NK(e);return e}function BA(e,t,r){if((e==="GET"||e==="HEAD")&&r&&r.body)throw new xK(e,t)}function KA(e){if(e!==void 0&&(!Number.isInteger(e)||e<=0))throw new qK(e)}function GA(e,t,r){if(r.sent!==!0){if(e!=null){r[FK]=!0,r.send(e);return}t[zK]=t.raw,t[VA].preParsing!==null?yK(t[VA].preParsing,t,r,xA):xA(null,t,r)}}function JK(){this.keepAliveConnections.delete(this.socket)}function YK(){}JA.exports={buildRouting:BK,validateBodyLimitOption:KA}});var t$=v((lre,e$)=>{"use strict";var WK=ug(),WA=uf(),XA=Rf(),XK=Pf(),{kRoutePrefix:QK,kCanSetNotFoundHandler:vu,kFourOhFourLevelInstance:_u,kFourOhFourContext:yn,kHooks:ZK,kErrorHandler:QA}=Et(),{lifecycleHooks:e7}=zi(),{buildErrorHandler:t7}=Da(),{FST_ERR_NOT_FOUND:r7}=zt(),{createChildLogger:ZA}=na();function n7(e){let{logger:t,genReqId:r}=e,n=WK({onBadUrl:a(),defaultRoute:c}),i=null;return{router:n,setNotFoundHandler:l,setContext:u,arrange404:s};function s(h){h[_u]=h,h[vu]=!0,n.onBadUrl=n.onBadUrl.bind(h),n.defaultRoute=n.defaultRoute.bind(h)}function o(h,d){let{url:p,method:y}=h.raw,w=`Route ${y}:${p} not found`;h.log.info(w),d.code(404).send({message:w,error:"Not Found",statusCode:404})}function a(){return function(d,p,y){let w=r(p),_=this[_u][yn],S=ZA(_,t,p,w),g=new XA(w,null,p,null,S,_),m=new WA(y,g,S);i(g,m)}}function u(h,d){let p=Object.assign({},h[yn]);p.onSend=d.onSend,d[yn]=p}function l(h,d,p,y){this[vu]===void 0&&(this[vu]=!0),this[yn]===void 0&&(this[yn]=null);let w=this,_=this[QK]||"/";if(this[vu]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${_}'`);typeof h=="object"&&(h.preHandler&&(Array.isArray(h.preHandler)?h.preHandler=h.preHandler.map(S=>S.bind(w)):h.preHandler=h.preHandler.bind(w)),h.preValidation&&(Array.isArray(h.preValidation)?h.preValidation=h.preValidation.map(S=>S.bind(w)):h.preValidation=h.preValidation.bind(w))),typeof h=="function"&&(d=h,h=void 0),h=h||{},d?(this[_u][vu]=!1,d=d.bind(this),i=d):(d=o,i=o),this.after((S,g)=>{f.call(this,_,h,d,p,y),g(S)})}function f(h,d,p,y,w){let _=new XK({schema:d.schema,handler:p,config:d.config||{},server:this});if(y.once("preReady",()=>{let S=this[yn];for(let g of e7){let m=this[ZK][g].concat(d[g]||[]).map(P=>P.bind(this));S[g]=m.length?m:null}S.errorHandler=d.errorHandler?t7(this[QA],d.errorHandler):this[QA]}),this[yn]!==null&&h==="/"){Object.assign(this[yn],_);return}this[_u][yn]=_,n.all(h+(h.endsWith("/")?"*":"/*"),w,_),n.all(h,w,_)}function c(h,d){let p=r(h),y=this[_u][yn],w=ZA(y,t,h,p);w.info({req:h},"incoming request");let _=new XA(p,null,h,null,w,y),S=new WA(d,_,w);_.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),_.log.warn(n.prettyPrint()),S.code(404).send(new r7)}}e$.exports=n7});var n$=v((fre,Zf)=>{"use strict";Zf.exports=Re;Zf.exports.default=Re;var r$={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},i7=Object.prototype.hasOwnProperty,s7=new RegExp("idle","u");function Re(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){e.connectionTimeout===void 0&&(e.connectionTimeout=0),e.keepAliveTimeout===void 0&&(e.keepAliveTimeout=72e3),e.maxRequestsPerSocket===void 0&&(e.maxRequestsPerSocket=0),e.requestTimeout===void 0&&(e.requestTimeout=0),e.bodyLimit===void 0&&(e.bodyLimit=1048576),e.caseSensitive===void 0&&(e.caseSensitive=!0),e.allowUnsafeRegex===void 0&&(e.allowUnsafeRegex=!1),e.ignoreTrailingSlash===void 0&&(e.ignoreTrailingSlash=!1),e.ignoreDuplicateSlashes===void 0&&(e.ignoreDuplicateSlashes=!1),e.disableRequestLogging===void 0&&(e.disableRequestLogging=!1),e.jsonShorthand===void 0&&(e.jsonShorthand=!0),e.maxParamLength===void 0&&(e.maxParamLength=100),e.onProtoPoisoning===void 0&&(e.onProtoPoisoning="error"),e.onConstructorPoisoning===void 0&&(e.onConstructorPoisoning="error"),e.pluginTimeout===void 0&&(e.pluginTimeout=1e4),e.requestIdHeader===void 0&&(e.requestIdHeader="request-id"),e.requestIdLogLabel===void 0&&(e.requestIdLogLabel="reqId"),e.http2SessionTimeout===void 0&&(e.http2SessionTimeout=72e3),e.exposeHeadRoutes===void 0&&(e.exposeHeadRoutes=!0);let p=o;for(let y in e)i7.call(r$.properties,y)||delete e[y];if(p===o){let y=e.connectionTimeout,w=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let _=typeof y,S;if(S===void 0)if(_==="boolean"||y===null||_==="string"&&y&&y==+y&&!(y%1))S=+y;else return Re.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;S!==void 0&&(y=S,e!==void 0&&(e.connectionTimeout=S))}var a=w===o;if(a){let _=e.keepAliveTimeout,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_))){let m=typeof _,P;if(P===void 0)if(m==="boolean"||_===null||m==="string"&&_&&_==+_&&!(_%1))P=+_;else return Re.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;P!==void 0&&(_=P,e!==void 0&&(e.keepAliveTimeout=P))}var a=S===o;if(a){if(e.forceCloseConnections!==void 0){let m=e.forceCloseConnections,P=o,$=o,E=!1,O=null,k=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let ee={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ee]:s.push(ee),o++}L!==void 0&&(m=L,e!==void 0&&(e.forceCloseConnections=L))}if(o===k&&typeof m=="string"&&!s7.test(m)){let j={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};s===null?s=[j]:s.push(j),o++}var u=k===o;u&&(E=!0,O=0);let R=o;if(typeof m!="boolean"){let j;if(j===void 0)if(m==="false"||m===0||m===null)j=!1;else if(m==="true"||m===1)j=!0;else{let L={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[L]:s.push(L),o++}j!==void 0&&(m=j,e!==void 0&&(e.forceCloseConnections=j))}var u=R===o;if(u&&E?(E=!1,O=[O,1]):u&&(E=!0,O=1),E)o=$,s!==null&&($?s.length=$:s=null);else{let j={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return s===null?s=[j]:s.push(j),o++,Re.errors=s,!1}var a=P===o}else var a=!0;if(a){let m=e.maxRequestsPerSocket,P=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))&&m!==null){let E=typeof m,O;if(O===void 0)if(E==="boolean"||m===null||E==="string"&&m&&m==+m&&!(m%1))O=+m;else if(m===""||m===0||m===!1)O=null;else return Re.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.maxRequestsPerSocket=O))}var a=P===o;if(a){let E=e.requestTimeout,O=o;if(!(typeof E=="number"&&!(E%1)&&!isNaN(E)&&isFinite(E))){let R=typeof E,D;if(D===void 0)if(R==="boolean"||E===null||R==="string"&&E&&E==+E&&!(E%1))D=+E;else return Re.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;D!==void 0&&(E=D,e!==void 0&&(e.requestTimeout=D))}var a=O===o;if(a){let R=e.bodyLimit,D=o;if(!(typeof R=="number"&&!(R%1)&&!isNaN(R)&&isFinite(R))){let L=typeof R,ee;if(ee===void 0)if(L==="boolean"||R===null||L==="string"&&R&&R==+R&&!(R%1))ee=+R;else return Re.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ee!==void 0&&(R=ee,e!==void 0&&(e.bodyLimit=ee))}var a=D===o;if(a){let L=e.caseSensitive,ee=o;if(typeof L!="boolean"){let M;if(M===void 0)if(L==="false"||L===0||L===null)M=!1;else if(L==="true"||L===1)M=!0;else return Re.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;M!==void 0&&(L=M,e!==void 0&&(e.caseSensitive=M))}var a=ee===o;if(a){let M=e.allowUnsafeRegex,Q=o;if(typeof M!="boolean"){let V;if(V===void 0)if(M==="false"||M===0||M===null)V=!1;else if(M==="true"||M===1)V=!0;else return Re.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;V!==void 0&&(M=V,e!==void 0&&(e.allowUnsafeRegex=V))}var a=Q===o;if(a){if(e.http2!==void 0){let V=e.http2,Ct=o;if(typeof V!="boolean"){let me;if(me===void 0)if(V==="false"||V===0||V===null)me=!1;else if(V==="true"||V===1)me=!0;else return Re.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;me!==void 0&&(V=me,e!==void 0&&(e.http2=me))}var a=Ct===o}else var a=!0;if(a){if(e.https!==void 0){let V=e.https,Ct=o,nn=o,me=!0,Pr=o,ir=o,Y=o,et=o,tt=!1,re=null,Jt=o;if(typeof V!="boolean"){let x;if(x===void 0)if(V==="false"||V===0||V===null)x=!1;else if(V==="true"||V===1)x=!0;else{let B={};s===null?s=[B]:s.push(B),o++}x!==void 0&&(V=x,e!==void 0&&(e.https=x))}var l=Jt===o;l&&(tt=!0,re=0);let It=o;if(V!==null){let x;if(x===void 0)if(V===""||V===0||V===!1)x=null;else{let B={};s===null?s=[B]:s.push(B),o++}x!==void 0&&(V=x,e!==void 0&&(e.https=x))}var l=It===o;if(l&&tt)tt=!1,re=[re,1];else{l&&(tt=!0,re=1);let x=o;if(o===x)if(V&&typeof V=="object"&&!Array.isArray(V)){let U;if(V.allowHTTP1===void 0&&(U="allowHTTP1")){let ue={};s===null?s=[ue]:s.push(ue),o++}else{let ue=o;for(let X in V)X!=="allowHTTP1"&&delete V[X];if(ue===o&&V.allowHTTP1!==void 0){let X=V.allowHTTP1;if(typeof X!="boolean"){let Se;if(Se===void 0)if(X==="false"||X===0||X===null)Se=!1;else if(X==="true"||X===1)Se=!0;else{let He={};s===null?s=[He]:s.push(He),o++}Se!==void 0&&(X=Se,V!==void 0&&(V.allowHTTP1=Se))}}}}else{let U={};s===null?s=[U]:s.push(U),o++}var l=x===o;l&&tt?(tt=!1,re=[re,2]):l&&(tt=!0,re=2)}if(tt)o=et,s!==null&&(et?s.length=et:s=null);else{let x={};s===null?s=[x]:s.push(x),o++}var f=Y===o;if(f){let x={};s===null?s=[x]:s.push(x),o++}else o=ir,s!==null&&(ir?s.length=ir:s=null);var c=Pr===o;if(o=nn,s!==null&&(nn?s.length=nn:s=null),c){let x=o;e.https=!0;var c=x===o;me=c}if(!me){let x={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return s===null?s=[x]:s.push(x),o++,Re.errors=s,!1}var a=Ct===o}else var a=!0;if(a){let V=e.ignoreTrailingSlash,Ct=o;if(typeof V!="boolean"){let me;if(me===void 0)if(V==="false"||V===0||V===null)me=!1;else if(V==="true"||V===1)me=!0;else return Re.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;me!==void 0&&(V=me,e!==void 0&&(e.ignoreTrailingSlash=me))}var a=Ct===o;if(a){let me=e.ignoreDuplicateSlashes,Pr=o;if(typeof me!="boolean"){let Y;if(Y===void 0)if(me==="false"||me===0||me===null)Y=!1;else if(me==="true"||me===1)Y=!0;else return Re.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Y!==void 0&&(me=Y,e!==void 0&&(e.ignoreDuplicateSlashes=Y))}var a=Pr===o;if(a){let Y=e.disableRequestLogging,et=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return Re.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,e!==void 0&&(e.disableRequestLogging=re))}var a=et===o;if(a){let re=e.jsonShorthand,Jt=o;if(typeof re!="boolean"){let N;if(N===void 0)if(re==="false"||re===0||re===null)N=!1;else if(re==="true"||re===1)N=!0;else return Re.errors=[{instancePath:t+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;N!==void 0&&(re=N,e!==void 0&&(e.jsonShorthand=N))}var a=Jt===o;if(a){let N=e.maxParamLength,x=o;if(!(typeof N=="number"&&!(N%1)&&!isNaN(N)&&isFinite(N))){let U=typeof N,ue;if(ue===void 0)if(U==="boolean"||N===null||U==="string"&&N&&N==+N&&!(N%1))ue=+N;else return Re.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ue!==void 0&&(N=ue,e!==void 0&&(e.maxParamLength=ue))}var a=x===o;if(a){let U=e.onProtoPoisoning,ue=o;if(typeof U!="string"){let Se=typeof U,He;if(He===void 0)if(Se=="number"||Se=="boolean")He=""+U;else if(U===null)He="";else return Re.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;He!==void 0&&(U=He,e!==void 0&&(e.onProtoPoisoning=He))}var a=ue===o;if(a){let Se=e.onConstructorPoisoning,He=o;if(typeof Se!="string"){let Ve=typeof Se,mt;if(mt===void 0)if(Ve=="number"||Ve=="boolean")mt=""+Se;else if(Se===null)mt="";else return Re.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;mt!==void 0&&(Se=mt,e!==void 0&&(e.onConstructorPoisoning=mt))}var a=He===o;if(a){let Ve=e.pluginTimeout,mt=o;if(!(typeof Ve=="number"&&!(Ve%1)&&!isNaN(Ve)&&isFinite(Ve))){let Mr=typeof Ve,$n;if($n===void 0)if(Mr==="boolean"||Ve===null||Mr==="string"&&Ve&&Ve==+Ve&&!(Ve%1))$n=+Ve;else return Re.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$n!==void 0&&(Ve=$n,e!==void 0&&(e.pluginTimeout=$n))}var a=mt===o;if(a){let Mr=e.requestIdHeader,$n=o,Bo=o,Zn=!1,Hr=o;if(Mr!==!1){let Ft={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:r$.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};s===null?s=[Ft]:s.push(Ft),o++}var h=Hr===o;if(Zn=Zn||h,!Zn){let Ft=o;if(typeof Mr!="string"){let ei=typeof Mr,Fe;if(Fe===void 0)if(ei=="number"||ei=="boolean")Fe=""+Mr;else if(Mr===null)Fe="";else{let dr={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[dr]:s.push(dr),o++}Fe!==void 0&&(Mr=Fe,e!==void 0&&(e.requestIdHeader=Fe))}var h=Ft===o;Zn=Zn||h}if(Zn)o=Bo,s!==null&&(Bo?s.length=Bo:s=null);else{let Ft={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[Ft]:s.push(Ft),o++,Re.errors=s,!1}var a=$n===o;if(a){let Ft=e.requestIdLogLabel,Du=o;if(typeof Ft!="string"){let Fe=typeof Ft,dr;if(dr===void 0)if(Fe=="number"||Fe=="boolean")dr=""+Ft;else if(Ft===null)dr="";else return Re.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;dr!==void 0&&(Ft=dr,e!==void 0&&(e.requestIdLogLabel=dr))}var a=Du===o;if(a){let Fe=e.http2SessionTimeout,dr=o;if(!(typeof Fe=="number"&&!(Fe%1)&&!isNaN(Fe)&&isFinite(Fe))){let pr=typeof Fe,_t;if(_t===void 0)if(pr==="boolean"||Fe===null||pr==="string"&&Fe&&Fe==+Fe&&!(Fe%1))_t=+Fe;else return Re.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;_t!==void 0&&(Fe=_t,e!==void 0&&(e.http2SessionTimeout=_t))}var a=dr===o;if(a){let pr=e.exposeHeadRoutes,_t=o;if(typeof pr!="boolean"){let lt;if(lt===void 0)if(pr==="false"||pr===0||pr===null)lt=!1;else if(pr==="true"||pr===1)lt=!0;else return Re.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;lt!==void 0&&(pr=lt,e!==void 0&&(e.exposeHeadRoutes=lt))}var a=_t===o;if(a){if(e.versioning!==void 0){let lt=e.versioning,xi=o;if(o===xi)if(lt&&typeof lt=="object"&&!Array.isArray(lt)){let Vr;if(lt.storage===void 0&&(Vr="storage")||lt.deriveVersion===void 0&&(Vr="deriveVersion"))return Re.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:Vr},message:"must have required property '"+Vr+"'"}],!1}else return Re.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=xi===o}else var a=!0;if(a)if(e.constraints!==void 0){let lt=e.constraints,xi=o;if(o===xi)if(lt&&typeof lt=="object"&&!Array.isArray(lt))for(let Vr in lt){let mr=lt[Vr],Cn=o;if(o===Cn)if(mr&&typeof mr=="object"&&!Array.isArray(mr)){let ti;if(mr.name===void 0&&(ti="name")||mr.storage===void 0&&(ti="storage")||mr.validate===void 0&&(ti="validate")||mr.deriveConstraint===void 0&&(ti="deriveConstraint"))return Re.errors=[{instancePath:t+"/constraints/"+Vr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:ti},message:"must have required property '"+ti+"'"}],!1;if(mr.name!==void 0){let ri=mr.name;if(typeof ri!="string"){let Lu=typeof ri,sn;if(sn===void 0)if(Lu=="number"||Lu=="boolean")sn=""+ri;else if(ri===null)sn="";else return Re.errors=[{instancePath:t+"/constraints/"+Vr.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;sn!==void 0&&(ri=sn,mr!==void 0&&(mr.name=sn))}}}else return Re.errors=[{instancePath:t+"/constraints/"+Vr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=Cn===o;if(!d)break}else return Re.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=xi===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return Re.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Re.errors=s,o===0}Zf.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0}});var i$=v((cre,tc)=>{"use strict";var ec=n$(),o7=ia()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:a7}=zt();function u7(e){let t=o7(e);if(!ec(t)){let r=new a7(JSON.stringify(ec.errors.map(n=>n.message)));throw r.errors=ec.errors,r}return dg(t)}function dg(e){let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(e[r]=n&&typeof n=="object"?dg(n):n)}return Object.freeze(e)}tc.exports=u7;tc.exports.defaultInitOptions=ec.defaultInitOptions;tc.exports.utils={deepFreezeObject:dg}});var d$=v((hre,h$)=>{"use strict";var{kAvvioBoot:l7,kChildren:s$,kRoutePrefix:o$,kLogLevel:a$,kLogSerializers:pg,kHooks:mg,kSchemaController:Eo,kContentTypeParser:u$,kReply:l$,kRequest:f$,kFourOhFour:f7,kPluginNameChain:c$}=Et(),c7=uf(),h7=Rf(),d7=My(),p7=Wm(),{buildHooks:m7}=zi(),Ro=Ky();h$.exports=function(t,r,n){if(Ro.registerPlugin.call(t,r))return t[c$].push(Ro.getDisplayName(r)),t;let s=Object.create(t);t[s$].push(s),s.ready=t[l7].bind(s),s[s$]=[],s[l$]=c7.buildReply(s[l$]),s[f$]=h7.buildRequest(s[f$]),s[u$]=p7.helpers.buildContentTypeParser(s[u$]),s[mg]=m7(s[mg]),s[o$]=y7(s[o$],n.prefix),s[a$]=n.logLevel||s[a$],s[Eo]=d7.buildSchemaController(t[Eo]),s.getSchema=s[Eo].getSchema.bind(s[Eo]),s.getSchemas=s[Eo].getSchemas.bind(s[Eo]),s[Ro.registeredPlugins]=Object.create(s[Ro.registeredPlugins]),s[c$]=[Ro.getPluginName(r)||Ro.getFuncPreview(r)],(s[pg]||n.logSerializers)&&(s[pg]=Object.assign(Object.create(s[pg]),n.logSerializers)),n.prefix&&s[f7].arrange404(s);for(let o of s[mg].onRegister)o.call(this,s,n);return s};function y7(e,t){return t?(e.endsWith("/")&&t[0]==="/"?t=t.slice(1):t[0]!=="/"&&(t="/"+t),e+t):e}});var m$=v((dre,p$)=>{"use strict";p$.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var y$=v(yg=>{"use strict";yg.parse=v7;yg.serialize=_7;var g7=Object.prototype.toString,rc=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function v7(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=n.decode||w7,s=0;s<e.length;){var o=e.indexOf("=",s);if(o===-1)break;var a=e.indexOf(";",s);if(a===-1)a=e.length;else if(a<o){s=e.lastIndexOf(";",o-1)+1;continue}var u=e.slice(s,o).trim();if(r[u]===void 0){var l=e.slice(o+1,a).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),r[u]=E7(l,i)}s=a+1}return r}function _7(e,t,r){var n=r||{},i=n.encode||S7;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!rc.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!rc.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!rc.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!rc.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var u=n.expires;if(!b7(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+u.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var l=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(l){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var f=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(f){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function w7(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function S7(e){return encodeURIComponent(e)}function b7(e){return g7.call(e)==="[object Date]"||e instanceof Date}function E7(e,t){try{return t(e)}catch{return e}}});var _$=v((mre,v$)=>{"use strict";var{URL:g$}=require("url"),gg="http://localhost";v$.exports=function(t,r){(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]")&&t.startsWith("//")&&(t=gg+t);let n=typeof t=="object"?Object.assign(new g$(gg),t):new g$(t,gg);if(typeof r=="string"){r=new URLSearchParams(r);for(let i of r.keys()){n.searchParams.delete(i);for(let s of r.getAll(i))n.searchParams.append(i,s)}}else{let i=Object.assign({},t.query,r);for(let s in i){let o=i[s];if(Array.isArray(o)){n.searchParams.delete(s);for(let a of o)n.searchParams.append(s,a)}else n.searchParams.set(s,o)}}return n}});var E$=v((yre,nc)=>{"use strict";var{Readable:w$,addAbortSignal:R7}=require("stream"),_g=require("util"),P7=y$(),T7=require("assert"),S$=rh()(),O7=_$(),{EventEmitter:A7}=require("events");S$.create("FastifyDeprecationLightMyRequest","FST_LIGHTMYREQUEST_DEP01",'You are accessing "request.connection", use "request.socket" instead.');function $7(e){return e.port?e.host:e.hostname+(e.protocol==="https:"?":443":":80")}var vg=class extends A7{constructor(t){super(),this.remoteAddress=t}};function b$(e){return new t(this);function t(r){gn.call(r,{...e,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(gn.prototype))this.constructor.prototype[n]=gn.prototype[n];return _g.inherits(this.constructor,e.Request),this}}function gn(e){w$.call(this,{autoDestroy:!1});let t=O7(e.url||e.path,e.query);this.url=t.pathname+t.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=e.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let u=r[o];T7(u!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+u}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||e.authority||$7(t),e.cookies){let{cookies:o}=e,a=Object.keys(o).map(u=>P7.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new vg(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return S$.emit("FST_LIGHTMYREQUEST_DEP01"),this.socket},configurable:!0});let n=e.payload||e.body||null,i=n&&typeof n.resume=="function";n&&typeof n!="string"&&!i&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!i&&!Object.prototype.hasOwnProperty.call(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:e.simulate||{}};let s=e.signal;return s&&R7(s,this),this}_g.inherits(gn,w$);_g.inherits(b$,gn);gn.prototype.prepare=function(e){let t=this._lightMyRequest.payload;if(!t||typeof t.resume!="function")return e();let r=[];t.on("data",n=>r.push(Buffer.from(n))),t.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,e()}),t.resume()};gn.prototype._read=function(e){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};gn.prototype.destroy=function(e){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,e&&(this._error=!0,process.nextTick(()=>this.emit("error",e))),process.nextTick(()=>this.emit("close")))};nc.exports=gn;nc.exports.Request=gn;nc.exports.CustomRequest=b$});var P$=v((gre,wu)=>{"use strict";var Po={decodeValues:!0,map:!1,silent:!1};function wg(e){return typeof e=="string"&&!!e.trim()}function Sg(e,t){var r=e.split(";").filter(wg),n=r.shift(),i=C7(n),s=i.name,o=i.value;t=t?Object.assign({},Po,t):Po;try{o=t.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:s,value:o};return r.forEach(function(u){var l=u.split("="),f=l.shift().trimLeft().toLowerCase(),c=l.join("=");f==="expires"?a.expires=new Date(c):f==="max-age"?a.maxAge=parseInt(c,10):f==="secure"?a.secure=!0:f==="httponly"?a.httpOnly=!0:f==="samesite"?a.sameSite=c:a[f]=c}),a}function C7(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function R$(e,t){if(t=t?Object.assign({},Po,t):Po,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(i){return i.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},Po,t):Po,t.map){var n={};return e.filter(wg).reduce(function(i,s){var o=Sg(s,t);return i[o.name]=o,i},n)}else return e.filter(wg).map(function(i){return Sg(i,t)})}function I7(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,i,s,o,a;function u(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function l(){return i=e.charAt(r),i!=="="&&i!==";"&&i!==","}for(;r<e.length;){for(n=r,a=!1;u();)if(i=e.charAt(r),i===","){for(s=r,r+=1,u(),o=r;r<e.length&&l();)r+=1;r<e.length&&e.charAt(r)==="="?(a=!0,r=o,t.push(e.substring(n,s)),n=r):r=s+1}else r+=1;(!a||r>=e.length)&&t.push(e.substring(n,e.length))}return t}wu.exports=R$;wu.exports.parse=R$;wu.exports.parseString=Sg;wu.exports.splitCookiesString=I7});var A$=v((vre,O$)=>{"use strict";var Su=require("http"),{Writable:N7}=require("stream"),k7=require("util"),x7=P$();function Oi(e,t,r){Su.ServerResponse.call(this,e),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(j7()),this._promiseCallback=typeof r=="function";let n=!1,i=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>t(o));process.nextTick(()=>t(null,o))},s=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>t(o,null))}};this.once("finish",()=>{let o=q7(this);o.raw.req=e,i(o)}),this.connection.once("error",s),this.once("error",s),this.once("close",s)}k7.inherits(Oi,Su.ServerResponse);Oi.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},e),this.on("timeout",t),this};Oi.prototype.writeHead=function(){let e=Su.ServerResponse.prototype.writeHead.apply(this,arguments);return T$(this),e};Oi.prototype.write=function(e,t,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Su.ServerResponse.prototype.write.call(this,e,t,r),this._lightMyRequest.payloadChunks.push(Buffer.from(e,t)),!0};Oi.prototype.end=function(e,t,r){e&&this.write(e,t),Su.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Oi.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick(()=>this.emit("error",e)),process.nextTick(()=>this.emit("close")))};Oi.prototype.addTrailers=function(e){for(let t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=e[t].toString().trim()};function q7(e){e._lightMyRequest.headers===null&&T$(e),D7(e);let t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return x7.parse(this)}},r=Buffer.concat(e._lightMyRequest.payloadChunks);return t.rawPayload=r,t.payload=r.toString(),t.body=t.payload,t.trailers=e._lightMyRequest.trailers,t.json=function(){return JSON.parse(t.payload)},t}function j7(){return new N7({write(e,t,r){setImmediate(r)}})}function D7(e){let t=e._lightMyRequest.headers;for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)?t[r]=n.map(i=>""+i):t[r]=""+n}}function T$(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(t=>{let r=new RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),n=e._header.match(r);n&&(e._lightMyRequest.headers[t.toLowerCase()]=n[1])})}O$.exports=Oi});var $$=v((_re,bg)=>{"use strict";bg.exports=dt;bg.exports.default=dt;var L7={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function dt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0,a=o,u=!1,l=null,f=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.url===void 0&&(m="url")){let P={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};s===null?s=[P]:s.push(P),o++}}var h=f===o;h&&(u=!0,l=0);let c=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.path===void 0&&(m="path")){let P={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};s===null?s=[P]:s.push(P),o++}}var h=c===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,s!==null&&(a?s.length=a:s=null);else{let m={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return s===null?s=[m]:s.push(m),o++,dt.errors=s,!1}if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.url!==void 0){let m=e.url,P=o,$=o,E=!1,O=null,k=o;if(typeof m!="string"){let D=typeof m,j;if(j===void 0)if(D=="number"||D=="boolean")j=""+m;else if(m===null)j="";else{let L={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),o++}j!==void 0&&(m=j,e!==void 0&&(e.url=j))}var p=k===o;p&&(E=!0,O=0);let R=o;if(o===R)if(m&&typeof m=="object"&&!Array.isArray(m)){let D;if(m.pathname===void 0&&(D="pathname")){let j={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};s===null?s=[j]:s.push(j),o++}else{if(m.protocol!==void 0){let j=m.protocol,L=o;if(typeof j!="string"){let ee=typeof j,te;if(te===void 0)if(ee=="number"||ee=="boolean")te=""+j;else if(j===null)te="";else{let M={instancePath:t+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[M]:s.push(M),o++}te!==void 0&&(j=te,m!==void 0&&(m.protocol=te))}var d=L===o}else var d=!0;if(d){if(m.hostname!==void 0){let j=m.hostname,L=o;if(typeof j!="string"){let te=typeof j,M;if(M===void 0)if(te=="number"||te=="boolean")M=""+j;else if(j===null)M="";else{let Q={instancePath:t+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Q]:s.push(Q),o++}M!==void 0&&(j=M,m!==void 0&&(m.hostname=M))}var d=L===o}else var d=!0;if(d)if(m.pathname!==void 0){let j=m.pathname,L=o;if(typeof j!="string"){let te=typeof j,M;if(M===void 0)if(te=="number"||te=="boolean")M=""+j;else if(j===null)M="";else{let Q={instancePath:t+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Q]:s.push(Q),o++}M!==void 0&&(j=M,m!==void 0&&(m.pathname=M))}var d=L===o}else var d=!0}}}else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[D]:s.push(D),o++}var p=R===o;if(p&&E?(E=!1,O=[O,1]):p&&(E=!0,O=1),E)o=$,s!==null&&($?s.length=$:s=null);else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return s===null?s=[D]:s.push(D),o++,dt.errors=s,!1}var y=P===o}else var y=!0;if(y){if(e.path!==void 0){let m=e.path,P=o,$=o,E=!1,O=null,k=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let ee={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ee]:s.push(ee),o++}L!==void 0&&(m=L,e!==void 0&&(e.path=L))}var _=k===o;_&&(E=!0,O=0);let R=o;if(o===R)if(m&&typeof m=="object"&&!Array.isArray(m)){let j;if(m.pathname===void 0&&(j="pathname")){let L={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};s===null?s=[L]:s.push(L),o++}else{if(m.protocol!==void 0){let L=m.protocol,ee=o;if(typeof L!="string"){let te=typeof L,M;if(M===void 0)if(te=="number"||te=="boolean")M=""+L;else if(L===null)M="";else{let Q={instancePath:t+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Q]:s.push(Q),o++}M!==void 0&&(L=M,m!==void 0&&(m.protocol=M))}var w=ee===o}else var w=!0;if(w){if(m.hostname!==void 0){let L=m.hostname,ee=o;if(typeof L!="string"){let M=typeof L,Q;if(Q===void 0)if(M=="number"||M=="boolean")Q=""+L;else if(L===null)Q="";else{let Ae={instancePath:t+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ae]:s.push(Ae),o++}Q!==void 0&&(L=Q,m!==void 0&&(m.hostname=Q))}var w=ee===o}else var w=!0;if(w)if(m.pathname!==void 0){let L=m.pathname,ee=o;if(typeof L!="string"){let M=typeof L,Q;if(Q===void 0)if(M=="number"||M=="boolean")Q=""+L;else if(L===null)Q="";else{let Ae={instancePath:t+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ae]:s.push(Ae),o++}Q!==void 0&&(L=Q,m!==void 0&&(m.pathname=Q))}var w=ee===o}else var w=!0}}}else{let j={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[j]:s.push(j),o++}var _=R===o;if(_&&E?(E=!1,O=[O,1]):_&&(E=!0,O=1),E)o=$,s!==null&&($?s.length=$:s=null);else{let j={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return s===null?s=[j]:s.push(j),o++,dt.errors=s,!1}var y=P===o}else var y=!0;if(y){if(e.cookies!==void 0){let m=e.cookies,P=o;if(o===P&&!(m&&typeof m=="object"&&!Array.isArray(m)))return dt.errors=[{instancePath:t+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=P===o}else var y=!0;if(y){if(e.headers!==void 0){let m=e.headers,P=o;if(o===P&&!(m&&typeof m=="object"&&!Array.isArray(m)))return dt.errors=[{instancePath:t+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=P===o}else var y=!0;if(y){if(e.query!==void 0){let m=e.query,P=o,$=o,E=!1,O=o;if(o===O&&!(m&&typeof m=="object"&&!Array.isArray(m))){let R={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[R]:s.push(R),o++}var S=O===o;if(E=E||S,!E){let R=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let ee={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ee]:s.push(ee),o++}L!==void 0&&(m=L,e!==void 0&&(e.query=L))}var S=R===o;E=E||S}if(E)o=$,s!==null&&($?s.length=$:s=null);else{let R={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[R]:s.push(R),o++,dt.errors=s,!1}var y=P===o}else var y=!0;if(y){if(e.simulate!==void 0){let m=e.simulate,P=o;if(o===P)if(m&&typeof m=="object"&&!Array.isArray(m)){if(m.end!==void 0){let E=m.end,O=o;if(typeof E!="boolean"){let k;if(k===void 0)if(E==="false"||E===0||E===null)k=!1;else if(E==="true"||E===1)k=!0;else return dt.errors=[{instancePath:t+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;k!==void 0&&(E=k,m!==void 0&&(m.end=k))}var g=O===o}else var g=!0;if(g){if(m.split!==void 0){let E=m.split,O=o;if(typeof E!="boolean"){let R;if(R===void 0)if(E==="false"||E===0||E===null)R=!1;else if(E==="true"||E===1)R=!0;else return dt.errors=[{instancePath:t+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(E=R,m!==void 0&&(m.split=R))}var g=O===o}else var g=!0;if(g){if(m.error!==void 0){let E=m.error,O=o;if(typeof E!="boolean"){let R;if(R===void 0)if(E==="false"||E===0||E===null)R=!1;else if(E==="true"||E===1)R=!0;else return dt.errors=[{instancePath:t+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(E=R,m!==void 0&&(m.error=R))}var g=O===o}else var g=!0;if(g)if(m.close!==void 0){let E=m.close,O=o;if(typeof E!="boolean"){let R;if(R===void 0)if(E==="false"||E===0||E===null)R=!1;else if(E==="true"||E===1)R=!0;else return dt.errors=[{instancePath:t+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(E=R,m!==void 0&&(m.close=R))}var g=O===o}else var g=!0}}}else return dt.errors=[{instancePath:t+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=P===o}else var y=!0;if(y){if(e.authority!==void 0){let m=e.authority,P=o;if(typeof m!="string"){let E=typeof m,O;if(O===void 0)if(E=="number"||E=="boolean")O=""+m;else if(m===null)O="";else return dt.errors=[{instancePath:t+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.authority=O))}var y=P===o}else var y=!0;if(y){if(e.remoteAddress!==void 0){let m=e.remoteAddress,P=o;if(typeof m!="string"){let E=typeof m,O;if(O===void 0)if(E=="number"||E=="boolean")O=""+m;else if(m===null)O="";else return dt.errors=[{instancePath:t+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.remoteAddress=O))}var y=P===o}else var y=!0;if(y){if(e.method!==void 0){let m=e.method,P=o;if(typeof m!="string"){let E=typeof m,O;if(O===void 0)if(E=="number"||E=="boolean")O=""+m;else if(m===null)O="";else return dt.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.method=O))}if(!(m==="ACL"||m==="BIND"||m==="CHECKOUT"||m==="CONNECT"||m==="COPY"||m==="DELETE"||m==="GET"||m==="HEAD"||m==="LINK"||m==="LOCK"||m==="M-SEARCH"||m==="MERGE"||m==="MKACTIVITY"||m==="MKCALENDAR"||m==="MKCOL"||m==="MOVE"||m==="NOTIFY"||m==="OPTIONS"||m==="PATCH"||m==="POST"||m==="PROPFIND"||m==="PROPPATCH"||m==="PURGE"||m==="PUT"||m==="REBIND"||m==="REPORT"||m==="SEARCH"||m==="SOURCE"||m==="SUBSCRIBE"||m==="TRACE"||m==="UNBIND"||m==="UNLINK"||m==="UNLOCK"||m==="UNSUBSCRIBE"||m==="acl"||m==="bind"||m==="checkout"||m==="connect"||m==="copy"||m==="delete"||m==="get"||m==="head"||m==="link"||m==="lock"||m==="m-search"||m==="merge"||m==="mkactivity"||m==="mkcalendar"||m==="mkcol"||m==="move"||m==="notify"||m==="options"||m==="patch"||m==="post"||m==="propfind"||m==="proppatch"||m==="purge"||m==="put"||m==="rebind"||m==="report"||m==="search"||m==="source"||m==="subscribe"||m==="trace"||m==="unbind"||m==="unlink"||m==="unlock"||m==="unsubscribe"))return dt.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:L7.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var y=P===o}else var y=!0;if(y)if(e.validate!==void 0){let m=e.validate,P=o;if(typeof m!="boolean"){let E;if(E===void 0)if(m==="false"||m===0||m===null)E=!1;else if(m==="true"||m===1)E=!0;else return dt.errors=[{instancePath:t+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;E!==void 0&&(m=E,e!==void 0&&(e.validate=E))}var y=P===o}else var y=!0}}}}}}}}}else return dt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return dt.errors=s,o===0}});var N$=v((wre,Eu)=>{"use strict";var F7=require("assert"),Eg=E$(),ic=A$(),oc="The dispatch function has already been invoked",C$=$$();function Rg(e,t,r){return typeof r>"u"?new bu(e,t):sc(e,t,r)}function I$(e,t,r,n){return r.once("error",function(i){this.destroyed&&n.destroy(i)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>e.call(t,r,n))}function sc(e,t,r){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1&&(F7(typeof e=="function","dispatchFunc should be a function"),!C$(t)))throw new Error(C$.errors.map(o=>o.message));let n=t.server||{},i=t.Request?Eg.CustomRequest:Eg;if(e.request&&e.request.app===e&&(Object.setPrototypeOf(Object.getPrototypeOf(e.request),i.prototype),Object.setPrototypeOf(Object.getPrototypeOf(e.response),ic.prototype)),typeof r=="function"){let s=new i(t),o=new ic(s,r);return I$(e,n,s,o)}else return new Promise((s,o)=>{let a=new i(t),u=new ic(a,s,o);I$(e,n,a,u)})}function bu(e,t){typeof t=="string"?this.option={url:t}:this.option=Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var z7=["delete","get","head","options","patch","post","put","trace"];z7.forEach(e=>{bu.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(oc);return this.option.url=t,this.option.method=e.toUpperCase(),this}});var M7=["body","cookies","headers","payload","query"];M7.forEach(e=>{bu.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(oc);return this.option[e]=t,this}});bu.prototype.end=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(oc);if(this._hasInvoked=!0,typeof e=="function")sc(this.dispatch,this.option,e);else return this._promise=sc(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(e=>{e!=="constructor"&&(bu.prototype[e]=function(...t){if(!this._promise){if(this._hasInvoked===!0)throw new Error(oc);this._hasInvoked=!0,this._promise=sc(this.dispatch,this.option)}return this._promise[e](...t)})});function H7(e){return e instanceof Eg||e instanceof ic||e&&e.constructor&&e.constructor.name==="_CustomLMRRequest"}Eu.exports=Rg;Eu.exports.default=Rg;Eu.exports.inject=Rg;Eu.exports.isInjection=H7});var B$=v((Sre,cc)=>{"use strict";var V7="4.21.0",U7=sv(),Pg=require("http"),Ru,{kAvvioBoot:Pu,kChildren:Tg,kServerBindings:k$,kBodyLimit:B7,kRoutePrefix:x$,kLogLevel:G7,kLogSerializers:K7,kHooks:ac,kSchemaController:Ai,kRequestAcceptVersion:J7,kReplySerializerDefault:q$,kContentTypeParser:Y7,kReply:W7,kRequest:X7,kFourOhFour:Q7,kState:Xn,kOptions:j$,kPluginNameChain:Tu,kSchemaErrorFormatter:Og,kErrorHandler:uc,kKeepAliveConnections:Ag,kChildLoggerFactory:$g}=Et(),{createServer:Z7,compileValidateHTTPVersion:eJ}=vv(),Ou=uf(),lc=Rf(),tJ=Pf(),{supportedMethods:rJ}=Lm(),To=Vm(),hs=Wm(),D$=My(),{Hooks:nJ,hookRunnerApplication:L$,supportedHooks:Cg}=zi(),{createLogger:iJ,createChildLogger:F$,defaultChildLoggerFactory:sJ}=na(),oJ=Ky(),{reqIdGenFactory:aJ}=$O(),{buildRouting:uJ,validateBodyLimitOption:lJ}=YA(),fJ=t$(),U$=i$(),cJ=d$(),hJ=ii(),dJ=m$(),{appendStackTrace:pJ,AVVIO_ERRORS_MAP:z$,...ds}=zt(),{defaultInitOptions:Sr}=U$,{FST_ERR_ASYNC_CONSTRAINT:mJ,FST_ERR_BAD_URL:yJ,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:gJ,FST_ERR_OPTIONS_NOT_OBJ:vJ,FST_ERR_QSP_NOT_FN:_J,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:wJ,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:SJ,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:bJ,FST_ERR_VERSION_CONSTRAINT_NOT_STR:EJ,FST_ERR_INSTANCE_ALREADY_LISTENING:RJ,FST_ERR_REOPENED_CLOSE_SERVER:PJ,FST_ERR_ROUTE_REWRITE_NOT_STR:TJ,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:M$}=ds,{buildErrorHandler:H$}=Da();function OJ(e){let t={};return["errorHandler","logLevel","logSerializers"].concat(Cg).forEach(n=>{t[n]=e.store[n]}),Object.assign({},t)}function fc(e){if(e=e||{},typeof e!="object")throw new vJ;if(e.querystringParser&&typeof e.querystringParser!="function")throw new _J(typeof e.querystringParser);if(e.schemaController&&e.schemaController.bucket&&typeof e.schemaController.bucket!="function")throw new wJ(typeof e.schemaController.bucket);lJ(e.bodyLimit);let t=e.requestIdHeader===!1?!1:(e.requestIdHeader||Sr.requestIdHeader).toLowerCase(),r=aJ(t,e.genReqId),n=e.requestIdLogLabel||"reqId",i=e.bodyLimit||Sr.bodyLimit,s=e.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},e.ajv),a=e.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new SJ(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new bJ(typeof o.plugins);let{logger:u,hasLogger:l}=iJ(e);e.connectionTimeout=e.connectionTimeout||Sr.connectionTimeout,e.keepAliveTimeout=e.keepAliveTimeout||Sr.keepAliveTimeout,e.maxRequestsPerSocket=e.maxRequestsPerSocket||Sr.maxRequestsPerSocket,e.requestTimeout=e.requestTimeout||Sr.requestTimeout,e.logger=u,e.genReqId=r,e.requestIdHeader=t,e.requestIdLogLabel=n,e.disableRequestLogging=s,e.ajv=o,e.clientErrorHandler=e.clientErrorHandler||Q;let f=U$(e);e.exposeHeadRoutes=f.exposeHeadRoutes;let c=e.constraints;e.versioning&&(hJ.emit("FSTDEP009"),c={...c,version:{name:"version",mustMatchWhenDerived:!0,storage:e.versioning.storage,deriveConstraint:e.versioning.deriveVersion,validate(N){if(typeof N!="string")throw new EJ}}});let h=uJ({config:{defaultRoute:Ae,onBadUrl:V,constraints:c,ignoreTrailingSlash:e.ignoreTrailingSlash||Sr.ignoreTrailingSlash,ignoreDuplicateSlashes:e.ignoreDuplicateSlashes||Sr.ignoreDuplicateSlashes,maxParamLength:e.maxParamLength||Sr.maxParamLength,caseSensitive:e.caseSensitive,allowUnsafeRegex:e.allowUnsafeRegex||Sr.allowUnsafeRegex,buildPrettyMeta:OJ,querystringParser:e.querystringParser}}),d=fJ(e),p=It(h,e);e.http2SessionTimeout=f.http2SessionTimeout;let{server:y,listen:w}=Z7(e,p),_=typeof y.closeAllConnections=="function",S=typeof y.closeIdleConnections=="function",g=e.forceCloseConnections;if(g==="idle"&&!S)throw new gJ;typeof g!="boolean"&&(g=S?"idle":!1);let m=!_&&g===!0?new Set:dJ(),P=Ou.setupResponseListeners,$=D$.buildSchemaController(null,e.schemaController),E={[Xn]:{listening:!1,closing:!1,started:!1},[Ag]:m,[j$]:e,[Tg]:[],[k$]:[],[B7]:i,[x$]:"",[G7]:"",[K7]:null,[ac]:new nJ,[Ai]:$,[Og]:null,[uc]:H$(),[$g]:sJ,[q$]:null,[Y7]:new hs(i,e.onProtoPoisoning||Sr.onProtoPoisoning,e.onConstructorPoisoning||Sr.onConstructorPoisoning),[W7]:Ou.buildReply(Ou),[X7]:lc.buildRequest(lc,e.trustProxy),[Q7]:d,[oJ.registeredPlugins]:[],[Tu]:["fastify"],[Pu]:null,routing:p,getDefaultRoute:h.getDefaultRoute.bind(h),setDefaultRoute:h.setDefaultRoute.bind(h),delete:function(x,B,U){return h.prepareRoute.call(this,{method:"DELETE",url:x,options:B,handler:U})},get:function(x,B,U){return h.prepareRoute.call(this,{method:"GET",url:x,options:B,handler:U})},head:function(x,B,U){return h.prepareRoute.call(this,{method:"HEAD",url:x,options:B,handler:U})},patch:function(x,B,U){return h.prepareRoute.call(this,{method:"PATCH",url:x,options:B,handler:U})},post:function(x,B,U){return h.prepareRoute.call(this,{method:"POST",url:x,options:B,handler:U})},put:function(x,B,U){return h.prepareRoute.call(this,{method:"PUT",url:x,options:B,handler:U})},options:function(x,B,U){return h.prepareRoute.call(this,{method:"OPTIONS",url:x,options:B,handler:U})},all:function(x,B,U){return h.prepareRoute.call(this,{method:rJ,url:x,options:B,handler:U})},route:function(x){return h.route.call(this,{options:x})},hasRoute:function(x){return h.hasRoute.call(this,{options:x})},log:u,withTypeProvider:ee,addHook:te,addSchema:M,getSchema:$.getSchema.bind($),getSchemas:$.getSchemas.bind($),setValidatorCompiler:me,setSerializerCompiler:ir,setSchemaController:Y,setReplySerializer:et,setSchemaErrorFormatter:Pr,addContentTypeParser:hs.helpers.addContentTypeParser,hasContentTypeParser:hs.helpers.hasContentTypeParser,getDefaultJsonParser:hs.defaultParsers.getDefaultJsonParser,defaultTextParser:hs.defaultParsers.defaultTextParser,removeContentTypeParser:hs.helpers.removeContentTypeParser,removeAllContentTypeParsers:hs.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(N){return this[Tu].includes(N)},listen:w,server:y,addresses:function(){let N=this[k$].map(x=>x.address());return N.push(this.server.address()),N.filter(x=>x)},decorate:To.add,hasDecorator:To.exist,decorateReply:To.decorateReply,decorateRequest:To.decorateRequest,hasRequestDecorator:To.existRequest,hasReplyDecorator:To.existReply,inject:j,printRoutes:Jt,setNotFoundHandler:nn,setErrorHandler:tt,setChildLoggerFactory:re,initialConfig:f,addConstraintStrategy:h.addConstraintStrategy.bind(h),hasConstraintStrategy:h.hasConstraintStrategy.bind(h)};Object.defineProperties(E,{listeningOrigin:{get(){let N=this.addresses().slice(-1).pop();if(typeof N=="string")return N;let x=N.family==="IPv6"?`[${N.address}]`:N.address;return`${this[j$].https?"https":"http"}://${x}:${N.port}`}},pluginName:{configurable:!0,get(){return this[Tu].length>1?this[Tu].join(" -> "):this[Tu][0]}},prefix:{configurable:!0,get(){return this[x$]}},validatorCompiler:{configurable:!0,get(){return this[Ai].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Ai].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[$g]}},version:{configurable:!0,get(){return V7}},errorHandler:{configurable:!0,get(){return this[uc].func}}}),e.schemaErrorFormatter&&(V$(e.schemaErrorFormatter),E[Og]=e.schemaErrorFormatter.bind(E));let O=Number(e.pluginTimeout),k=U7(E,{autostart:!1,timeout:isNaN(O)===!1?O:Sr.pluginTimeout,expose:{use:"register"}});k.override=cJ,k.on("start",()=>E[Xn].started=!0),E[Pu]=E.ready,E.ready=L,E.printPlugins=k.prettyPrint.bind(k),k.once("preReady",()=>{E.onClose((N,x)=>{E[Xn].closing=!0,h.closeRoutes(),L$("preClose",E[Pu],E,function(){if(E[Xn].listening){if(g==="idle")N.server.closeIdleConnections();else if(_&&g)N.server.closeAllConnections();else if(g===!0)for(let B of E[Ag])B.destroy(),E[Ag].delete(B)}!e.serverFactory||E[Xn].listening?N.server.close(function(B){B&&B.code!=="ERR_SERVER_NOT_RUNNING"?x(null):x()}):process.nextTick(x,null)})})});let R=new tJ({server:E,config:{}});E.setNotFoundHandler(),d.arrange404(E),h.setup(e,{avvio:k,fourOhFour:d,logger:u,hasLogger:l,setupResponseListeners:P,throwIfAlreadyStarted:D,validateHTTPVersion:eJ(e),keepAliveConnections:m}),y.on("clientError",e.clientErrorHandler.bind(E));try{let x=require("diagnostics_channel").channel("fastify.initialization");x.hasSubscribers&&x.publish({fastify:E})}catch{}return E;function D(N){if(E[Xn].started)throw new RJ(N)}function j(N,x){if(Ru===void 0&&(Ru=N$()),E[Xn].started){if(E[Xn].closing){let B=new PJ;if(x){x(B);return}else return Promise.reject(B)}return Ru(p,N,x)}if(x)this.ready(B=>{B?x(B,null):Ru(p,N,x)});else return Ru((B,U)=>{this.ready(function(ue){if(ue){U.emit("error",ue);return}p(B,U)})},N)}function L(N){let x,B;if(process.nextTick(U),!N)return new Promise(function(X,Se){x=X,B=Se});function U(){E[Pu]((X,Se)=>{X||E[Xn].started?ue(X):L$("onReady",E[Pu],E,ue),Se()})}function ue(X){if(X=X!=null&&z$[X.code]!=null?pJ(X,new z$[X.code](X.message)):X,N)X?N(X):N(void 0,E);else{if(X)return B(X);x(E)}}}function ee(){return this}function te(N,x){if(D('Cannot call "addHook"!'),x==null)throw new ds.FST_ERR_HOOK_INVALID_HANDLER(N,x);if(N==="onSend"||N==="preSerialization"||N==="onError"||N==="preParsing"){if(x.constructor.name==="AsyncFunction"&&x.length===4)throw new ds.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(N==="onReady"){if(x.constructor.name==="AsyncFunction"&&x.length!==0)throw new ds.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(N==="onRequestAbort"){if(x.constructor.name==="AsyncFunction"&&x.length!==1)throw new ds.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x.constructor.name==="AsyncFunction"&&x.length===3)throw new ds.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return N==="onClose"?this.onClose(x):N==="onReady"?this[ac].add(N,x):N==="onRoute"?this[ac].add(N,x):this.after((U,ue)=>{B.call(this,N,x),ue(U)}),this;function B(U,ue){this[ac].add(U,ue),this[Tg].forEach(X=>B.call(X,U,ue))}}function M(N){return D('Cannot call "addSchema"!'),this[Ai].add(N),this[Tg].forEach(x=>x.addSchema(N)),this}function Q(N,x){if(N.code==="ECONNRESET"||x.destroyed)return;let B,U,ue,X;N.code==="ERR_HTTP_REQUEST_TIMEOUT"?(U="408",ue=Pg.STATUS_CODES[U],B=`{"error":"${ue}","message":"Client Timeout","statusCode":408}`,X="timeout"):N.code==="HPE_HEADER_OVERFLOW"?(U="431",ue=Pg.STATUS_CODES[U],B=`{"error":"${ue}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,X="header_overflow"):(U="400",ue=Pg.STATUS_CODES[U],B=`{"error":"${ue}","message":"Client Error","statusCode":400}`,X="error"),this.log.trace({err:N},`client ${X}`),x.writable&&x.write(`HTTP/1.1 ${U} ${ue}\r
Content-Length: ${B.length}\r
Content-Type: application/json\r
\r
${B}`),x.destroy(N)}function Ae(N,x){N.headers["accept-version"]!==void 0&&(N.headers[J7]=N.headers["accept-version"],N.headers["accept-version"]=void 0),d.router.lookup(N,x)}function V(N,x,B){if(a){let ue=r(x),X=F$(R,u,x,ue),Se=new lc(ue,null,x,null,X,R),He=new Ou(B,Se,X);return s===!1&&X.info({req:Se},"incoming request"),a(new yJ(N),Se,He)}let U=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${N}' is not a valid url component","statusCode":400}`;B.writeHead(400,{"Content-Type":"application/json","Content-Length":U.length}),B.end(U)}function Ct(N,x,B){if(N!==!1)return function(ue){if(ue){if(a){let Se=r(x),He=F$(R,u,x,Se),ki=new lc(Se,null,x,null,He,R),Ve=new Ou(B,ki,He);return s===!1&&He.info({req:ki},"incoming request"),a(new mJ,ki,Ve)}let X='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';B.writeHead(500,{"Content-Type":"application/json","Content-Length":X.length}),B.end(X)}}}function nn(N,x){return D('Cannot call "setNotFoundHandler"!'),d.setNotFoundHandler.call(this,N,x,k,h.routeHandler),this}function me(N){return D('Cannot call "setValidatorCompiler"!'),this[Ai].setValidatorCompiler(N),this}function Pr(N){return D('Cannot call "setSchemaErrorFormatter"!'),V$(N),this[Og]=N.bind(this),this}function ir(N){return D('Cannot call "setSerializerCompiler"!'),this[Ai].setSerializerCompiler(N),this}function Y(N){D('Cannot call "setSchemaController"!');let x=this[Ai],B=D$.buildSchemaController(x,Object.assign({},x.opts,N));return this[Ai]=B,this.getSchema=B.getSchema.bind(B),this.getSchemas=B.getSchemas.bind(B),this}function et(N){return D('Cannot call "setReplySerializer"!'),this[q$]=N,this}function tt(N){return D('Cannot call "setErrorHandler"!'),this[uc]=H$(this[uc],N.bind(this)),this}function re(N){return D('Cannot call "setChildLoggerFactory"!'),this[$g]=N,this}function Jt(N={}){return N.includeMeta=N.includeHooks?N.includeMeta?Cg.concat(N.includeMeta):Cg:N.includeMeta,h.printRoutes(N)}function It(N,{rewriteUrl:x,logger:B}){let U;return function(X,Se){if(U===void 0&&(U=N.isAsyncConstraint()),x){X.originalUrl=X.url;let He=x.call(E,X);if(typeof He=="string")X.url=He;else{let ki=new TJ(X.url,typeof He);X.destroy(ki)}}N.routing(X,Se,Ct(U,X,Se))}}}fc.errorCodes=ds;function V$(e){if(typeof e!="function")throw new M$(typeof e);if(e.constructor.name==="AsyncFunction")throw new M$("AsyncFunction")}cc.exports=fc;cc.exports.fastify=fc;cc.exports.default=fc});var K$=v((bre,Ig)=>{"use strict";var AJ=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,$J=/(\w*(\.\w*)*)\..*/;Ig.exports=function(t){if(t.name.length>0)return t.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(n){return Error.stackTraceLimit=r,G$(n.stack)}};function G$(e){let t=e.match(AJ);return t?t[1].split(/[/\\]/).slice(-1)[0].match($J)[1]:"anonymous"}Ig.exports.extractPluginName=G$});var Y$=v((Ere,J$)=>{"use strict";J$.exports=function(t){return t[0]==="@"&&(t=t.slice(1).replace("/","-")),t.replace(/-(.)/g,function(n,i){return i.toUpperCase()})}});var kg=v((Rre,hc)=>{"use strict";var CJ=K$(),IJ=Y$(),NJ=0;function Ng(e,t={}){let r=!1;if(typeof e.default<"u"&&(e=e.default),typeof e!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof e}'`);if(typeof t=="string"&&(t={fastify:t}),typeof t!="object"||Array.isArray(t)||t===null)throw new TypeError("The options object should be an object");if(t.fastify!==void 0&&typeof t.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof t.fastify}'`);t.name||(r=!0,t.name=CJ(e)+"-auto-"+NJ++),e[Symbol.for("skip-override")]=t.encapsulate!==!0,e[Symbol.for("fastify.display-name")]=t.name,e[Symbol.for("plugin-meta")]=t,e.default||(e.default=e);let n=IJ(t.name);return!r&&!e[n]&&(e[n]=e),e}hc.exports=Ng;hc.exports.default=Ng;hc.exports.fastifyPlugin=Ng});var W$=v(xg=>{xg.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";xg.SYMBOL_SUPPORT=typeof Symbol<"u"});var Be=v((Tre,Q$)=>{var X$=W$(),kJ=X$.ARRAY_BUFFER_SUPPORT,xJ=X$.SYMBOL_SUPPORT;Q$.exports=function(t,r){var n,i,s,o,a;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof r!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||kJ&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(s=0,o=t.length;s<o;s++)r(t[s],s);return}if(typeof t.forEach=="function"){t.forEach(r);return}if(xJ&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(n=t,s=0;a=n.next(),a.done!==!0;)r(a.value,s),s++;return}for(i in t)t.hasOwnProperty(i)&&r(t[i],i)}});var $u=v(Au=>{var qJ=function(e,t){return e<t?-1:e>t?1:0},jJ=function(e,t){return e<t?1:e>t?-1:0};function DJ(e){return function(t,r){return e(r,t)}}function LJ(e){return e===2?function(t,r){return t[0]<r[0]?-1:t[0]>r[0]?1:t[1]<r[1]?-1:t[1]>r[1]?1:0}:function(t,r){for(var n=0;n<e;){if(t[n]<r[n])return-1;if(t[n]>r[n])return 1;n++}return 0}}Au.DEFAULT_COMPARATOR=qJ;Au.DEFAULT_REVERSE_COMPARATOR=jJ;Au.reverseComparator=DJ;Au.createTupleComparator=LJ});var tr=v(vn=>{var FJ=Math.pow(2,8)-1,zJ=Math.pow(2,16)-1,MJ=Math.pow(2,32)-1,HJ=Math.pow(2,7)-1,VJ=Math.pow(2,15)-1,UJ=Math.pow(2,31)-1;vn.getPointerArray=function(e){var t=e-1;if(t<=FJ)return Uint8Array;if(t<=zJ)return Uint16Array;if(t<=MJ)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};vn.getSignedPointerArray=function(e){var t=e-1;return t<=HJ?Int8Array:t<=VJ?Int16Array:t<=UJ?Int32Array:Float64Array};vn.getNumberType=function(e){return e===(e|0)?Math.sign(e)===-1?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var BJ={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};vn.getMinimalRepresentation=function(e,t){var r=null,n=0,i,s,o,a,u;for(a=0,u=e.length;a<u;a++)o=t?t(e[a]):e[a],s=vn.getNumberType(o),i=BJ[s.name],i>n&&(n=i,r=s);return r};vn.isTypedArray=function(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)};vn.concat=function(){var e=0,t,r,n;for(t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=new arguments[0].constructor(e);for(t=0,r=0;t<n;t++)i.set(arguments[t],r),r+=arguments[t].length;return i};vn.indices=function(e){for(var t=vn.getPointerArray(e),r=new t(e),n=0;n<e;n++)r[n]=n;return r}});var hr=v(Cu=>{var Z$=Be(),eC=tr();function GJ(e){return Array.isArray(e)||eC.isTypedArray(e)}function qg(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function KJ(e){var t=qg(e),r=typeof t=="number"?new Array(t):[],n=0;return Z$(e,function(i){r[n++]=i}),r}function JJ(e){var t=qg(e),r=typeof t=="number"?eC.getPointerArray(t):Array,n=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new r(t):[],s=0;return Z$(e,function(o){n[s]=o,i[s]=s++}),[n,i]}Cu.isArrayLike=GJ;Cu.guessLength=qg;Cu.toArray=KJ;Cu.toArrayWithIndices=JJ});var yc=v((Cre,iC)=>{var dc=Be(),tC=$u(),_n=hr(),mc=tC.DEFAULT_COMPARATOR,jg=tC.reverseComparator;function Dg(e,t,r,n){for(var i=t[n],s,o;n>r;){if(s=n-1>>1,o=t[s],e(i,o)<0){t[n]=o,n=s;continue}break}t[n]=i}function Iu(e,t,r){for(var n=t.length,i=r,s=t[r],o=2*r+1,a;o<n;)a=o+1,a<n&&e(t[o],t[a])>=0&&(o=a),t[r]=t[o],r=o,o=2*r+1;t[r]=s,Dg(e,t,i,r)}function rC(e,t,r){t.push(r),Dg(e,t,0,t.length-1)}function Lg(e,t){var r=t.pop();if(t.length!==0){var n=t[0];return t[0]=r,Iu(e,t,0),n}return r}function Oo(e,t,r){if(t.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var n=t[0];return t[0]=r,Iu(e,t,0),n}function nC(e,t,r){var n;return t.length!==0&&e(t[0],r)<0&&(n=t[0],t[0]=r,r=n,Iu(e,t,0)),r}function ps(e,t){for(var r=t.length,n=r>>1,i=n;--i>=0;)Iu(e,t,i)}function Fg(e,t){for(var r=t.length,n=0,i=new Array(r);n<r;)i[n++]=Lg(e,t);return i}function YJ(e,t,r){arguments.length===2&&(r=t,t=e,e=mc);var n=jg(e),i,s,o,a=1/0,u;if(t===1){if(_n.isArrayLike(r)){for(i=0,s=r.length;i<s;i++)o=r[i],(a===1/0||e(o,a)<0)&&(a=o);return u=new r.constructor(1),u[0]=a,u}return dc(r,function(f){(a===1/0||e(f,a)<0)&&(a=f)}),[a]}if(_n.isArrayLike(r)){if(t>=r.length)return r.slice().sort(e);for(u=r.slice(0,t),ps(n,u),i=t,s=r.length;i<s;i++)n(r[i],u[0])>0&&Oo(n,u,r[i]);return u.sort(e)}var l=_n.guessLength(r);return l!==null&&l<t&&(t=l),u=new Array(t),i=0,dc(r,function(f){i<t?u[i]=f:(i===t&&ps(n,u),n(f,u[0])>0&&Oo(n,u,f)),i++}),u.length>i&&(u.length=i),u.sort(e)}function WJ(e,t,r){arguments.length===2&&(r=t,t=e,e=mc);var n=jg(e),i,s,o,a=-1/0,u;if(t===1){if(_n.isArrayLike(r)){for(i=0,s=r.length;i<s;i++)o=r[i],(a===-1/0||e(o,a)>0)&&(a=o);return u=new r.constructor(1),u[0]=a,u}return dc(r,function(f){(a===-1/0||e(f,a)>0)&&(a=f)}),[a]}if(_n.isArrayLike(r)){if(t>=r.length)return r.slice().sort(n);for(u=r.slice(0,t),ps(e,u),i=t,s=r.length;i<s;i++)e(r[i],u[0])>0&&Oo(e,u,r[i]);return u.sort(n)}var l=_n.guessLength(r);return l!==null&&l<t&&(t=l),u=new Array(t),i=0,dc(r,function(f){i<t?u[i]=f:(i===t&&ps(e,u),e(f,u[0])>0&&Oo(e,u,f)),i++}),u.length>i&&(u.length=i),u.sort(n)}function $e(e){if(this.clear(),this.comparator=e||mc,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}$e.prototype.clear=function(){this.items=[],this.size=0};$e.prototype.push=function(e){return rC(this.comparator,this.items,e),++this.size};$e.prototype.peek=function(){return this.items[0]};$e.prototype.pop=function(){return this.size!==0&&this.size--,Lg(this.comparator,this.items)};$e.prototype.replace=function(e){return Oo(this.comparator,this.items,e)};$e.prototype.pushpop=function(e){return nC(this.comparator,this.items,e)};$e.prototype.consume=function(){return this.size=0,Fg(this.comparator,this.items)};$e.prototype.toArray=function(){return Fg(this.comparator,this.items.slice())};$e.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:$e,enumerable:!1}),e};typeof Symbol<"u"&&($e.prototype[Symbol.for("nodejs.util.inspect.custom")]=$e.prototype.inspect);function pc(e){if(this.clear(),this.comparator=e||mc,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=jg(this.comparator)}pc.prototype=$e.prototype;$e.from=function(e,t){var r=new $e(t),n;return _n.isArrayLike(e)?n=e.slice():n=_n.toArray(e),ps(r.comparator,n),r.items=n,r.size=n.length,r};pc.from=function(e,t){var r=new pc(t),n;return _n.isArrayLike(e)?n=e.slice():n=_n.toArray(e),ps(r.comparator,n),r.items=n,r.size=n.length,r};$e.siftUp=Iu;$e.siftDown=Dg;$e.push=rC;$e.pop=Lg;$e.replace=Oo;$e.pushpop=nC;$e.heapify=ps;$e.consume=Fg;$e.nsmallest=YJ;$e.nlargest=WJ;$e.MinHeap=$e;$e.MaxHeap=pc;iC.exports=$e});var zg=v((Ire,cC)=>{var sC=$u(),oC=Be(),aC=sC.DEFAULT_COMPARATOR,XJ=sC.reverseComparator;function rr(e){if(this.clear(),this.comparator=e||aC,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}rr.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function QJ(e){return{item:e,degree:0}}function uC(e,t){e.root?(t.right=e.root.right,t.left=e.root,e.root.right.left=t,e.root.right=t):e.root=t}rr.prototype.push=function(e){var t=QJ(e);return t.left=t,t.right=t,uC(this,t),(!this.min||this.comparator(t.item,this.min.item)<=0)&&(this.min=t),++this.size};rr.prototype.peek=function(){return this.min?this.min.item:void 0};function lC(e){for(var t=[],r=e,n=!1;!(r===e&&n);)r===e&&(n=!0),t.push(r),r=r.right;return t}function fC(e,t){e.root===t&&(e.root=t.right),t.left.right=t.right,t.right.left=t.left}function ZJ(e,t){e.child?(t.right=e.child.right,t.left=e.child,e.child.right.left=t,e.child.right=t):e.child=t}function eY(e,t,r){fC(e,t),t.left=t,t.right=t,ZJ(r,t),r.degree++,t.parent=r}function tY(e){var t=new Array(e.size),r=lC(e.root),n,i,s,o,a,u;for(n=0,i=r.length;n<i;n++){for(s=r[n],a=s.degree;t[a];)o=t[a],e.comparator(s.item,o.item)>0&&(u=s,s=o,o=u),eY(e,o,s),t[a]=null,a++;t[a]=s}for(n=0;n<e.size;n++)t[n]&&e.comparator(t[n].item,e.min.item)<=0&&(e.min=t[n])}rr.prototype.pop=function(){if(this.size){var e=this.min;if(e.child){var t=lC(e.child),r,n,i;for(n=0,i=t.length;n<i;n++)r=t[n],uC(this,r),delete r.parent}return fC(this,e),e===e.right?(this.min=null,this.root=null):(this.min=e.right,tY(this)),this.size--,e.item}};rr.prototype.inspect=function(){var e={size:this.size};return this.min&&"item"in this.min&&(e.top=this.min.item),Object.defineProperty(e,"constructor",{value:rr,enumerable:!1}),e};typeof Symbol<"u"&&(rr.prototype[Symbol.for("nodejs.util.inspect.custom")]=rr.prototype.inspect);function gc(e){if(this.clear(),this.comparator=e||aC,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=XJ(this.comparator)}gc.prototype=rr.prototype;rr.from=function(e,t){var r=new rr(t);return oC(e,function(n){r.push(n)}),r};gc.from=function(e,t){var r=new gc(t);return oC(e,function(n){r.push(n)}),r};rr.MinFibonacciHeap=rr;rr.MaxFibonacciHeap=gc;cC.exports=rr});var yC=v((Nre,mC)=>{var hC="";function dC(e,t,r){for(var n=t.length,i=[],s=n,o=-1,a,u=0,l;s--;)o=Math.max(e[t[s]+r],o);for(l=o>>24&&32||o>>16&&24||o>>8&&16||8;u<l;u+=4){for(s=16;s--;)i[s]=[];for(s=n;s--;)i[e[t[s]+r]>>u&15].push(t[s]);for(a=0;a<16;a++)for(o=i[a].length;o--;)t[++s]=i[a][o]}}function rY(e,t,r,n){return e[r]-e[n]||(r%3===2?e[r+1]-e[n+1]||t[r+2]-t[n+2]:t[r+1]-t[n+1])}function Mg(e,t){var r=[],n=[],i=2*t/3|0,s=t-i,o=i+1>>1,a=i,u=0,l,f=[],c=[];if(t===1)return[0];for(;a--;)r[a]=(a*3>>1)+1;for(a=3;a--;)dC(e,r,a);for(u=n[(r[0]/3|0)+(r[0]%3===1?0:o)]=1,a=1;a<i;a++)(e[r[a]]!==e[r[a-1]]||e[r[a]+1]!==e[r[a-1]+1]||e[r[a]+2]!==e[r[a-1]+2])&&u++,n[(r[a]/3|0)+(r[a]%3===1?0:o)]=u;if(u<i)for(n=Mg(n,i),a=i;a--;)r[a]=n[a]<o?n[a]*3+1:(n[a]-o)*3+2;for(a=i;a--;)f[r[a]]=a;for(f[t]=-1,f[t+1]=-2,n=t%3===1?[t-1]:[],a=0;a<i;a++)r[a]%3===1&&n.push(r[a]-1);for(dC(e,n,0),a=0,u=0,l=0;a<i&&u<s;)c[l++]=rY(e,f,r[a],n[u])<0?r[a++]:n[u++];for(;a<i;)c[l++]=r[a++];for(;u<s;)c[l++]=n[u++];return c}function pC(e){var t=e.length,r=t%3,n=new Array(t+r),i,s;if(typeof e!="string"){var o=Object.create(null);for(s=0;s<t;s++)o[e[s]]||(o[e[s]]=!0);var a=Object.create(null),u=Object.keys(o).sort();for(s=0,i=u.length;s<i;s++)a[u[s]]=s+1;for(s=0;s<t;s++)n[s]=a[e[s]]}else for(s=0;s<t;s++)n[s]=e.charCodeAt(s);for(s=t;s<t+r;s++)n[s]=0;return n}function $i(e){this.hasArbitrarySequence=typeof e!="string",this.string=e,this.length=e.length,this.array=Mg(pC(e),this.length)}$i.prototype.toString=function(){return this.array.join(",")};$i.prototype.toJSON=function(){return this.array};$i.prototype.inspect=function(){for(var e=new Array(this.length),t=0;t<this.length;t++)e[t]=this.string.slice(this.array[t]);return Object.defineProperty(e,"constructor",{value:$i,enumerable:!1}),e};typeof Symbol<"u"&&($i.prototype[Symbol.for("nodejs.util.inspect.custom")]=$i.prototype.inspect);function Ci(e){if(this.hasArbitrarySequence=typeof e[0]!="string",this.size=e.length,this.hasArbitrarySequence){this.text=[];for(var t=0,r=this.size;t<r;t++)this.text.push.apply(this.text,e[t]),t<r-1&&this.text.push(hC)}else this.text=e.join(hC);this.firstLength=e[0].length,this.length=this.text.length,this.array=Mg(pC(this.text),this.length)}Ci.prototype.longestCommonSubsequence=function(){var e=this.hasArbitrarySequence?[]:"",t,r,n,i,s;for(r=1;r<this.length;r++)if(i=this.array[r],s=this.array[r-1],!(i<this.firstLength&&s<this.firstLength)&&!(i>this.firstLength&&s>this.firstLength)){for(t=Math.min(this.length-i,this.length-s),n=0;n<t;n++)if(this.text[i+n]!==this.text[s+n]){t=n;break}t>e.length&&(e=this.text.slice(i,i+t))}return e};Ci.prototype.toString=function(){return this.array.join(",")};Ci.prototype.toJSON=function(){return this.array};Ci.prototype.inspect=function(){for(var e=new Array(this.length),t=0;t<this.length;t++)e[t]=this.text.slice(this.array[t]);return Object.defineProperty(e,"constructor",{value:Ci,enumerable:!1}),e};typeof Symbol<"u"&&(Ci.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ci.prototype.inspect);$i.GeneralizedSuffixArray=Ci;mC.exports=$i});var SC=v((kre,wC)=>{var nY=Be();function Zr(e){this.size=0,this.items=new Map,this.inverse=e}function br(){this.size=0,this.items=new Map,this.inverse=new Zr(this)}function gC(){this.size=0,this.items.clear(),this.inverse.items.clear()}br.prototype.clear=gC;Zr.prototype.clear=gC;function vC(e,t){if(this.items.has(e)){var r=this.items.get(e);if(r===t)return this;this.inverse.items.delete(r)}if(this.inverse.items.has(t)){var n=this.inverse.items.get(t);if(n===e)return this;this.items.delete(n)}return this.items.set(e,t),this.inverse.items.set(t,e),this.size=this.items.size,this.inverse.size=this.inverse.items.size,this}br.prototype.set=vC;Zr.prototype.set=vC;function _C(e){if(this.items.has(e)){var t=this.items.get(e);return this.items.delete(e),this.inverse.items.delete(t),this.size=this.items.size,this.inverse.size=this.inverse.items.size,!0}return!1}br.prototype.delete=_C;Zr.prototype.delete=_C;var iY=["has","get","forEach","keys","values","entries"];iY.forEach(function(e){br.prototype[e]=Zr.prototype[e]=function(){return Map.prototype[e].apply(this.items,arguments)}});typeof Symbol<"u"&&(br.prototype[Symbol.iterator]=br.prototype.entries,Zr.prototype[Symbol.iterator]=Zr.prototype.entries);br.prototype.inspect=function(){var e={left:this.items,right:this.inverse.items};return Object.defineProperty(e,"constructor",{value:br,enumerable:!1}),e};typeof Symbol<"u"&&(br.prototype[Symbol.for("nodejs.util.inspect.custom")]=br.prototype.inspect);Zr.prototype.inspect=function(){var e={left:this.inverse.items,right:this.items};return Object.defineProperty(e,"constructor",{value:Zr,enumerable:!1}),e};typeof Symbol<"u"&&(Zr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Zr.prototype.inspect);br.from=function(e){var t=new br;return nY(e,function(r,n){t.set(n,r)}),t};wC.exports=br});var Tt=v((xre,bC)=>{function wn(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(wn.prototype[Symbol.iterator]=function(){return this});wn.of=function(){var e=arguments,t=e.length,r=0;return new wn(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})};wn.empty=function(){var e=new wn(function(){return{done:!0}});return e};wn.fromSequence=function(e){var t=0,r=e.length;return new wn(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})};wn.is=function(e){return e instanceof wn?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};bC.exports=wn});var Vg=v(en=>{function RC(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e&~(e>>1)}en.msb32=RC;function Hg(e){return e|=e>>1,e|=e>>2,e|=e>>4,e&~(e>>1)}en.msb8=Hg;en.test=function(e,t){return e>>t&1};en.criticalBit8=function(e,t){return Hg(e^t)};en.criticalBit8Mask=function(e,t){return~Hg(e^t)>>>0&255};en.testCriticalBit8=function(e,t){return 1+(e|t)>>8};en.criticalBit32Mask=function(e,t){return~RC(e^t)>>>0&4294967295};en.popcount=function(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127};var Ao=new Uint8Array(Math.pow(2,8));for(Nu=0,EC=Ao.length;Nu<EC;Nu++)Ao[Nu]=en.popcount(Nu);var Nu,EC;en.table8Popcount=function(e){return Ao[e&255]+Ao[e>>8&255]+Ao[e>>16&255]+Ao[e>>24&255]}});var AC=v((jre,OC)=>{var TC=Tt(),PC=Vg();function yt(e){this.length=e,this.clear()}yt.prototype.clear=function(){this.size=0,this.array=new Uint32Array(Math.ceil(this.length/32))};yt.prototype.set=function(e,t){var r=e>>5,n=e&31,i=this.array[r],s;return t===0||t===!1?s=this.array[r]&=~(1<<n):s=this.array[r]|=1<<n,s=s>>>0,s>i?this.size++:s<i&&this.size--,this};yt.prototype.reset=function(e){var t=e>>5,r=e&31,n=this.array[t],i;return i=this.array[t]&=~(1<<r),i<n&&this.size--,this};yt.prototype.flip=function(e){var t=e>>5,r=e&31,n=this.array[t],i=this.array[t]^=1<<r;return i=i>>>0,i>n?this.size++:i<n&&this.size--,this};yt.prototype.get=function(e){var t=e>>5,r=e&31;return this.array[t]>>r&1};yt.prototype.test=function(e){return Boolean(this.get(e))};yt.prototype.rank=function(e){if(this.size===0)return 0;for(var t=e>>5,r=e&31,n=0,i=0;i<t;i++)n+=PC.table8Popcount(this.array[i]);var s=this.array[t]&(1<<r)-1;return n+=PC.table8Popcount(s),n};yt.prototype.select=function(e){if(this.size===0||e>=this.length)return-1;for(var t,r=32,n=0,i=0,s=0,o=this.array.length;s<o;s++)if(t=this.array[s],t!==0){s===o-1&&(r=this.length%32||32);for(var a=0;a<r;a++,n++)if(i+=t>>a&1,i===e)return n}};yt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.length,n,i,s=32,o=0,a=this.array.length;o<a;o++){n=this.array[o],o===a-1&&(s=r%32||32);for(var u=0;u<s;u++)i=n>>u&1,e.call(t,i,o*32+u)}};yt.prototype.values=function(){var e=this.length,t=!1,r,n,i=this.array,s=i.length,o=0,a=-1,u=32;return new TC(function l(){if(!t){if(o>=s)return{done:!0};o===s-1&&(u=e%32||32),r=i[o++],t=!0,a=-1}return a++,a>=u?(t=!1,l()):(n=r>>a&1,{value:n})})};yt.prototype.entries=function(){var e=this.length,t=!1,r,n,i=this.array,s,o=i.length,a=0,u=-1,l=32;return new TC(function f(){if(!t){if(a>=o)return{done:!0};a===o-1&&(l=e%32||32),r=i[a++],t=!0,u=-1}return u++,s=~-a*32+u,u>=l?(t=!1,f()):(n=r>>u&1,{value:[s,n]})})};typeof Symbol<"u"&&(yt.prototype[Symbol.iterator]=yt.prototype.values);yt.prototype.inspect=function(){var e=new Uint8Array(this.length);return this.forEach(function(t,r){e[r]=t}),Object.defineProperty(e,"constructor",{value:yt,enumerable:!1}),e};typeof Symbol<"u"&&(yt.prototype[Symbol.for("nodejs.util.inspect.custom")]=yt.prototype.inspect);yt.prototype.toJSON=function(){return Array.from(this.array)};OC.exports=yt});var NC=v((Dre,IC)=>{var CC=Tt(),$C=Vg(),sY=function(e){return Math.max(1,Math.ceil(e*1.5))};function oY(e){return new Uint32Array(Math.ceil(e/32))}function Ge(e){var t=e||0,r=sY;typeof e=="object"&&(t=e.initialLength||e.initialCapacity||0,r=e.policy||r),this.size=0,this.length=t,this.capacity=Math.ceil(this.length/32)*32,this.policy=r,this.array=oY(this.capacity)}Ge.prototype.set=function(e,t){if(this.length<e)throw new Error("BitVector.set: index out of bounds.");var r=e>>5,n=e&31,i=this.array[r],s;return t===0||t===!1?s=this.array[r]&=~(1<<n):s=this.array[r]|=1<<n,s=s>>>0,s>i?this.size++:s<i&&this.size--,this};Ge.prototype.reset=function(e){var t=e>>5,r=e&31,n=this.array[t],i;return i=this.array[t]&=~(1<<r),i<n&&this.size--,this};Ge.prototype.flip=function(e){var t=e>>5,r=e&31,n=this.array[t],i=this.array[t]^=1<<r;return i=i>>>0,i>n?this.size++:i<n&&this.size--,this};Ge.prototype.applyPolicy=function(e){var t=this.policy(e||this.capacity);if(typeof t!="number"||t<0)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(t<=this.capacity)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned a less or equal capacity to allocate.");return Math.ceil(t/32)*32};Ge.prototype.reallocate=function(e){var t=e;if(e=Math.ceil(e/32)*32,t<this.length&&(this.length=t),e===this.capacity)return this;var r=this.array,n=e/32;return n===this.array.length?this:(n>this.array.length?(this.array=new Uint32Array(n),this.array.set(r,0)):this.array=r.slice(0,n),this.capacity=e,this)};Ge.prototype.grow=function(e){var t;if(typeof e=="number"){if(this.capacity>=e)return this;for(t=this.capacity;t<e;)t=this.applyPolicy(t);return this.reallocate(t),this}return t=this.applyPolicy(),this.reallocate(t),this};Ge.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.reallocate(e),this)};Ge.prototype.push=function(e){if(this.capacity===this.length&&this.grow(),e===0||e===!1)return++this.length;this.size++;var t=this.length++,r=t>>5,n=t&31;return this.array[r]|=1<<n,this.length};Ge.prototype.pop=function(){if(this.length!==0){var e=--this.length,t=e>>5,r=e&31;return this.array[t]>>r&1}};Ge.prototype.get=function(e){if(!(this.length<e)){var t=e>>5,r=e&31;return this.array[t]>>r&1}};Ge.prototype.test=function(e){return this.length<e?!1:Boolean(this.get(e))};Ge.prototype.rank=function(e){if(this.size===0)return 0;for(var t=e>>5,r=e&31,n=0,i=0;i<t;i++)n+=$C.table8Popcount(this.array[i]);var s=this.array[t]&(1<<r)-1;return n+=$C.table8Popcount(s),n};Ge.prototype.select=function(e){if(this.size===0||e>=this.length)return-1;for(var t,r=32,n=0,i=0,s=0,o=this.array.length;s<o;s++)if(t=this.array[s],t!==0){s===o-1&&(r=this.length%32||32);for(var a=0;a<r;a++,n++)if(i+=t>>a&1,i===e)return n}};Ge.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.length,n,i,s=32,o=0,a=this.array.length;o<a;o++){n=this.array[o],o===a-1&&(s=r%32||32);for(var u=0;u<s;u++)i=n>>u&1,e.call(t,i,o*32+u)}};Ge.prototype.values=function(){var e=this.length,t=!1,r,n,i=this.array,s=i.length,o=0,a=-1,u=32;return new CC(function l(){if(!t){if(o>=s)return{done:!0};o===s-1&&(u=e%32||32),r=i[o++],t=!0,a=-1}return a++,a>=u?(t=!1,l()):(n=r>>a&1,{value:n})})};Ge.prototype.entries=function(){var e=this.length,t=!1,r,n,i=this.array,s,o=i.length,a=0,u=-1,l=32;return new CC(function f(){if(!t){if(a>=o)return{done:!0};a===o-1&&(l=e%32||32),r=i[a++],t=!0,u=-1}return u++,s=~-a*32+u,u>=l?(t=!1,f()):(n=r>>u&1,{value:[s,n]})})};typeof Symbol<"u"&&(Ge.prototype[Symbol.iterator]=Ge.prototype.values);Ge.prototype.inspect=function(){var e=new Uint8Array(this.length);return this.forEach(function(t,r){e[r]=t}),Object.defineProperty(e,"constructor",{value:Ge,enumerable:!1}),e};typeof Symbol<"u"&&(Ge.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ge.prototype.inspect);Ge.prototype.toJSON=function(){return Array.from(this.array.slice(0,(this.length>>5)+1))};IC.exports=Ge});var xC=v((Lre,kC)=>{function ms(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)&4294967295}function aY(e,t){return(e&65535)+(t>>>16)+(((e>>>16)+t&65535)<<16)&4294967295}function Ug(e,t){return e<<t|e>>>32-t}kC.exports=function(t,r){var n=3432918353,i=461845907,s=15,o=13,a=5,u=1801774676,l=t,f,c,h;for(c=0,h=r.length-4;c<=h;c+=4)f=r[c]|r[c+1]<<8|r[c+2]<<16|r[c+3]<<24,f=ms(f,n),f=Ug(f,s),f=ms(f,i),l^=f,l=Ug(l,o),l=ms(l,a),l=aY(l,u);switch(f=0,r.length&3){case 3:f^=r[c+2]<<16;case 2:f^=r[c+1]<<8;case 1:f^=r[c],f=ms(f,n),f=Ug(f,s),f=ms(f,i),l^=f;default:}return l^=r.length,l^=l>>>16,l=ms(l,2246822507),l^=l>>>13,l=ms(l,3266489909),l^=l>>>16,l>>>0}});var LC=v((Fre,DC)=>{var uY=xC(),lY=Be(),fY=Math.LN2*Math.LN2,cY={errorRate:.005};function qC(e){var t=new Uint16Array(e.length),r,n;for(r=0,n=e.length;r<n;r++)t[r]=e.charCodeAt(r);return t}function jC(e,t,r){var n=uY(t*4221880213&4294967295,r);return n%(e*8)}function ys(e){var t={};if(!e)throw new Error("mnemonist/BloomFilter.constructor: a BloomFilter must be created with a capacity.");if(typeof e=="object"?t=e:t.capacity=e,typeof t.capacity!="number"||t.capacity<=0)throw new Error("mnemonist/BloomFilter.constructor: `capacity` option should be a positive integer.");if(this.capacity=t.capacity,this.errorRate=t.errorRate||cY.errorRate,typeof this.errorRate!="number"||t.errorRate<=0)throw new Error("mnemonist/BloomFilter.constructor: `errorRate` option should be a positive float.");this.clear()}ys.prototype.clear=function(){var e=-1/fY*this.capacity*Math.log(this.errorRate),t=e/8|0;this.hashFunctions=t*8/this.capacity*Math.LN2|0,this.data=new Uint8Array(t)};ys.prototype.add=function(e){for(var t=qC(e),r=0,n=this.hashFunctions;r<n;r++){var i=jC(this.data.length,r,t),s=1<<(7&i);this.data[i>>3]|=s}return this};ys.prototype.test=function(e){for(var t=qC(e),r=0,n=this.hashFunctions;r<n;r++){var i=jC(this.data.length,r,t);if(!(this.data[i>>3]&1<<(7&i)))return!1}return!0};ys.prototype.toJSON=function(){return this.data};ys.from=function(e,t){if(!t&&(t=e.length||e.size,typeof t!="number"))throw new Error("BloomFilter.from: could not infer the filter's capacity. Try passing it as second argument.");var r=new ys(t);return lY(e,function(n){r.add(n)}),r};DC.exports=ys});var zC=v((zre,FC)=>{var hY=Be();function tn(e){if(typeof e!="function")throw new Error("mnemonist/BKTree.constructor: given `distance` should be a function.");this.distance=e,this.clear()}tn.prototype.add=function(e){if(!this.root)return this.root={item:e,children:{}},this.size++,this;for(var t=this.root,r;r=this.distance(e,t.item),!!t.children[r];)t=t.children[r];return t.children[r]={item:e,children:{}},this.size++,this};tn.prototype.search=function(e,t){if(!this.root)return[];for(var r=[],n=[this.root],i,s,o,a,u;n.length;)for(i=n.pop(),o=this.distance(t,i.item),o<=e&&r.push({item:i.item,distance:o}),a=o-e,u=o+e+1;a<u;a++)s=i.children[a],s&&n.push(s);return r};tn.prototype.clear=function(){this.size=0,this.root=null};tn.prototype.toJSON=function(){return this.root};tn.prototype.inspect=function(){for(var e=[],t=[this.root],r,n;t.length;)if(r=t.pop(),!!r){e.push(r.item);for(n in r.children)t.push(r.children[n])}return Object.defineProperty(e,"constructor",{value:tn,enumerable:!1}),e};typeof Symbol<"u"&&(tn.prototype[Symbol.for("nodejs.util.inspect.custom")]=tn.prototype.inspect);tn.from=function(e,t){var r=new tn(t);return hY(e,function(n){r.add(n)}),r};FC.exports=tn});var Gg=v((Mre,HC)=>{var Bg=hr(),MC=Tt();function st(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}st.prototype.clear=function(){this.start=0,this.size=0};st.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var t=(this.start+this.size)%this.capacity;return this.items[t]=e,++this.size};st.prototype.unshift=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.start=t,++this.size};st.prototype.pop=function(){if(this.size===0)return;let e=(this.start+this.size-1)%this.capacity;return this.size--,this.items[e]};st.prototype.shift=function(){if(this.size!==0){var e=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[e]}};st.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};st.prototype.peekLast=function(){if(this.size!==0){var e=this.start+this.size-1;return e>this.capacity&&(e-=this.capacity),this.items[e]}};st.prototype.get=function(e){if(this.size!==0)return e=this.start+e,e>this.capacity&&(e-=this.capacity),this.items[e]};st.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.capacity,n=this.size,i=this.start,s=0;s<n;)e.call(t,this.items[i],s,this),i++,s++,i===r&&(i=0)};st.prototype.toArray=function(){var e=this.start+this.size;if(e<this.capacity)return this.items.slice(this.start,e);for(var t=new this.ArrayClass(this.size),r=this.capacity,n=this.size,i=this.start,s=0;s<n;)t[s]=this.items[i],i++,s++,i===r&&(i=0);return t};st.prototype.values=function(){var e=this.items,t=this.capacity,r=this.size,n=this.start,i=0;return new MC(function(){if(i>=r)return{done:!0};var s=e[n];return n++,i++,n===t&&(n=0),{value:s,done:!1}})};st.prototype.entries=function(){var e=this.items,t=this.capacity,r=this.size,n=this.start,i=0;return new MC(function(){if(i>=r)return{done:!0};var s=e[n];return n++,n===t&&(n=0),{value:[i++,s],done:!1}})};typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=st.prototype.values);st.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:st,enumerable:!1}),e};typeof Symbol<"u"&&(st.prototype[Symbol.for("nodejs.util.inspect.custom")]=st.prototype.inspect);st.from=function(e,t,r){if(arguments.length<3&&(r=Bg.guessLength(e),typeof r!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new st(t,r);if(Bg.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Bg.forEach(e,function(o){n.push(o)}),n};HC.exports=st});var BC=v((Hre,UC)=>{var Kg=hr(),Jg=Gg();function $o(e,t){if(arguments.length<2)throw new Error("mnemonist/circular-buffer: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/circular-buffer: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}function VC(e){$o.prototype[e]=Jg.prototype[e]}Object.keys(Jg.prototype).forEach(VC);typeof Symbol<"u"&&Object.getOwnPropertySymbols(Jg.prototype).forEach(VC);$o.prototype.push=function(e){var t=(this.start+this.size)%this.capacity;return this.items[t]=e,this.size===this.capacity?(this.start=(t+1)%this.capacity,this.size):++this.size};$o.prototype.unshift=function(e){var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.size===this.capacity?(this.start=t,this.size):(this.start=t,++this.size)};$o.from=function(e,t,r){if(arguments.length<3&&(r=Kg.guessLength(e),typeof r!="number"))throw new Error("mnemonist/circular-buffer.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new $o(t,r);if(Kg.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Kg.forEach(e,function(o){n.push(o)}),n};UC.exports=$o});var KC=v((Vre,GC)=>{function Dt(e){if(typeof e!="function")throw new Error("mnemonist/DefaultMap.constructor: expecting a function.");this.items=new Map,this.factory=e,this.size=0}Dt.prototype.clear=function(){this.items.clear(),this.size=0};Dt.prototype.get=function(e){var t=this.items.get(e);return typeof t>"u"&&(t=this.factory(e,this.size),this.items.set(e,t),this.size++),t};Dt.prototype.peek=function(e){return this.items.get(e)};Dt.prototype.set=function(e,t){return this.items.set(e,t),this.size=this.items.size,this};Dt.prototype.has=function(e){return this.items.has(e)};Dt.prototype.delete=function(e){var t=this.items.delete(e);return this.size=this.items.size,t};Dt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};Dt.prototype.entries=function(){return this.items.entries()};Dt.prototype.keys=function(){return this.items.keys()};Dt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Dt.prototype[Symbol.iterator]=Dt.prototype.entries);Dt.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Dt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Dt.prototype.inspect);Dt.autoIncrement=function(){var e=0;return function(){return e++}};GC.exports=Dt});var YC=v((Ure,JC)=>{function Sn(e){if(typeof e!="function")throw new Error("mnemonist/DefaultWeakMap.constructor: expecting a function.");this.items=new WeakMap,this.factory=e}Sn.prototype.clear=function(){this.items=new WeakMap};Sn.prototype.get=function(e){var t=this.items.get(e);return typeof t>"u"&&(t=this.factory(e),this.items.set(e,t)),t};Sn.prototype.peek=function(e){return this.items.get(e)};Sn.prototype.set=function(e,t){return this.items.set(e,t),this};Sn.prototype.has=function(e){return this.items.has(e)};Sn.prototype.delete=function(e){return this.items.delete(e)};Sn.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Sn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Sn.prototype.inspect);JC.exports=Sn});var XC=v((Bre,WC)=>{var Yg=tr();function bn(e){var t=Yg.getPointerArray(e),r=Yg.getPointerArray(Math.log2(e));this.size=e,this.dimension=e,this.parents=new t(e),this.ranks=new r(e);for(var n=0;n<e;n++)this.parents[n]=n}bn.prototype.find=function(e){for(var t=e,r,n;r=this.parents[t],t!==r;)t=r;for(;n=this.parents[e],n!==t;)this.parents[e]=t,e=n;return t};bn.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);if(r===n)return this;this.dimension--;var i=this.ranks[e],s=this.ranks[t];return i<s?this.parents[r]=n:i>s?this.parents[n]=r:(this.parents[n]=r,this.ranks[r]++),this};bn.prototype.connected=function(e,t){var r=this.find(e);return r===this.find(t)};bn.prototype.mapping=function(){for(var e=Yg.getPointerArray(this.dimension),t={},r=new e(this.size),n=0,i,s=0,o=this.parents.length;s<o;s++)i=this.find(s),typeof t[i]>"u"?(r[s]=n,t[i]=n++):r[s]=t[i];return r};bn.prototype.compile=function(){for(var e={},t=new Array(this.dimension),r=0,n,i=0,s=this.parents.length;i<s;i++)n=this.find(i),typeof e[n]>"u"?(t[r]=[i],e[n]=r++):t[e[n]].push(i);return t};bn.prototype.inspect=function(){var e=this.compile();return Object.defineProperty(e,"constructor",{value:bn,enumerable:!1}),e};typeof Symbol<"u"&&(bn.prototype[Symbol.for("nodejs.util.inspect.custom")]=bn.prototype.inspect);WC.exports=bn});var vc=v((Gre,eI)=>{var QC=$u(),Wg=yc(),dY=QC.DEFAULT_COMPARATOR,pY=QC.reverseComparator;function mY(e,t,r,n){for(var i=r,s=n,o=t[n],a=2*n+1,u;a<i;)u=a+1,u<i&&e(t[a],t[u])>=0&&(a=u),t[n]=t[a],n=a,a=2*n+1;t[n]=o,Wg.siftDown(e,t,s,n)}function ZC(e,t,r,n){for(var i=n,s=i,o=new e(n),a,u;s>0;)a=r[--s],s!==0&&(u=r[0],r[0]=a,mY(t,r,--n,0),a=u),o[s]=a;return o}function En(e,t,r){if(arguments.length===2&&(r=t,t=null),this.ArrayClass=e,this.capacity=r,this.items=new e(r),this.clear(),this.comparator=t||dY,typeof r!="number"&&r<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=pY(this.comparator)}En.prototype.clear=function(){this.size=0};En.prototype.push=function(e){return this.size<this.capacity?(this.items[this.size]=e,Wg.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(e,this.items[0])>0&&Wg.replace(this.comparator,this.items,e),this.size};En.prototype.peek=function(){return this.items[0]};En.prototype.consume=function(){var e=ZC(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,e};En.prototype.toArray=function(){return ZC(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};En.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:En,enumerable:!1}),e};typeof Symbol<"u"&&(En.prototype[Symbol.for("nodejs.util.inspect.custom")]=En.prototype.inspect);eI.exports=En});var nI=v((Kre,rI)=>{var yY=Be(),tI=function(e){return e};function Bt(e){if(this.items=new Map,this.clear(),Array.isArray(e)?(this.writeHashFunction=e[0],this.readHashFunction=e[1]):(this.writeHashFunction=e,this.readHashFunction=e),this.writeHashFunction||(this.writeHashFunction=tI),this.readHashFunction||(this.readHashFunction=tI),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.")}Bt.prototype.clear=function(){this.items.clear(),this.size=0};Bt.prototype.add=function(e){var t=this.writeHashFunction(e);return this.items.set(t,e),this.size=this.items.size,this};Bt.prototype.set=function(e,t){return e=this.writeHashFunction(e),this.items.set(e,t),this.size=this.items.size,this};Bt.prototype.get=function(e){return e=this.readHashFunction(e),this.items.get(e)};Bt.prototype.has=function(e){return e=this.readHashFunction(e),this.items.has(e)};Bt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(function(r){e.call(t,r,r)})};Bt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Bt.prototype[Symbol.iterator]=Bt.prototype.values);Bt.prototype.inspect=function(){var e=Array.from(this.items.values());return Object.defineProperty(e,"constructor",{value:Bt,enumerable:!1}),e};typeof Symbol<"u"&&(Bt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Bt.prototype.inspect);Bt.from=function(e,t,r){var n=new Bt(t);return yY(e,function(i,s){r?n.set(s,i):n.add(i)}),n};rI.exports=Bt});var Xg=v((Jre,iI)=>{var _c=Tt(),gY=Be();function De(e){this.Container=e||Array,this.items=new Map,this.clear(),Object.defineProperty(this.items,"constructor",{value:De,enumerable:!1})}De.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};De.prototype.set=function(e,t){var r=this.items.get(e),n;return r||(this.dimension++,r=new this.Container,this.items.set(e,r)),this.Container===Set?(n=r.size,r.add(t),n<r.size&&this.size++):(r.push(t),this.size++),this};De.prototype.delete=function(e){var t=this.items.get(e);return t?(this.size-=this.Container===Set?t.size:t.length,this.dimension--,this.items.delete(e),!0):!1};De.prototype.remove=function(e,t){var r=this.items.get(e),n,i;return r?this.Container===Set?(n=r.delete(t),n&&this.size--,r.size===0&&(this.items.delete(e),this.dimension--),n):(i=r.indexOf(t),i===-1?!1:(this.size--,r.length===1?(this.items.delete(e),this.dimension--,!0):(r.splice(i,1),!0))):!1};De.prototype.has=function(e){return this.items.has(e)};De.prototype.get=function(e){return this.items.get(e)};De.prototype.multiplicity=function(e){var t=this.items.get(e);return typeof t>"u"?0:this.Container===Set?t.size:t.length};De.prototype.count=De.prototype.multiplicity;De.prototype.forEach=function(e,t){t=arguments.length>1?t:this;var r;function n(i){e.call(t,i,r)}this.items.forEach(function(i,s){r=s,i.forEach(n)})};De.prototype.forEachAssociation=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};De.prototype.keys=function(){return this.items.keys()};De.prototype.values=function(){var e=this.items.values(),t=!1,r,n,i,s;return this.Container===Set?new _c(function o(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,r=n.value.values()}return n=r.next(),n.done?(t=!1,o()):{done:!1,value:n.value}}):new _c(function o(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,r=n.value,i=0,s=r.length}return i>=s?(t=!1,o()):{done:!1,value:r[i++]}})};De.prototype.entries=function(){var e=this.items.entries(),t=!1,r,n,i,s,o;return this.Container===Set?new _c(function a(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,i=n.value[0],r=n.value[1].values()}return n=r.next(),n.done?(t=!1,a()):{done:!1,value:[i,n.value]}}):new _c(function a(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,i=n.value[0],r=n.value[1],s=0,o=r.length}return s>=o?(t=!1,a()):{done:!1,value:[i,r[s++]]}})};De.prototype.containers=function(){return this.items.values()};De.prototype.associations=function(){return this.items.entries()};typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=De.prototype.entries);De.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(De.prototype[Symbol.for("nodejs.util.inspect.custom")]=De.prototype.inspect);De.prototype.toJSON=function(){return this.items};De.from=function(e,t){var r=new De(t);return gY(e,function(n,i){r.set(i,n)}),r};iI.exports=De});var aI=v((Yre,oI)=>{var vY=Xg(),_Y=Be(),sI=function(e){return e};function Gt(e,t){if(this.items=new vY(t),this.clear(),Array.isArray(e)?(this.writeHashFunction=e[0],this.readHashFunction=e[1]):(this.writeHashFunction=e,this.readHashFunction=e),this.writeHashFunction||(this.writeHashFunction=sI),this.readHashFunction||(this.readHashFunction=sI),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.")}Gt.prototype.clear=function(){this.items.clear(),this.size=0,this.dimension=0};Gt.prototype.add=function(e){var t=this.writeHashFunction(e);return this.items.set(t,e),this.size=this.items.size,this.dimension=this.items.dimension,this};Gt.prototype.set=function(e,t){return e=this.writeHashFunction(e),this.items.set(e,t),this.size=this.items.size,this.dimension=this.items.dimension,this};Gt.prototype.get=function(e){return e=this.readHashFunction(e),this.items.get(e)};Gt.prototype.has=function(e){return e=this.readHashFunction(e),this.items.has(e)};Gt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(function(r){e.call(t,r,r)})};Gt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Gt.prototype[Symbol.iterator]=Gt.prototype.values);Gt.prototype.inspect=function(){var e=Array.from(this);return Object.defineProperty(e,"constructor",{value:Gt,enumerable:!1}),e};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);Gt.from=function(e,t,r,n){arguments.length===3&&typeof r=="boolean"&&(n=r,r=Array);var i=new Gt(t,r);return _Y(e,function(s,o){n?i.set(o,s):i.add(s)}),i};oI.exports=Gt});var fI=v((Wre,lI)=>{var uI=1024;function wY(e){return(e&e-1)===0}function rn(e,t){if(arguments.length<1)throw new Error("mnemonist/hashed-array-tree: expecting at least a byte array constructor.");var r=t||0,n=uI,i=0;if(typeof t=="object"&&(r=t.initialCapacity||0,i=t.initialLength||0,n=t.blockSize||uI),!n||!wY(n))throw new Error("mnemonist/hashed-array-tree: block size should be a power of two.");var s=Math.max(i,r),o=Math.ceil(s/n);this.ArrayClass=e,this.length=i,this.capacity=o*n,this.blockSize=n,this.offsetMask=n-1,this.blockMask=Math.log2(n),this.blocks=new Array(o);for(var a=0;a<o;a++)this.blocks[a]=new this.ArrayClass(this.blockSize)}rn.prototype.set=function(e,t){if(this.length<e)throw new Error("HashedArrayTree("+this.ArrayClass.name+").set: index out of bounds.");var r=e>>this.blockMask,n=e&this.offsetMask;return this.blocks[r][n]=t,this};rn.prototype.get=function(e){if(!(this.length<e)){var t=e>>this.blockMask,r=e&this.offsetMask;return this.blocks[t][r]}};rn.prototype.grow=function(e){if(typeof e!="number"&&(e=this.capacity+this.blockSize),this.capacity>=e)return this;for(;this.capacity<e;)this.blocks.push(new this.ArrayClass(this.blockSize)),this.capacity+=this.blockSize;return this};rn.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.grow(e),this)};rn.prototype.push=function(e){this.capacity===this.length&&this.grow();var t=this.length,r=t>>this.blockMask,n=t&this.offsetMask;return this.blocks[r][n]=e,++this.length};rn.prototype.pop=function(){if(this.length!==0){var e=this.blocks[this.blocks.length-1],t=--this.length&this.offsetMask;return e[t]}};rn.prototype.inspect=function(){for(var e=new this.ArrayClass(this.length),t,r=0,n=this.length;r<n;r++)t=r>>this.blockMask,e[r]=this.blocks[t][r&this.offsetMask];return e.type=this.ArrayClass.name,e.items=this.length,e.capacity=this.capacity,e.blockSize=this.blockSize,Object.defineProperty(e,"constructor",{value:rn,enumerable:!1}),e};typeof Symbol<"u"&&(rn.prototype[Symbol.for("nodejs.util.inspect.custom")]=rn.prototype.inspect);lI.exports=rn});var Zg=v((Xre,hI)=>{var cI=Tt(),Qg=hr();function gt(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=t,this.ArrayClass=e,this.items=new this.ArrayClass(this.capacity),this.clear()}gt.prototype.clear=function(){this.size=0};gt.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=e,this.size};gt.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]};gt.prototype.peek=function(){return this.items[this.size-1]};gt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.items.length;r<n;r++)e.call(t,this.items[n-r-1],r,this)};gt.prototype.toArray=function(){for(var e=new this.ArrayClass(this.size),t=this.size-1,r=this.size;r--;)e[r]=this.items[t-r];return e};gt.prototype.values=function(){var e=this.items,t=this.size,r=0;return new cI(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return r++,{value:n,done:!1}})};gt.prototype.entries=function(){var e=this.items,t=this.size,r=0;return new cI(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=gt.prototype.values);gt.prototype.toString=function(){return this.toArray().join(",")};gt.prototype.toJSON=function(){return this.toArray()};gt.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:gt,enumerable:!1}),e};typeof Symbol<"u"&&(gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt.prototype.inspect);gt.from=function(e,t,r){if(arguments.length<3&&(r=Qg.guessLength(e),typeof r!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new gt(t,r);if(Qg.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Qg.forEach(e,function(o){n.push(o)}),n};hI.exports=gt});var pI=v((Qre,dI)=>{var SY=hr(),bY=tr(),EY=Zg();function e0(e,t,r,n,i,s,o,a){var u=o+(a-o)/2|0,l=~-u,f=-~u,c=r[u];n[s]=c+1;var h=t?t(e[c]):e[c][1],d=s*2+1,p=s*2+2,y=-1/0,w=-1/0;o<=l&&(y=e0(e,t,r,n,i,d,o,l)),f<=a&&(w=e0(e,t,r,n,i,p,f,a));var _=Math.max(h,y,w),S=c;return _===y?S=i[n[d]-1]:_===w&&(S=i[n[p]-1]),i[c]=S,_}function Rn(e,t){this.size=e.length,this.intervals=e;var r=null,n=null;Array.isArray(t)&&(r=t[0],n=t[1]);var i=e.length,s=bY.getPointerArray(i+1),o=new s(i),a;for(a=1;a<i;a++)o[a]=a;o.sort(function(h,d){return h=e[h],d=e[d],r?(h=r(h),d=r(d)):(h=h[0],d=d[0]),h<d?-1:h>d?1:0});var u=Math.ceil(Math.log2(i+1)),l=Math.pow(2,u)-1,f=new s(l),c=new s(i);e0(e,n,o,f,c,0,0,i-1),o=null,this.height=u,this.tree=f,this.augmentations=c,this.startGetter=r,this.endGetter=n,this.stack=new EY(s,this.height)}Rn.prototype.intervalsContainingPoint=function(e){var t=[],r=this.stack;r.clear(),r.push(0);for(var n=this.tree.length,i,s,o,a,u,l,f,c,h;r.size;)i=r.pop(),s=this.tree[i]-1,o=this.intervals[s],a=this.intervals[this.augmentations[s]],f=this.endGetter?this.endGetter(a):a[1],!(e>f)&&(c=i*2+1,c<n&&this.tree[c]!==0&&r.push(c),u=this.startGetter?this.startGetter(o):o[0],l=this.endGetter?this.endGetter(o):o[1],e>=u&&e<=l&&t.push(o),!(e<u)&&(h=i*2+2,h<n&&this.tree[h]!==0&&r.push(h)));return t};Rn.prototype.intervalsOverlappingInterval=function(e){var t=this.startGetter?this.startGetter(e):e[0],r=this.endGetter?this.endGetter(e):e[1],n=[],i=this.stack;i.clear(),i.push(0);for(var s=this.tree.length,o,a,u,l,f,c,h,d,p;i.size;)o=i.pop(),a=this.tree[o]-1,u=this.intervals[a],l=this.intervals[this.augmentations[a]],h=this.endGetter?this.endGetter(l):l[1],!(t>h)&&(d=o*2+1,d<s&&this.tree[d]!==0&&i.push(d),f=this.startGetter?this.startGetter(u):u[0],c=this.endGetter?this.endGetter(u):u[1],r>=f&&t<=c&&n.push(u),!(r<f)&&(p=o*2+2,p<s&&this.tree[p]!==0&&i.push(p)));return n};Rn.prototype.inspect=function(){var e=this.intervals.slice();return Object.defineProperty(e,"constructor",{value:Rn,enumerable:!1}),e};typeof Symbol<"u"&&(Rn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Rn.prototype.inspect);Rn.from=function(e,t){return SY.isArrayLike(e)?new Rn(e,t):new Rn(Array.from(e),t)};dI.exports=Rn});var t0=v(Ii=>{Ii.search=function(e,t,r,n){var i=0;r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length,n--;for(var s;r<=n;)if(i=r+n>>>1,s=e[i],s>t)n=~-i;else if(s<t)r=-~i;else return i;return-1};Ii.searchWithComparator=function(e,t,r){for(var n=0,i=0,s=~-t.length,o;i<=s;)if(n=i+s>>>1,o=e(t[n],r),o>0)s=~-n;else if(o<0)i=-~n;else return n;return-1};Ii.lowerBound=function(e,t,r,n){var i=0;for(r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length;r<n;)i=r+n>>>1,t<=e[i]?n=i:r=-~i;return r};Ii.lowerBoundWithComparator=function(e,t,r){for(var n=0,i=0,s=t.length;i<s;)n=i+s>>>1,e(r,t[n])<=0?s=n:i=-~n;return i};Ii.lowerBoundIndices=function(e,t,r,n,i){var s=0;for(n=typeof n<"u"?n:0,i=typeof i<"u"?i:e.length;n<i;)s=n+i>>>1,r<=e[t[s]]?i=s:n=-~s;return n};Ii.upperBound=function(e,t,r,n){var i=0;for(r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length;r<n;)i=r+n>>>1,t>=e[i]?r=-~i:n=i;return r};Ii.upperBoundWithComparator=function(e,t,r){for(var n=0,i=0,s=t.length;i<s;)n=i+s>>>1,e(r,t[n])>=0?i=-~n:s=n;return i}});var vI=v(Ni=>{var Co=tr(),Io=hr().isArrayLike,gs=t0(),mI=zg();function yI(e,t){if(e.length===0)return t.slice();if(t.length===0)return e.slice();var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<=i)return Co.isTypedArray(e)?Co.concat(e,t):e.concat(t);var s=new e.constructor(e.length+t.length),o,a,u;for(o=0,a=e.length;o<a&&(u=e[o],u<=i);o++)s[o]=u;for(var l=o,f=e.length,c=0,h=t.length,d,p;l<f&&c<h;)d=e[l],p=t[c],d<=p?(s[o++]=d,l++):(s[o++]=p,c++);for(;l<f;)s[o++]=e[l++];for(;c<h;)s[o++]=t[c++];return s}function gI(e,t){if(e.length===0)return t.slice();if(t.length===0)return e.slice();var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<i)return Co.isTypedArray(e)?Co.concat(e,t):e.concat(t);var s=new e.constructor,o,a,u;for(o=0,a=e.length;o<a&&(u=e[o],u<i);o++)s.push(u);for(var l=o,f=e.length,c=0,h=t.length,d,p;l<f&&c<h;)d=e[l],p=t[c],d<=p?((s.length===0||s[s.length-1]!==d)&&s.push(d),l++):((s.length===0||s[s.length-1]!==p)&&s.push(p),c++);for(;l<f;)d=e[l++],(s.length===0||s[s.length-1]!==d)&&s.push(d);for(;c<h;)p=t[c++],(s.length===0||s[s.length-1]!==p)&&s.push(p);return s}Ni.intersectionUniqueArrays=function(e,t){if(e.length===0||t.length===0)return new e.constructor(0);var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<i)return new e.constructor(0);for(var s=new e.constructor,o=gs.lowerBound(e,i),a=e.length,u=0,l=gs.upperBound(t,n),f,c;o<a&&u<l;)f=e[o],c=t[u],f<c?o=gs.lowerBound(e,c,o+1):f>c?u=gs.lowerBound(t,f,u+1):(s.push(f),o++,u++);return s};function RY(e){var t=0,r=-1/0,n,i,s,o=[];for(i=0,s=e.length;i<s;i++)n=e[i].length,n!==0&&(o.push(e[i]),t+=n,n>r&&(r=n));if(o.length===0)return new e[0].constructor(0);if(o.length===1)return o[0].slice();if(o.length===2)return yI(o[0],o[1]);e=o;var a=new e[0].constructor(t),u=Co.getPointerArray(r),l=new u(e.length),f=new mI(function(d,p){return d=e[d][l[d]],p=e[p][l[p]],d<p?-1:d>p?1:0});for(i=0;i<s;i++)f.push(i);i=0;for(var c,h;f.size;)c=f.pop(),h=e[c][l[c]++],a[i++]=h,l[c]<e[c].length&&f.push(c);return a}function PY(e){var t=-1/0,r,n,i,s=[];for(n=0,i=e.length;n<i;n++)r=e[n].length,r!==0&&(s.push(e[n]),r>t&&(t=r));if(s.length===0)return new e[0].constructor(0);if(s.length===1)return s[0].slice();if(s.length===2)return gI(s[0],s[1]);e=s;var o=new e[0].constructor,a=Co.getPointerArray(t),u=new a(e.length),l=new mI(function(h,d){return h=e[h][u[h]],d=e[d][u[d]],h<d?-1:h>d?1:0});for(n=0;n<i;n++)l.push(n);for(var f,c;l.size;)f=l.pop(),c=e[f][u[f]++],(o.length===0||o[o.length-1]!==c)&&o.push(c),u[f]<e[f].length&&l.push(f);return o}Ni.kWayIntersectionUniqueArrays=function(e){var t=-1/0,r=-1/0,n=1/0,i,s,o,a,u;for(a=0,u=e.length;a<u;a++){if(o=e[a].length,o===0)return[];o>t&&(t=o),i=e[a][0],s=e[a][o-1],i>r&&(r=i),s<n&&(n=s)}if(r>n)return[];if(r===n)return[r];var l,f,c=e[0],h,d,p,y,w,_,S=r;for(a=1;a<u;a++){for(l=c,f=e[a],c=new Array,h=0,d=gs.lowerBound(f,S),p=l.length,y=f.length;h<p&&d<y;)w=l[h],_=f[d],w<_?h=gs.lowerBound(l,_,h+1):w>_?d=gs.lowerBound(f,w,d+1):(c.push(w),h++,d++);if(c.length===0)return c;S=c[0]}return c};Ni.merge=function(){if(arguments.length===2){if(Io(arguments[0]))return yI(arguments[0],arguments[1])}else if(Io(arguments[0]))return RY(arguments);return null};Ni.unionUnique=function(){if(arguments.length===2){if(Io(arguments[0]))return gI(arguments[0],arguments[1])}else if(Io(arguments[0]))return PY(arguments);return null};Ni.intersectionUnique=function(){if(arguments.length===2){if(Io(arguments[0]))return Ni.intersectionUniqueArrays(arguments[0],arguments[1])}else if(Io(arguments[0]))return Ni.kWayIntersectionUniqueArrays(arguments);return null}});var SI=v((tne,wI)=>{var TY=Tt(),OY=Be(),AY=vI();function _I(e){return e}function nr(e){if(this.clear(),Array.isArray(e)?(this.documentTokenizer=e[0],this.queryTokenizer=e[1]):(this.documentTokenizer=e,this.queryTokenizer=e),this.documentTokenizer||(this.documentTokenizer=_I),this.queryTokenizer||(this.queryTokenizer=_I),typeof this.documentTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: document tokenizer is not a function.");if(typeof this.queryTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: query tokenizer is not a function.")}nr.prototype.clear=function(){this.items=[],this.mapping=new Map,this.size=0,this.dimension=0};nr.prototype.add=function(e){this.size++;var t=this.items.length;this.items.push(e);var r=this.documentTokenizer(e);if(!Array.isArray(r))throw new Error("mnemonist/InvertedIndex.add: tokenizer function should return an array of tokens.");for(var n=new Set,i,s,o=0,a=r.length;o<a;o++)i=r[o],!n.has(i)&&(n.add(i),s=this.mapping.get(i),s||(s=[],this.mapping.set(i,s)),s.push(t));return this.dimension=this.mapping.size,this};nr.prototype.get=function(e){if(!this.size)return[];var t=this.queryTokenizer(e);if(!Array.isArray(t))throw new Error("mnemonist/InvertedIndex.query: tokenizer function should return an array of tokens.");if(!t.length)return[];var r=this.mapping.get(t[0]),n,i,s;if(typeof r>"u"||r.length===0)return[];if(t.length>1)for(i=1,s=t.length;i<s;i++){if(n=this.mapping.get(t[i]),typeof n>"u"||n.length===0)return[];r=AY.intersectionUniqueArrays(r,n)}var o=new Array(r.length);for(i=0,s=o.length;i<s;i++)o[i]=this.items[r[i]];return o};nr.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.documents.length;r<n;r++)e.call(t,this.documents[r],r,this)};nr.prototype.documents=function(){var e=this.items,t=e.length,r=0;return new TY(function(){if(r>=t)return{done:!0};var n=e[r++];return{value:n,done:!1}})};nr.prototype.tokens=function(){return this.mapping.keys()};typeof Symbol<"u"&&(nr.prototype[Symbol.iterator]=nr.prototype.documents);nr.prototype.inspect=function(){var e=this.items.slice();return Object.defineProperty(e,"constructor",{value:nr,enumerable:!1}),e};typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=nr.prototype.inspect);nr.from=function(e,t){var r=new nr(t);return OY(e,function(n){r.add(n)}),r};wI.exports=nr});var n0=v(r0=>{var Ot=new Float64Array(64),Ze=new Float64Array(64);function $Y(e,t,r){var n,i,s,o,a;for(Ot[0]=t,Ze[0]=r,i=0;i>=0;)if(s=Ot[i],o=Ze[i]-1,s<o){for(n=e[s];s<o;){for(;e[o]>=n&&s<o;)o--;for(s<o&&(e[s++]=e[o]);e[s]<=n&&s<o;)s++;s<o&&(e[o--]=e[s])}e[s]=n,Ot[i+1]=s+1,Ze[i+1]=Ze[i],Ze[i++]=s,Ze[i]-Ot[i]>Ze[i-1]-Ot[i-1]&&(a=Ot[i],Ot[i]=Ot[i-1],Ot[i-1]=a,a=Ze[i],Ze[i]=Ze[i-1],Ze[i-1]=a)}else i--;return e}r0.inplaceQuickSort=$Y;function CY(e,t,r,n){var i,s,o,a,u,l;for(Ot[0]=r,Ze[0]=n,s=0;s>=0;)if(o=Ot[s],a=Ze[s]-1,o<a){for(u=t[o],i=e[u];o<a;){for(;e[t[a]]>=i&&o<a;)a--;for(o<a&&(t[o++]=t[a]);e[t[o]]<=i&&o<a;)o++;o<a&&(t[a--]=t[o])}t[o]=u,Ot[s+1]=o+1,Ze[s+1]=Ze[s],Ze[s++]=o,Ze[s]-Ot[s]>Ze[s-1]-Ot[s-1]&&(l=Ot[s],Ot[s]=Ot[s-1],Ot[s-1]=l,l=Ze[s],Ze[s]=Ze[s-1],Ze[s-1]=l)}else s--;return t}r0.inplaceQuickSortIndices=CY});var TI=v((nne,PI)=>{var IY=hr(),wc=tr(),bI=$u().createTupleComparator,EI=vc(),NY=n0().inplaceQuickSortIndices;function i0(e,t,r,n){var i,s=0,o;for(i=0;i<e;i++)o=t[i][r]-n[i],s+=o*o;return s}function kY(e,t){var r=t.length,n=new Array(e),i=new Array(r),s,o=wc.getPointerArray(r),a=new o(r),u,l,f,c=!0;for(u=0;u<e;u++){for(s=new Float64Array(r),l=0;l<r;l++)f=t[l],s[l]=f[1][u],c&&(i[l]=f[0],a[l]=l);c=!1,n[u]=s}return{axes:n,ids:a,labels:i}}function RI(e,t,r,n){for(var i=n.length,s=wc.getPointerArray(i+1),o=new s(i),a=new s(i),u=new s(i),l=[[0,0,r.length,-1,0]],f,c,h,d,p,y,w,_,S=0;l.length!==0;)f=l.pop(),_=f[0],y=f[1],w=f[2],c=f[3],h=f[4],NY(t[_],r,y,w),i=w-y,d=y+(i>>>1),p=r[d],o[S]=p,c>-1&&(h===0?a[c]=S+1:u[c]=S+1),_=(_+1)%e,d!==y&&d!==w-1&&l.push([_,d+1,w,S,1]),d!==y&&l.push([_,y,d,S,0]),S++;return{axes:t,labels:n,pivots:o,lefts:a,rights:u}}function zr(e,t){this.dimensions=e,this.visited=0,this.axes=t.axes,this.labels=t.labels,this.pivots=t.pivots,this.lefts=t.lefts,this.rights=t.rights,this.size=this.labels.length}zr.prototype.nearestNeighbor=function(e){var t=1/0,r=null,n=this.dimensions,i=this.axes,s=this.pivots,o=this.lefts,a=this.rights,u=0;function l(f,c){u++;var h=o[c],d=a[c],p=s[c],y=i0(n,i,p,e);if(!(y<t&&(r=p,t=y,y===0))){var w=i[f][p]-e[f];f=(f+1)%n,w>0?h!==0&&l(f,h-1):d!==0&&l(f,d-1),w*w<t&&(w>0?d!==0&&l(f,d-1):h!==0&&l(f,h-1))}}return l(0,0),this.visited=u,this.labels[r]};var xY=bI(3),qY=bI(2);zr.prototype.kNearestNeighbors=function(e,t){if(e<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(e=Math.min(e,this.size),e===1)return[this.nearestNeighbor(t)];var r=new EI(Array,xY,e),n=this.dimensions,i=this.axes,s=this.pivots,o=this.lefts,a=this.rights,u=0;function l(h,d){var p=o[d],y=a[d],w=s[d],_=i0(n,i,w,t);r.push([_,u++,w]);var S=t[h],g=i[h][w],m=S-g;h=(h+1)%n,S<g?p!==0&&l(h,p-1):y!==0&&l(h,y-1),(m*m<r.peek()[0]||r.size<e)&&(S<g?y!==0&&l(h,y-1):p!==0&&l(h,p-1))}l(0,0),this.visited=u;for(var f=r.consume(),c=0;c<f.length;c++)f[c]=this.labels[f[c][2]];return f};zr.prototype.linearKNearestNeighbors=function(e,t){if(e<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");e=Math.min(e,this.size);var r=new EI(Array,qY,e),n,i,s;for(n=0,i=this.size;n<i;n++)s=i0(this.dimensions,this.axes,this.pivots[n],t),r.push([s,n]);var o=r.consume();for(n=0;n<o.length;n++)o[n]=this.labels[this.pivots[o[n][1]]];return o};zr.prototype.inspect=function(){var e=new Map;e.dimensions=this.dimensions,Object.defineProperty(e,"constructor",{value:zr,enumerable:!1});var t,r,n;for(t=0;t<this.size;t++){for(n=new Array(this.dimensions),r=0;r<this.dimensions;r++)n[r]=this.axes[r][t];e.set(this.labels[t],n)}return e};typeof Symbol<"u"&&(zr.prototype[Symbol.for("nodejs.util.inspect.custom")]=zr.prototype.inspect);zr.from=function(e,t){var r=IY.toArray(e),n=kY(t,r),i=RI(t,n.axes,n.ids,n.labels);return new zr(t,i)};zr.fromAxes=function(e,t){t||(t=wc.indices(e[0].length));var r=e.length,n=RI(e.length,e,wc.indices(t.length),t);return new zr(r,n)};PI.exports=zr});var $I=v((ine,AI)=>{var OI=Tt(),jY=Be();function Xe(){this.clear()}Xe.prototype.clear=function(){this.head=null,this.tail=null,this.size=0};Xe.prototype.first=function(){return this.head?this.head.item:void 0};Xe.prototype.peek=Xe.prototype.first;Xe.prototype.last=function(){return this.tail?this.tail.item:void 0};Xe.prototype.push=function(e){var t={item:e,next:null};return this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this.size++,this.size};Xe.prototype.unshift=function(e){var t={item:e,next:null};return this.head?(this.head.next||(this.tail=this.head),t.next=this.head,this.head=t):(this.head=t,this.tail=t),this.size++,this.size};Xe.prototype.shift=function(){if(this.size){var e=this.head;return this.head=e.next,this.size--,e.item}};Xe.prototype.forEach=function(e,t){if(this.size){t=arguments.length>1?t:this;for(var r=this.head,n=0;r;)e.call(t,r.item,n,this),r=r.next,n++}};Xe.prototype.toArray=function(){if(!this.size)return[];for(var e=new Array(this.size),t=0,r=this.size,n=this.head;t<r;t++)e[t]=n.item,n=n.next;return e};Xe.prototype.values=function(){var e=this.head;return new OI(function(){if(!e)return{done:!0};var t=e.item;return e=e.next,{value:t,done:!1}})};Xe.prototype.entries=function(){var e=this.head,t=0;return new OI(function(){if(!e)return{done:!0};var r=e.item;return e=e.next,t++,{value:[t-1,r],done:!1}})};typeof Symbol<"u"&&(Xe.prototype[Symbol.iterator]=Xe.prototype.values);Xe.prototype.toString=function(){return this.toArray().join(",")};Xe.prototype.toJSON=function(){return this.toArray()};Xe.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:Xe,enumerable:!1}),e};typeof Symbol<"u"&&(Xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Xe.prototype.inspect);Xe.from=function(e){var t=new Xe;return jY(e,function(r){t.push(r)}),t};AI.exports=Xe});var Sc=v((sne,CI)=>{var s0=Tt(),DY=Be(),LY=tr(),FY=hr();function pt(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=LY.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}pt.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};pt.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],n=this.forward[e];return this.tail===e?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[t]=e,this.head=e,this.forward[e]=t,this};pt.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};pt.prototype.setpop=function(e,t){var r=null,n=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[this.K[i]]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};pt.prototype.has=function(e){return e in this.items};pt.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};pt.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};pt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.size,i=this.head,s=this.K,o=this.V,a=this.forward;r<n;)e.call(t,o[i],s[i],this),i=a[i],r++};pt.prototype.keys=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.forward;return new s0(function(){if(e>=t)return{done:!0};var s=n[r];return e++,e<t&&(r=i[r]),{done:!1,value:s}})};pt.prototype.values=function(){var e=0,t=this.size,r=this.head,n=this.V,i=this.forward;return new s0(function(){if(e>=t)return{done:!0};var s=n[r];return e++,e<t&&(r=i[r]),{done:!1,value:s}})};pt.prototype.entries=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.V,s=this.forward;return new s0(function(){if(e>=t)return{done:!0};var o=n[r],a=i[r];return e++,e<t&&(r=s[r]),{done:!1,value:[o,a]}})};typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=pt.prototype.entries);pt.prototype.inspect=function(){for(var e=new Map,t=this.entries(),r;r=t.next(),!r.done;)e.set(r.value[0],r.value[1]);return Object.defineProperty(e,"constructor",{value:pt,enumerable:!1}),e};typeof Symbol<"u"&&(pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=pt.prototype.inspect);pt.from=function(e,t,r,n){if(arguments.length<2){if(n=FY.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new pt(t,r,n);return DY(e,function(s,o){i.set(o,s)}),i};CI.exports=pt});var NI=v((one,II)=>{var No=Sc(),zY=Be(),MY=tr(),HY=hr();function Pn(e,t,r){arguments.length<2?No.call(this,e):No.call(this,e,t,r);var n=MY.getPointerArray(this.capacity);this.deleted=new n(this.capacity),this.deletedSize=0}for(o0 in No.prototype)Pn.prototype[o0]=No.prototype[o0];var o0;typeof Symbol<"u"&&(Pn.prototype[Symbol.iterator]=No.prototype[Symbol.iterator]);Pn.prototype.clear=function(){No.prototype.clear.call(this),this.deletedSize=0};Pn.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?(this.deletedSize>0?r=this.deleted[--this.deletedSize]:r=this.size,this.size++):(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Pn.prototype.setpop=function(e,t){var r=null,n=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?(this.deletedSize>0?i=this.deleted[--this.deletedSize]:i=this.size,this.size++):(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[this.K[i]]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Pn.prototype.delete=function(e){var t=this.items[e];if(typeof t>"u")return!1;if(delete this.items[e],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var r=this.backward[t],n=this.forward[t];return this.head===t&&(this.head=n),this.tail===t&&(this.tail=r),this.forward[r]=n,this.backward[n]=r,this.size--,this.deleted[this.deletedSize++]=t,!0};Pn.prototype.remove=function(e,t=void 0){var r=this.items[e];if(typeof r>"u")return t;var n=this.V[r];if(delete this.items[e],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,n;var i=this.backward[r],s=this.forward[r];return this.head===r&&(this.head=s),this.tail===r&&(this.tail=i),this.forward[i]=s,this.backward[s]=i,this.size--,this.deleted[this.deletedSize++]=r,n};Pn.from=function(e,t,r,n){if(arguments.length<2){if(n=HY.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Pn(t,r,n);return zY(e,function(s,o){i.set(o,s)}),i};II.exports=Pn});var a0=v((ane,kI)=>{var ko=Sc(),VY=Be(),UY=tr(),BY=hr();function Lt(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var n=UY.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items=new Map}Lt.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};Lt.prototype.set=function(e,t){var r=this.items.get(e);if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],this.items.delete(this.K[r])),this.items.set(e,r),this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Lt.prototype.setpop=function(e,t){var r=null,n=null,i=this.items.get(e);return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],this.items.delete(this.K[i])),this.items.set(e,i),this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Lt.prototype.has=function(e){return this.items.has(e)};Lt.prototype.get=function(e){var t=this.items.get(e);if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Lt.prototype.peek=function(e){var t=this.items.get(e);if(!(typeof t>"u"))return this.V[t]};Lt.prototype.splayOnTop=ko.prototype.splayOnTop;Lt.prototype.forEach=ko.prototype.forEach;Lt.prototype.keys=ko.prototype.keys;Lt.prototype.values=ko.prototype.values;Lt.prototype.entries=ko.prototype.entries;typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=Lt.prototype.entries);Lt.prototype.inspect=ko.prototype.inspect;Lt.from=function(e,t,r,n){if(arguments.length<2){if(n=BY.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Lt(t,r,n);return VY(e,function(s,o){i.set(o,s)}),i};kI.exports=Lt});var qI=v((une,xI)=>{var xo=a0(),GY=Be(),KY=tr(),JY=hr();function Tn(e,t,r){arguments.length<2?xo.call(this,e):xo.call(this,e,t,r);var n=KY.getPointerArray(this.capacity);this.deleted=new n(this.capacity),this.deletedSize=0}for(u0 in xo.prototype)Tn.prototype[u0]=xo.prototype[u0];var u0;typeof Symbol<"u"&&(Tn.prototype[Symbol.iterator]=xo.prototype[Symbol.iterator]);Tn.prototype.clear=function(){xo.prototype.clear.call(this),this.deletedSize=0};Tn.prototype.set=function(e,t){var r=this.items.get(e);if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?(this.deletedSize>0?r=this.deleted[--this.deletedSize]:r=this.size,this.size++):(r=this.tail,this.tail=this.backward[r],this.items.delete(this.K[r])),this.items.set(e,r),this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Tn.prototype.setpop=function(e,t){var r=null,n=null,i=this.items.get(e);return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?(this.deletedSize>0?i=this.deleted[--this.deletedSize]:i=this.size,this.size++):(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],this.items.delete(this.K[i])),this.items.set(e,i),this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Tn.prototype.delete=function(e){var t=this.items.get(e);if(typeof t>"u")return!1;if(this.items.delete(e),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var r=this.backward[t],n=this.forward[t];return this.head===t&&(this.head=n),this.tail===t&&(this.tail=r),this.forward[r]=n,this.backward[n]=r,this.size--,this.deleted[this.deletedSize++]=t,!0};Tn.prototype.remove=function(e,t=void 0){var r=this.items.get(e);if(typeof r>"u")return t;var n=this.V[r];if(this.items.delete(e),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,n;var i=this.backward[r],s=this.forward[r];return this.head===r&&(this.head=s),this.tail===r&&(this.tail=i),this.forward[i]=s,this.backward[s]=i,this.size--,this.deleted[this.deletedSize++]=r,n};Tn.from=function(e,t,r,n){if(arguments.length<2){if(n=JY.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-map.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Tn(t,r,n);return GY(e,function(s,o){i.set(o,s)}),i};xI.exports=Tn});var DI=v((lne,jI)=>{var YY=Tt(),WY=Be(),XY=vc(),QY=function(e,t){return e[1]>t[1]?-1:e[1]<t[1]?1:0};function Pe(){this.items=new Map,Object.defineProperty(this.items,"constructor",{value:Pe,enumerable:!1}),this.clear()}Pe.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};Pe.prototype.add=function(e,t){if(t===0)return this;if(t<0)return this.remove(e,-t);if(t=t||1,typeof t!="number")throw new Error("mnemonist/multi-set.add: given count should be a number.");this.size+=t;let r=this.items.get(e);return r===void 0?this.dimension++:t+=r,this.items.set(e,t),this};Pe.prototype.set=function(e,t){var r;if(typeof t!="number")throw new Error("mnemonist/multi-set.set: given count should be a number.");return t<=0?(r=this.items.get(e),typeof r<"u"&&(this.size-=r,this.dimension--),this.items.delete(e),this):(t=t||1,r=this.items.get(e),typeof r=="number"?this.items.set(e,r+t):(this.dimension++,this.items.set(e,t)),this.size+=t,this)};Pe.prototype.has=function(e){return this.items.has(e)};Pe.prototype.delete=function(e){var t=this.items.get(e);return t===0?!1:(this.size-=t,this.dimension--,this.items.delete(e),!0)};Pe.prototype.remove=function(e,t){if(t!==0){if(t<0)return this.add(e,-t);if(t=t||1,typeof t!="number")throw new Error("mnemonist/multi-set.remove: given count should be a number.");var r=this.items.get(e);if(!(typeof r>"u")){var n=Math.max(0,r-t);n===0?(this.items.delete(e),this.size-=r,this.dimension--):(this.items.set(e,n),this.size-=t)}}};Pe.prototype.edit=function(e,t){var r=this.multiplicity(e);if(r!==0){var n=this.multiplicity(t);return this.items.set(t,r+n),this.items.delete(e),this}};Pe.prototype.multiplicity=function(e){var t=this.items.get(e);return typeof t>"u"?0:t};Pe.prototype.get=Pe.prototype.multiplicity;Pe.prototype.count=Pe.prototype.multiplicity;Pe.prototype.frequency=function(e){if(this.size===0)return 0;var t=this.multiplicity(e);return t/this.size};Pe.prototype.top=function(e){if(typeof e!="number"||e<=0)throw new Error("mnemonist/multi-set.top: n must be a number > 0.");for(var t=new XY(Array,QY,e),r=this.items.entries(),n;n=r.next(),!n.done;)t.push(n.value);return t.consume()};Pe.prototype.forEach=function(e,t){t=arguments.length>1?t:this;var r;this.items.forEach(function(n,i){for(r=0;r<n;r++)e.call(t,i,i)})};Pe.prototype.forEachMultiplicity=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};Pe.prototype.keys=function(){return this.items.keys()};Pe.prototype.values=function(){var e=this.items.entries(),t=!1,r,n,i,s;return new YY(function o(){if(!t){if(r=e.next(),r.done)return{done:!0};t=!0,n=r.value[0],i=r.value[1],s=0}return s>=i?(t=!1,o()):(s++,{done:!1,value:n})})};Pe.prototype.multiplicities=function(){return this.items.entries()};typeof Symbol<"u"&&(Pe.prototype[Symbol.iterator]=Pe.prototype.values);Pe.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pe.prototype.inspect);Pe.prototype.toJSON=function(){return this.items};Pe.from=function(e){var t=new Pe;return WY(e,function(r){t.add(r)}),t};Pe.isSubset=function(e,t){var r=e.multiplicities(),n,i,s;if(e===t)return!0;if(e.dimension>t.dimension)return!1;for(;n=r.next(),!n.done;)if(i=n.value[0],s=n.value[1],t.multiplicity(i)<s)return!1;return!0};Pe.isSuperset=function(e,t){return Pe.isSubset(t,e)};jI.exports=Pe});var VI=v((fne,HI)=>{var ZY=Tt(),eW=Be();function tW(e,t,r){return((Math.pow(e,2)-Math.pow(Math.abs(t-r),2))/2|0)+e+1}function rW(e,t){for(var r=0,n=0,i=t+1;n<i;n++)r+=tW(e,t,n);return r}function nW(e,t){return e.length>t.length?-1:e.length<t.length?1:e<t?-1:e>t?1:0}function LI(e,t){var r=e+1,n=t/r|0,i=n+1,s,o,a=t-n*r,u=r-a,l=new Array(e+1);for(s=0;s<u;s++)l[s]=[s*n,n];var f=(s-1)*n+n;for(o=0;o<a;o++)l[s+o]=[f+o*i,i];return l}function FI(e,t){var r=t.length,n=e+1,i=r/n|0,s=i+1,o,a,u,l=r-i*n,f=n-l,c=new Array(e+1);for(a=0;a<f;a++)o=a*i,c[a]=t.slice(o,o+i);var h=(a-1)*i+i;for(u=0;u<l;u++)o=h+u*s,c[a+u]=t.slice(o,o+s);return c}function iW(e,t,r){if(t===0)return 0;var n=r.length,i=e+1,s=n/i|0,o=s+1,a=n-s*i,u=i-a;if(t<=u-1)return t*s;var l=t-u;return u*s+l*o}function zI(e,t,r,n,i,s){var o=i-r,a=i+r,u=e-r,l=i+t-u,f=i+t+u,c=n-s;return[Math.max(0,o,l),Math.min(a,f,c)]}function MI(e,t,r,n,i,s){var o=t.length,a=o-r,u=zI(e,a,n,o,i,s),l=u[0],f=u[1],c="",h=[],d,p,y;for(p=l,y=f+1;p<y;p++)d=t.slice(p,p+s),d!==c&&(h.push(d),c=d);return h}function ot(e,t){if(typeof e!="function")throw new Error("mnemonist/passjoin-index: `levenshtein` should be a function returning edit distance between two strings.");if(typeof t!="number"||t<1)throw new Error("mnemonist/passjoin-index: `k` should be a number > 0");this.levenshtein=e,this.k=t,this.clear()}ot.prototype.clear=function(){this.size=0,this.strings=[],this.invertedIndices={}};ot.prototype.add=function(e){var t=e.length,r=this.size;this.strings.push(e),this.size++;var n=FI(this.k,e),i=this.invertedIndices[t];typeof i>"u"&&(i={},this.invertedIndices[t]=i);var s,o,a,u,l;for(u=0,l=n.length;u<l;u++)s=n[u],a=s+u,o=i[a],typeof o>"u"?(o=[r],i[a]=o):o.push(r);return this};ot.prototype.search=function(e){var t=e.length,r=this.k,n=new Set,i,s,o,a,u,l,f,c,h,d,p,y,w,_,S;for(c=Math.max(0,t-r),h=t+r+1;c<h;c++){var g=this.invertedIndices[c];if(!(typeof g>"u")){for(f=LI(r,c),d=0,p=f.length;d<p;d++)for(o=f[d][0],a=f[d][1],l=MI(r,e,c,d,o,a),l.length||(l=[""]),y=0,w=l.length;y<w;y++)if(u=l[y]+d,i=g[u],!(typeof i>"u"))for(_=0,S=i.length;_<S;_++)s=this.strings[i[_]],(t<=r&&c<=r||!n.has(s)&&this.levenshtein(e,s)<=r)&&n.add(s)}}return n};ot.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.strings.length;r<n;r++)e.call(t,this.strings[r],r,this)};ot.prototype.values=function(){var e=this.strings,t=e.length,r=0;return new ZY(function(){if(r>=t)return{done:!0};var n=e[r];return r++,{value:n,done:!1}})};typeof Symbol<"u"&&(ot.prototype[Symbol.iterator]=ot.prototype.values);ot.prototype.inspect=function(){var e=this.strings.slice();return Object.defineProperty(e,"constructor",{value:ot,enumerable:!1}),e};typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);ot.from=function(e,t,r){var n=new ot(t,r);return eW(e,function(i){n.add(i)}),n};ot.countKeys=rW;ot.comparator=nW;ot.partition=LI;ot.segments=FI;ot.segmentPos=iW;ot.multiMatchAwareInterval=zI;ot.multiMatchAwareSubstrings=MI;HI.exports=ot});var GI=v((cne,BI)=>{var UI=Tt(),sW=Be();function at(){this.clear()}at.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};at.prototype.enqueue=function(e){return this.items.push(e),++this.size};at.prototype.dequeue=function(){if(this.size){var e=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}};at.prototype.peek=function(){if(this.size)return this.items[this.offset]};at.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.offset,n=0,i=this.items.length;r<i;r++,n++)e.call(t,this.items[r],n,this)};at.prototype.toArray=function(){return this.items.slice(this.offset)};at.prototype.values=function(){var e=this.items,t=this.offset;return new UI(function(){if(t>=e.length)return{done:!0};var r=e[t];return t++,{value:r,done:!1}})};at.prototype.entries=function(){var e=this.items,t=this.offset,r=0;return new UI(function(){if(t>=e.length)return{done:!0};var n=e[t];return t++,{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(at.prototype[Symbol.iterator]=at.prototype.values);at.prototype.toString=function(){return this.toArray().join(",")};at.prototype.toJSON=function(){return this.toArray()};at.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:at,enumerable:!1}),e};typeof Symbol<"u"&&(at.prototype[Symbol.for("nodejs.util.inspect.custom")]=at.prototype.inspect);at.from=function(e){var t=new at;return sW(e,function(r){t.enqueue(r)}),t};at.of=function(){return at.from(arguments)};BI.exports=at});var YI=v((hne,JI)=>{var KI=Tt(),oW=Be();function ut(){this.clear()}ut.prototype.clear=function(){this.items=[],this.size=0};ut.prototype.push=function(e){return this.items.push(e),++this.size};ut.prototype.pop=function(){if(this.size!==0)return this.size--,this.items.pop()};ut.prototype.peek=function(){return this.items[this.size-1]};ut.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.items.length;r<n;r++)e.call(t,this.items[n-r-1],r,this)};ut.prototype.toArray=function(){for(var e=new Array(this.size),t=this.size-1,r=this.size;r--;)e[r]=this.items[t-r];return e};ut.prototype.values=function(){var e=this.items,t=e.length,r=0;return new KI(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return r++,{value:n,done:!1}})};ut.prototype.entries=function(){var e=this.items,t=e.length,r=0;return new KI(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=ut.prototype.values);ut.prototype.toString=function(){return this.toArray().join(",")};ut.prototype.toJSON=function(){return this.toArray()};ut.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:ut,enumerable:!1}),e};typeof Symbol<"u"&&(ut.prototype[Symbol.for("nodejs.util.inspect.custom")]=ut.prototype.inspect);ut.from=function(e){var t=new ut;return oW(e,function(r){t.push(r)}),t};ut.of=function(){return ut.from(arguments)};JI.exports=ut});var WI=v(vt=>{vt.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,n,i,s=arguments.length;for(i=0;i<s;i++){if(n=arguments[i],n.size===0)return e;n.size<t&&(t=n.size,r=n)}for(var o=r.values(),a,u,l,f;a=o.next(),!a.done;){for(u=a.value,l=!0,i=0;i<s;i++)if(f=arguments[i],f!==r&&!f.has(u)){l=!1;break}l&&e.add(u)}return e};vt.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,n,i;for(t=0;t<r;t++)for(n=arguments[t].values();i=n.next(),!i.done;)e.add(i.value);return e};vt.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,n=e.values(),i;i=n.next(),!i.done;)t.has(i.value)||r.add(i.value);return r};vt.symmetricDifference=function(e,t){for(var r=new Set,n=e.values(),i;i=n.next(),!i.done;)t.has(i.value)||r.add(i.value);for(n=t.values();i=n.next(),!i.done;)e.has(i.value)||r.add(i.value);return r};vt.isSubset=function(e,t){var r=e.values(),n;if(e===t)return!0;if(e.size>t.size)return!1;for(;n=r.next(),!n.done;)if(!t.has(n.value))return!1;return!0};vt.isSuperset=function(e,t){return vt.isSubset(t,e)};vt.add=function(e,t){for(var r=t.values(),n;n=r.next(),!n.done;)e.add(n.value)};vt.subtract=function(e,t){for(var r=t.values(),n;n=r.next(),!n.done;)e.delete(n.value)};vt.intersect=function(e,t){for(var r=e.values(),n;n=r.next(),!n.done;)t.has(n.value)||e.delete(n.value)};vt.disjunct=function(e,t){for(var r=e.values(),n,i=[];n=r.next(),!n.done;)t.has(n.value)&&i.push(n.value);for(r=t.values();n=r.next(),!n.done;)e.has(n.value)||e.add(n.value);for(var s=0,o=i.length;s<o;s++)e.delete(i[s])};vt.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var n=e.values(),i,s=0;i=n.next(),!i.done;)t.has(i.value)&&s++;return s};vt.unionSize=function(e,t){var r=vt.intersectionSize(e,t);return e.size+t.size-r};vt.jaccard=function(e,t){var r=vt.intersectionSize(e,t);if(r===0)return 0;var n=e.size+t.size-r;return r/n};vt.overlap=function(e,t){var r=vt.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}});var QI=v((pne,XI)=>{var aW=Tt(),uW=tr().getPointerArray;function Er(e){var t=uW(e);this.start=0,this.size=0,this.capacity=e,this.dense=new t(e),this.sparse=new t(e)}Er.prototype.clear=function(){this.start=0,this.size=0};Er.prototype.has=function(e){if(this.size===0)return!1;var t=this.sparse[e],r=t<this.capacity&&t>=this.start&&t<this.start+this.size||t<(this.start+this.size)%this.capacity;return r&&this.dense[t]===e};Er.prototype.enqueue=function(e){var t=this.sparse[e];if(this.size!==0){var r=t<this.capacity&&t>=this.start&&t<this.start+this.size||t<(this.start+this.size)%this.capacity;if(r&&this.dense[t]===e)return this}return t=(this.start+this.size)%this.capacity,this.dense[t]=e,this.sparse[e]=t,this.size++,this};Er.prototype.dequeue=function(){if(this.size!==0){var e=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var t=this.dense[e];return this.sparse[t]=this.capacity,t}};Er.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.capacity,n=this.size,i=this.start,s=0;s<n;)e.call(t,this.dense[i],s,this),i++,s++,i===r&&(i=0)};Er.prototype.values=function(){var e=this.dense,t=this.capacity,r=this.size,n=this.start,i=0;return new aW(function(){if(i>=r)return{done:!0};var s=e[n];return n++,i++,n===t&&(n=0),{value:s,done:!1}})};typeof Symbol<"u"&&(Er.prototype[Symbol.iterator]=Er.prototype.values);Er.prototype.inspect=function(){var e=[];return this.forEach(function(t){e.push(t)}),Object.defineProperty(e,"constructor",{value:Er,enumerable:!1}),e.capacity=this.capacity,e};typeof Symbol<"u"&&(Er.prototype[Symbol.for("nodejs.util.inspect.custom")]=Er.prototype.inspect);XI.exports=Er});var eN=v((mne,ZI)=>{var l0=Tt(),lW=tr().getPointerArray;function Kt(e,t){arguments.length<2&&(t=e,e=Array);var r=lW(t);this.size=0,this.length=t,this.dense=new r(t),this.sparse=new r(t),this.vals=new e(t)}Kt.prototype.clear=function(){this.size=0};Kt.prototype.has=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e};Kt.prototype.get=function(e){var t=this.sparse[e];if(t<this.size&&this.dense[t]===e)return this.vals[t]};Kt.prototype.set=function(e,t){var r=this.sparse[e];return r<this.size&&this.dense[r]===e?(this.vals[r]=t,this):(this.dense[this.size]=e,this.sparse[e]=this.size,this.vals[this.size]=t,this.size++,this)};Kt.prototype.delete=function(e){var t=this.sparse[e];return t>=this.size||this.dense[t]!==e?!1:(t=this.dense[this.size-1],this.dense[this.sparse[e]]=t,this.sparse[t]=this.sparse[e],this.size--,!0)};Kt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0;r<this.size;r++)e.call(t,this.vals[r],this.dense[r])};Kt.prototype.keys=function(){var e=this.size,t=this.dense,r=0;return new l0(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};Kt.prototype.values=function(){var e=this.size,t=this.vals,r=0;return new l0(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};Kt.prototype.entries=function(){var e=this.size,t=this.dense,r=this.vals,n=0;return new l0(function(){if(n<e){var i=[t[n],r[n]];return n++,{value:i}}return{done:!0}})};typeof Symbol<"u"&&(Kt.prototype[Symbol.iterator]=Kt.prototype.entries);Kt.prototype.inspect=function(){for(var e=new Map,t=0;t<this.size;t++)e.set(this.dense[t],this.vals[t]);return Object.defineProperty(e,"constructor",{value:Kt,enumerable:!1}),e.length=this.length,this.vals.constructor!==Array&&(e.type=this.vals.constructor.name),e};typeof Symbol<"u"&&(Kt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Kt.prototype.inspect);ZI.exports=Kt});var rN=v((yne,tN)=>{var fW=Tt(),cW=tr().getPointerArray;function Rr(e){var t=cW(e);this.size=0,this.length=e,this.dense=new t(e),this.sparse=new t(e)}Rr.prototype.clear=function(){this.size=0};Rr.prototype.has=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e};Rr.prototype.add=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e?this:(this.dense[this.size]=e,this.sparse[e]=this.size,this.size++,this)};Rr.prototype.delete=function(e){var t=this.sparse[e];return t>=this.size||this.dense[t]!==e?!1:(t=this.dense[this.size-1],this.dense[this.sparse[e]]=t,this.sparse[t]=this.sparse[e],this.size--,!0)};Rr.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r,n=0;n<this.size;n++)r=this.dense[n],e.call(t,r,r)};Rr.prototype.values=function(){var e=this.size,t=this.dense,r=0;return new fW(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};typeof Symbol<"u"&&(Rr.prototype[Symbol.iterator]=Rr.prototype.values);Rr.prototype.inspect=function(){for(var e=new Set,t=0;t<this.size;t++)e.add(this.dense[t]);return Object.defineProperty(e,"constructor",{value:Rr,enumerable:!1}),e.length=this.length,e};typeof Symbol<"u"&&(Rr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Rr.prototype.inspect);tN.exports=Rr});var aN=v((gne,oN)=>{var hW=Be(),dW=2,pW=2,mW=new Set([0,1,2]),yW={0:"Returns only the top suggestion",1:"Returns suggestions with the smallest edit distance",2:"Returns every suggestion (no early termination)"};function bc(e){var t=new Set;return typeof e=="number"&&t.add(e),{suggestions:t,count:0}}function nN(e,t,r){return{term:e||"",distance:t||0,count:r||0}}function sN(e,t,r,n){n=n||new Set,t++;var i,s=e.length,o;if(s>1)for(o=0;o<s;o++)i=e.substring(0,o)+e.substring(o+1),n.has(i)||(n.add(i),t<r&&sN(i,t,r,n));return n}function gW(e,t,r,n,i,s){var o=r.suggestions.values().next().value;t<2&&r.suggestions.size>0&&e[o].length-s.length>n.length-s.length&&(r.suggestions=new Set,r.count=0),(t===2||!r.suggestions.size||e[o].length-s.length>=n.length-s.length)&&r.suggestions.add(i)}function iN(e,t){var r=e.length,n=t.length,i=[[]],s=r+n,o=new Map,a,u,l;for(i[0][0]=s,a=0;a<=r;a++)i[a+1]||(i[a+1]=[]),i[a+1][1]=a,i[a+1][0]=s;for(l=0;l<=n;l++)i[1][l+1]=l,i[0][l+1]=s;var f=e+t,c;for(a=0,u=f.length;a<u;a++)c=f[a],o.has(c)||o.set(c,0);for(a=1;a<=r;a++){var h=0;for(l=1;l<=n;l++){var d=o.get(t[l-1]),p=h;e[a-1]===t[l-1]?(i[a+1][l+1]=i[a][l],h=l):i[a+1][l+1]=Math.min(i[a][l],i[a+1][l],i[a][l+1])+1,i[a+1][l+1]=Math.min(i[a+1][l+1],i[d][p]+(a-d-1)+1+(l-p-1))}o.set(e[a-1],a)}return i[r+1][n+1]}function vW(e,t,r,n,i,s){var o=s.length;if(o-n>i)return[];for(var a=[s],u=new Set,l=new Set,f=[],c,h;a.length>0&&(c=a.shift(),!(r<2&&f.length>0&&o-c.length>f[0].distance));){if(h=e[c],h!==void 0){if(typeof h=="number"&&(h=bc(h)),h.count>0&&!l.has(c)){l.add(c);var d=nN(c,o-c.length,h.count);if(f.push(d),r<2&&o-c.length===0)break}h.suggestions.forEach(_=>{var S=t[_];if(!l.has(S)){l.add(S);var g=0;if(s!==S)if(S.length===c.length)g=o-c.length;else if(o===c.length)g=S.length-c.length;else{for(var m=0,P=0,$=S.length;m<$&&m<o&&S[m]===s[m];)m++;for(;P<$-m&&P<o&&S[$-P-1]===s[o-P-1];)P++;m>0||P>0?g=iN(S.substr(m,$-m-P),s.substr(m,o-m-P)):g=iN(S,s)}if(r<2&&f.length>0&&f[0].distance>g&&(f=[]),!(r<2&&f.length>0&&g>f[0].distance)&&g<=n){var E=e[S];E!==void 0&&f.push(nN(S,g,E.count))}}})}if(o-c.length<n){if(r<2&&f.length>0&&o-c.length>=f[0].distance)continue;for(var p=0,y=c.length;p<y;p++){var w=c.substring(0,p)+c.substring(p+1);u.has(w)||(u.add(w),a.push(w))}}}return r===0?f.slice(0,1):f}function On(e){if(e=e||{},this.clear(),this.maxDistance=typeof e.maxDistance=="number"?e.maxDistance:dW,this.verbosity=typeof e.verbosity=="number"?e.verbosity:pW,typeof this.maxDistance!="number"||this.maxDistance<=0)throw Error("mnemonist/SymSpell.constructor: invalid `maxDistance` option. Should be a integer greater than 0.");if(!mW.has(this.verbosity))throw Error("mnemonist/SymSpell.constructor: invalid `verbosity` option. Should be either 0, 1 or 2.")}On.prototype.clear=function(){this.size=0,this.dictionary=Object.create(null),this.maxLength=0,this.words=[]};On.prototype.add=function(e){var t=this.dictionary[e];if(t!==void 0?(typeof t=="number"&&(t=bc(t),this.dictionary[e]=t),t.count++):(t=bc(),t.count++,this.dictionary[e]=t,e.length>this.maxLength&&(this.maxLength=e.length)),t.count===1){var r=this.words.length;this.words.push(e);var n=sN(e,0,this.maxDistance);n.forEach(i=>{var s=this.dictionary[i];s!==void 0?(typeof s=="number"&&(s=bc(s),this.dictionary[i]=s),s.suggestions.has(r)||gW(this.words,this.verbosity,s,e,r,i)):this.dictionary[i]=r})}return this.size++,this};On.prototype.search=function(e){return vW(this.dictionary,this.words,this.verbosity,this.maxDistance,this.maxLength,e)};On.prototype.inspect=function(){var e=[];e.size=this.size,e.maxDistance=this.maxDistance,e.verbosity=this.verbosity,e.behavior=yW[this.verbosity];for(var t in this.dictionary)typeof this.dictionary[t]=="object"&&this.dictionary[t].count&&e.push([t,this.dictionary[t].count]);return Object.defineProperty(e,"constructor",{value:On,enumerable:!1}),e};typeof Symbol<"u"&&(On.prototype[Symbol.for("nodejs.util.inspect.custom")]=On.prototype.inspect);On.from=function(e,t){var r=new On(t);return hW(e,function(n){r.add(n)}),r};oN.exports=On});var f0=v((vne,uN)=>{var _W=Be(),qo=Tt(),At=String.fromCharCode(0);function Qe(e){this.mode=e===Array?"array":"string",this.clear()}Qe.prototype.clear=function(){this.root={},this.size=0};Qe.prototype.set=function(e,t){for(var r=this.root,n,i=0,s=e.length;i<s;i++)n=e[i],r=r[n]||(r[n]={});return At in r||this.size++,r[At]=t,this};Qe.prototype.update=function(e,t){for(var r=this.root,n,i=0,s=e.length;i<s;i++)n=e[i],r=r[n]||(r[n]={});return At in r||this.size++,r[At]=t(r[At]),this};Qe.prototype.get=function(e){var t=this.root,r,n,i;for(n=0,i=e.length;n<i;n++)if(r=e[n],t=t[r],typeof t>"u")return;if(At in t)return t[At]};Qe.prototype.delete=function(e){var t=this.root,r=null,n=null,i,s,o,a;for(o=0,a=e.length;o<a;o++){if(s=e[o],i=t,t=t[s],typeof t>"u")return!1;r!==null?Object.keys(t).length>1&&(r=null,n=null):Object.keys(t).length<2&&(r=i,n=s)}return At in t?(this.size--,r?delete r[n]:delete t[At],!0):!1};Qe.prototype.has=function(e){for(var t=this.root,r,n=0,i=e.length;n<i;n++)if(r=e[n],t=t[r],typeof t>"u")return!1;return At in t};Qe.prototype.find=function(e){var t=typeof e=="string",r=this.root,n=[],i,s,o;for(s=0,o=e.length;s<o;s++)if(i=e[s],r=r[i],typeof r>"u")return n;for(var a=[r],u=[e],l;a.length;){e=u.pop(),r=a.pop();for(l in r){if(l===At){n.push([e,r[At]]);continue}a.push(r[l]),u.push(t?e+l:e.concat(l))}}return n};Qe.prototype.values=function(e){var t=this.root,r=[],n,i,s;if(e){for(i=0,s=e.length;i<s;i++)if(n=e[i],t=t[n],typeof t>"u")return qo.empty()}return r.push(t),new qo(function(){for(var o,a=!1,u;r.length;){o=r.pop();for(u in o){if(u===At){a=!0;continue}r.push(o[u])}if(a)return{done:!1,value:o[At]}}return{done:!0}})};Qe.prototype.prefixes=function(e){var t=this.root,r=[],n=[],i,s,o,a=this.mode==="string";if(e){for(s=0,o=e.length;s<o;s++)if(i=e[s],t=t[i],typeof t>"u")return qo.empty()}else e=a?"":[];return r.push(t),n.push(e),new qo(function(){for(var u,l,f=!1,c;r.length;){u=r.pop(),l=n.pop();for(c in u){if(c===At){f=!0;continue}r.push(u[c]),n.push(a?l+c:l.concat(c))}if(f)return{done:!1,value:l}}return{done:!0}})};Qe.prototype.keys=Qe.prototype.prefixes;Qe.prototype.entries=function(e){var t=this.root,r=[],n=[],i,s,o,a=this.mode==="string";if(e){for(s=0,o=e.length;s<o;s++)if(i=e[s],t=t[i],typeof t>"u")return qo.empty()}else e=a?"":[];return r.push(t),n.push(e),new qo(function(){for(var u,l,f=!1,c;r.length;){u=r.pop(),l=n.pop();for(c in u){if(c===At){f=!0;continue}r.push(u[c]),n.push(a?l+c:l.concat(c))}if(f)return{done:!1,value:[l,u[At]]}}return{done:!0}})};typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=Qe.prototype.entries);Qe.prototype.inspect=function(){for(var e=new Array(this.size),t=this.entries(),r,n=0;r=t.next(),!r.done;)e[n++]=r.value;return Object.defineProperty(e,"constructor",{value:Qe,enumerable:!1}),e};typeof Symbol<"u"&&(Qe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Qe.prototype.inspect);Qe.prototype.toJSON=function(){return this.root};Qe.from=function(e){var t=new Qe;return _W(e,function(r,n){t.set(n,r)}),t};Qe.SENTINEL=At;uN.exports=Qe});var cN=v((_ne,fN)=>{var wW=Be(),lN=f0(),Ec=String.fromCharCode(0);function $t(e){this.mode=e===Array?"array":"string",this.clear()}for(c0 in lN.prototype)$t.prototype[c0]=lN.prototype[c0];var c0;delete $t.prototype.set;delete $t.prototype.get;delete $t.prototype.values;delete $t.prototype.entries;$t.prototype.add=function(e){for(var t=this.root,r,n=0,i=e.length;n<i;n++)r=e[n],t=t[r]||(t[r]={});return Ec in t||this.size++,t[Ec]=!0,this};$t.prototype.find=function(e){var t=typeof e=="string",r=this.root,n=[],i,s,o;for(s=0,o=e.length;s<o;s++)if(i=e[s],r=r[i],typeof r>"u")return n;for(var a=[r],u=[e],l;a.length;){e=u.pop(),r=a.pop();for(l in r){if(l===Ec){n.push(e);continue}a.push(r[l]),u.push(t?e+l:e.concat(l))}}return n};typeof Symbol<"u"&&($t.prototype[Symbol.iterator]=$t.prototype.keys);$t.prototype.inspect=function(){for(var e=new Set,t=this.keys(),r;r=t.next(),!r.done;)e.add(r.value);return Object.defineProperty(e,"constructor",{value:$t,enumerable:!1}),e};typeof Symbol<"u"&&($t.prototype[Symbol.for("nodejs.util.inspect.custom")]=$t.prototype.inspect);$t.prototype.toJSON=function(){return this.root};$t.from=function(e){var t=new $t;return wW(e,function(r){t.add(r)}),t};$t.SENTINEL=Ec;fN.exports=$t});var mN=v((wne,pN)=>{var hN=Tt(),SW=Be(),bW=hr(),dN=tr(),EW=function(e){return Math.max(1,Math.ceil(e*1.5))},RW=function(e){var t=dN.getPointerArray(e);return new t(e)};function ve(e,t){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var r=t||0,n=EW,i=0,s=!1;typeof t=="object"&&(r=t.initialCapacity||0,i=t.initialLength||0,n=t.policy||n,s=t.factory===!0),this.factory=s?e:null,this.ArrayClass=e,this.length=i,this.capacity=Math.max(i,r),this.policy=n,this.array=new e(this.capacity)}ve.prototype.set=function(e,t){if(this.length<e)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[e]=t,this};ve.prototype.get=function(e){if(!(this.length<e))return this.array[e]};ve.prototype.applyPolicy=function(e){var t=this.policy(e||this.capacity);if(typeof t!="number"||t<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(t<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return t};ve.prototype.reallocate=function(e){if(e===this.capacity)return this;var t=this.array;if(e<this.length&&(this.length=e),e>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(e):this.array=this.factory(e),dN.isTypedArray(this.array))this.array.set(t,0);else for(var r=0,n=this.length;r<n;r++)this.array[r]=t[r];else this.array=t.slice(0,e);return this.capacity=e,this};ve.prototype.grow=function(e){var t;if(typeof e=="number"){if(this.capacity>=e)return this;for(t=this.capacity;t<e;)t=this.applyPolicy(t);return this.reallocate(t),this}return t=this.applyPolicy(),this.reallocate(t),this};ve.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.reallocate(e),this)};ve.prototype.push=function(e){return this.capacity===this.length&&this.grow(),this.array[this.length++]=e,this.length};ve.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};ve.prototype.values=function(){var e=this.array,t=this.length,r=0;return new hN(function(){if(r>=t)return{done:!0};var n=e[r];return r++,{value:n,done:!1}})};ve.prototype.entries=function(){var e=this.array,t=this.length,r=0;return new hN(function(){if(r>=t)return{done:!0};var n=e[r];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(ve.prototype[Symbol.iterator]=ve.prototype.values);ve.prototype.inspect=function(){var e=this.array.slice(0,this.length);return e.type=this.array.constructor.name,e.items=this.length,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:ve,enumerable:!1}),e};typeof Symbol<"u"&&(ve.prototype[Symbol.for("nodejs.util.inspect.custom")]=ve.prototype.inspect);ve.from=function(e,t,r){if(arguments.length<3&&(r=bW.guessLength(e),typeof r!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new ve(t,r);return SW(e,function(i){n.push(i)}),n};function An(e){var t=function(n){ve.call(this,e,n)};for(var r in ve.prototype)ve.prototype.hasOwnProperty(r)&&(t.prototype[r]=ve.prototype[r]);return t.from=function(n,i){return ve.from(n,e,i)},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t}ve.Int8Vector=An(Int8Array);ve.Uint8Vector=An(Uint8Array);ve.Uint8ClampedVector=An(Uint8ClampedArray);ve.Int16Vector=An(Int16Array);ve.Uint16Vector=An(Uint16Array);ve.Int32Vector=An(Int32Array);ve.Uint32Vector=An(Uint32Array);ve.Float32Vector=An(Float32Array);ve.Float64Vector=An(Float64Array);ve.PointerVector=An(RW);pN.exports=ve});var gN=v((Sne,yN)=>{var PW=hr(),TW=tr(),OW=n0().inplaceQuickSortIndices,AW=t0().lowerBoundIndices,$W=yc(),CW=TW.getPointerArray;function IW(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}function NW(e,t,r){for(var n=r.length,i=CW(n),s=0,o=new i(n),a=new i(n),u=new i(n),l=new Float64Array(n),f=[0,0,n],c=new Float64Array(n),h,d,p,y,w,_,S,g,m;f.length;)if(w=f.pop(),y=f.pop(),h=f.pop(),d=r[w-1],w--,m=w-y,o[h]=d,m!==0){if(m===1){S=e(t[d],t[r[y]]),l[h]=S,s++,u[h]=s,o[s]=r[y];continue}for(g=y;g<w;g++)c[r[g]]=e(t[d],t[r[g]]);OW(c,r,y,w),p=y+m/2-1,p===(p|0)?S=(c[r[p]]+c[r[p+1]])/2:S=c[r[Math.ceil(p)]],l[h]=S,_=AW(c,r,S,y,w),w-_>0&&(s++,u[h]=s,f.push(s,_,w)),_-y>0&&(s++,a[h]=s,f.push(s,y,_))}return{nodes:o,lefts:a,rights:u,mus:l}}function Qn(e,t){if(typeof e!="function")throw new Error("mnemonist/VPTree.constructor: given `distance` must be a function.");if(!t)throw new Error("mnemonist/VPTree.constructor: you must provide items to the tree. A VPTree cannot be updated after its creation.");this.distance=e,this.heap=new $W(IW),this.D=0;var r=PW.toArrayWithIndices(t);this.items=r[0];var n=r[1];this.size=n.length;var i=NW(e,this.items,n);this.nodes=i.nodes,this.lefts=i.lefts,this.rights=i.rights,this.mus=i.mus}Qn.prototype.nearestNeighbors=function(e,t){var r=this.heap,n=[0],i=1/0,s,o,a,u,l,f,c;for(this.D=0;n.length;)s=n.pop(),o=this.nodes[s],a=this.items[o],c=this.distance(a,t),this.D++,c<i&&(r.push({distance:c,item:a}),r.size>e&&r.pop(),r.size>=e&&(i=r.peek().distance)),u=this.lefts[s],l=this.rights[s],!(!u&&!l)&&(f=this.mus[s],c<f?(u&&c<f+i&&n.push(u),l&&c>=f-i&&n.push(l)):(l&&c>=f-i&&n.push(l),u&&c<f+i&&n.push(u)));for(var h=new Array(r.size),d=r.size-1;d>=0;d--)h[d]=r.pop();return h};Qn.prototype.neighbors=function(e,t){var r=[],n=[0],i,s,o,a,u,l,f;for(this.D=0;n.length;)i=n.pop(),s=this.nodes[i],o=this.items[s],f=this.distance(o,t),this.D++,f<=e&&r.push({distance:f,item:o}),a=this.lefts[i],u=this.rights[i],!(!a&&!u)&&(l=this.mus[i],f<l?(a&&f<l+e&&n.push(a),u&&f>=l-e&&n.push(u)):(u&&f>=l-e&&n.push(u),a&&f<l+e&&n.push(a)));return r};Qn.prototype.inspect=function(){var e=this.items.slice();return Object.defineProperty(e,"constructor",{value:Qn,enumerable:!1}),e};typeof Symbol<"u"&&(Qn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Qn.prototype.inspect);Qn.from=function(e,t){return new Qn(t,e)};yN.exports=Qn});var wN=v((bne,_N)=>{var h0=yc(),d0=zg(),vN=yC();_N.exports={BiMap:SC(),BitSet:AC(),BitVector:NC(),BloomFilter:LC(),BKTree:zC(),CircularBuffer:BC(),DefaultMap:KC(),DefaultWeakMap:YC(),FixedDeque:Gg(),StaticDisjointSet:XC(),FibonacciHeap:d0,MinFibonacciHeap:d0.MinFibonacciHeap,MaxFibonacciHeap:d0.MaxFibonacciHeap,FixedReverseHeap:vc(),FuzzyMap:nI(),FuzzyMultiMap:aI(),HashedArrayTree:fI(),Heap:h0,MinHeap:h0.MinHeap,MaxHeap:h0.MaxHeap,StaticIntervalTree:pI(),InvertedIndex:SI(),KDTree:TI(),LinkedList:$I(),LRUCache:Sc(),LRUCacheWithDelete:NI(),LRUMap:a0(),LRUMapWithDelete:qI(),MultiMap:Xg(),MultiSet:DI(),PassjoinIndex:VI(),Queue:GI(),FixedStack:Zg(),Stack:YI(),SuffixArray:vN,GeneralizedSuffixArray:vN.GeneralizedSuffixArray,Set:WI(),SparseQueueSet:QI(),SparseMap:eN(),SparseSet:rN(),SymSpell:aN(),Trie:cN(),TrieMap:f0(),Vector:mN(),VPTree:gN()}});var bN=v((Ene,ku)=>{"use strict";var kW=wN().LRUCache,xW=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function qW(e){if(xW.test(e)===!1)throw new TypeError("Fieldname contains invalid characters.")}function SN(e){e=e.trim().toLowerCase();let t=[];if(e.length!==0)if(e.indexOf(",")===-1)t.push(e);else{let r=e.length,n=0,i=0,s;for(n=0;n<r;++n)s=e[n],s===" "?i=n+1:s===","&&(i!==n&&t.push(e.slice(i,n)),i=n+1);i!==n&&t.push(e.slice(i,n))}return t}function p0(e){let t=new kW(1e3);return qW(e),function(r){let n=r.getHeader("Vary");if(!n){r.header("Vary",e);return}if(n==="*")return;if(e==="*"){r.header("Vary","*");return}if(Array.isArray(n)&&(n=n.join(", ")),!t.has(n)){let s=SN(n);s.indexOf("*")!==-1?t.set(n,"*"):s.indexOf(e.toLowerCase())===-1?t.set(n,n+", "+e):t.set(n,null)}let i=t.get(n);i!==null&&r.header("Vary",i)}}ku.exports.createAddFieldnameToVary=p0;ku.exports.addOriginToVaryHeader=p0("Origin");ku.exports.addAccessControlRequestHeadersToVaryHeader=p0("Access-Control-Request-Headers");ku.exports.parse=SN});var ON=v((Rne,Pc)=>{"use strict";var jW=kg(),{addAccessControlRequestHeadersToVaryHeader:DW,addOriginToVaryHeader:LW}=bN(),y0={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",hook:"onRequest",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0},FW=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend"],m0=["preSerialization","preParsing","onSend"];function PN(e,t){FW.indexOf(e)===-1&&t(new TypeError("@fastify/cors: Invalid hook option provided."))}function zW(e,t,r){e.decorateRequest("corsPreflightEnabled",!1);let n=!0;if(typeof t=="function")EN(t,e,{hook:y0.hook},r);else if(t.delegator){let{delegator:i,...s}=t;EN(i,e,s,r)}else{t.hideOptionsRoute!==void 0&&(n=t.hideOptionsRoute);let i=Rc(t);PN(i.hook,r),m0.indexOf(i.hook)!==-1?e.addHook(i.hook,function(o,a,u,l){xu(e,i,o,a,l)}):e.addHook(i.hook,function(o,a,u){xu(e,i,o,a,u)})}e.options("*",{schema:{hide:n}},(i,s)=>{if(!i.corsPreflightEnabled){s.callNotFound();return}s.send()}),r()}function EN(e,t,r,n){let i=r&&r.hook||y0.hook;PN(i,n),e.length===2?m0.indexOf(i)!==-1?t.addHook(i,function(o,a,u,l){RN(e,t,o,a,l)}):t.addHook(i,function(o,a,u){RN(e,t,o,a,u)}):m0.indexOf(i)!==-1?t.addHook(i,function(o,a,u,l){let f=e(o);if(f&&typeof f.then=="function"){f.then(c=>xu(t,Rc(c),o,a,l)).catch(l);return}l(new Error("Invalid CORS origin option"))}):t.addHook(i,function(o,a,u){let l=e(o);if(l&&typeof l.then=="function"){l.then(f=>xu(t,Rc(f),o,a,u)).catch(u);return}u(new Error("Invalid CORS origin option"))})}function RN(e,t,r,n,i){e(r,(s,o)=>{s?i(s):xu(t,Rc(o),r,n,i)})}function Rc(e){let t=Object.assign({},y0,e);return Array.isArray(e.origin)&&e.origin.indexOf("*")!==-1&&(t.origin="*"),Number.isInteger(t.cacheControl)?t.cacheControl=`max-age=${t.cacheControl}`:typeof t.cacheControl!="string"&&(t.cacheControl=null),t}function xu(e,t,r,n,i){LW(n),(typeof t.origin=="function"?VW(e,t.origin):(o,a)=>a(null,t.origin))(r,(o,a)=>{if(o!==null)return i(o);if(a===!1)return i();if(!a)return i(new Error("Invalid CORS origin option"));if(MW(r,n,a,t),r.raw.method==="OPTIONS"&&t.preflight===!0){if(t.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){n.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,HW(r,n,t),!t.preflightContinue){n.code(t.optionsSuccessStatus).header("Content-Length","0").send();return}}return i()})}function MW(e,t,r,n){let i=UW(e.headers.origin,r);i&&t.header("Access-Control-Allow-Origin",i),n.credentials&&t.header("Access-Control-Allow-Credentials","true"),n.exposedHeaders!==null&&t.header("Access-Control-Expose-Headers",Array.isArray(n.exposedHeaders)?n.exposedHeaders.join(", "):n.exposedHeaders)}function HW(e,t,r){if(t.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){DW(t);let n=e.headers["access-control-request-headers"];n!==void 0&&t.header("Access-Control-Allow-Headers",n)}else t.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&t.header("Access-Control-Max-Age",String(r.maxAge)),r.cacheControl&&t.header("Cache-Control",r.cacheControl)}function VW(e,t){return function(r,n){let i=t.call(e,r.headers.origin,n);i&&typeof i.then=="function"&&i.then(s=>n(null,s),n)}}function UW(e,t){return t==="*"?"*":typeof t=="string"?t:TN(e,t)?e:!1}function TN(e,t){if(Array.isArray(t)){for(let r=0;r<t.length;++r)if(TN(e,t[r]))return!0;return!1}else return typeof t=="string"?e===t:t instanceof RegExp?(t.lastIndex=0,t.test(e)):!!t}var g0=jW(zW,{fastify:"4.x",name:"@fastify/cors"});Pc.exports=g0;Pc.exports.fastifyCors=g0;Pc.exports.default=g0});var IN=v((Le,_0)=>{"use strict";Object.defineProperties(Le,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var AN=Symbol("dangerouslyDisableDefaultSrc"),BW={"default-src":["'self'"],"base-uri":["'self'"],"font-src":["'self'","https:","data:"],"form-action":["'self'"],"frame-ancestors":["'self'"],"img-src":["'self'","data:"],"object-src":["'none'"],"script-src":["'self'"],"script-src-attr":["'none'"],"style-src":["'self'","https:","'unsafe-inline'"],"upgrade-insecure-requests":[]},$N=()=>Object.assign({},BW),GW=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),CN=e=>/;|,/.test(e),KW=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function JW(e){let t=$N(),{useDefaults:r=!0,directives:n=t}=e,i=new Map,s=new Set,o=new Set;for(let a in n){if(!KW(n,a))continue;if(a.length===0||/[^a-zA-Z0-9-]/.test(a))throw new Error(`Content-Security-Policy received an invalid directive name ${JSON.stringify(a)}`);let u=GW(a);if(s.has(u))throw new Error(`Content-Security-Policy received a duplicate directive ${JSON.stringify(u)}`);s.add(u);let l=n[a],f;if(l===null){if(u==="default-src")throw new Error("Content-Security-Policy needs a default-src but it was set to `null`. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.");o.add(u);continue}else if(typeof l=="string")f=[l];else if(l)if(l===AN)if(u==="default-src"){o.add("default-src");continue}else throw new Error(`Content-Security-Policy: tried to disable ${JSON.stringify(u)} as if it were default-src; simply omit the key`);else f=l;else throw new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(u)}`);for(let c of f)if(typeof c=="string"&&CN(c))throw new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(u)}`);i.set(u,f)}if(r&&Object.entries(t).forEach(([a,u])=>{!i.has(a)&&!o.has(a)&&i.set(a,u)}),!i.size)throw new Error("Content-Security-Policy has no directives. Either set some or disable the header");if(!i.has("default-src")&&!o.has("default-src"))throw new Error("Content-Security-Policy needs a default-src but none was provided. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.");return i}function YW(e,t,r){let n,i=[];return r.forEach((s,o)=>{let a="";for(let u of s)a+=" "+(u instanceof Function?u(e,t):u);a?CN(a)?n=new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(o)}`):i.push(`${o}${a}`):i.push(o)}),n||i.join(";")}var jo=function(t={}){let r=t.reportOnly?"Content-Security-Policy-Report-Only":"Content-Security-Policy",n=JW(t);return function(s,o,a){let u=YW(s,o,n);u instanceof Error?a(u):(o.setHeader(r,u),a())}};jo.getDefaultDirectives=$N;jo.dangerouslyDisableDefaultSrc=AN;var WW=new Set(["require-corp","credentialless"]);function XW({policy:e="require-corp"}){if(WW.has(e))return e;throw new Error(`Cross-Origin-Embedder-Policy does not support the ${JSON.stringify(e)} policy`)}function Tc(e={}){let t=XW(e);return function(n,i,s){i.setHeader("Cross-Origin-Embedder-Policy",t),s()}}var QW=new Set(["same-origin","same-origin-allow-popups","unsafe-none"]);function ZW({policy:e="same-origin"}){if(QW.has(e))return e;throw new Error(`Cross-Origin-Opener-Policy does not support the ${JSON.stringify(e)} policy`)}function Oc(e={}){let t=ZW(e);return function(n,i,s){i.setHeader("Cross-Origin-Opener-Policy",t),s()}}var eX=new Set(["same-origin","same-site","cross-origin"]);function tX({policy:e="same-origin"}){if(eX.has(e))return e;throw new Error(`Cross-Origin-Resource-Policy does not support the ${JSON.stringify(e)} policy`)}function Ac(e={}){let t=tX(e);return function(n,i,s){i.setHeader("Cross-Origin-Resource-Policy",t),s()}}function rX(e=0){if(e>=0&&Number.isFinite(e))return Math.floor(e);throw new Error(`Expect-CT: ${JSON.stringify(e)} is not a valid value for maxAge. Please choose a positive integer.`)}function nX(e){let t=[`max-age=${rX(e.maxAge)}`];return e.enforce&&t.push("enforce"),e.reportUri&&t.push(`report-uri="${e.reportUri}"`),t.join(", ")}function $c(e={}){let t=nX(e);return function(n,i,s){i.setHeader("Expect-CT",t),s()}}function Cc(){return function(t,r,n){r.setHeader("Origin-Agent-Cluster","?1"),n()}}var iX=new Set(["no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url",""]);function sX({policy:e=["no-referrer"]}){let t=typeof e=="string"?[e]:e;if(t.length===0)throw new Error("Referrer-Policy received no policy tokens");let r=new Set;return t.forEach(n=>{if(iX.has(n)){if(r.has(n))throw new Error(`Referrer-Policy received a duplicate policy token ${JSON.stringify(n)}`)}else throw new Error(`Referrer-Policy received an unexpected policy token ${JSON.stringify(n)}`);r.add(n)}),t.join(",")}function Ic(e={}){let t=sX(e);return function(n,i,s){i.setHeader("Referrer-Policy",t),s()}}var oX=180*24*60*60;function aX(e=oX){if(e>=0&&Number.isFinite(e))return Math.floor(e);throw new Error(`Strict-Transport-Security: ${JSON.stringify(e)} is not a valid value for maxAge. Please choose a positive integer.`)}function uX(e){if("maxage"in e)throw new Error("Strict-Transport-Security received an unsupported property, `maxage`. Did you mean to pass `maxAge`?");"includeSubdomains"in e&&console.warn('Strict-Transport-Security middleware should use `includeSubDomains` instead of `includeSubdomains`. (The correct one has an uppercase "D".)'),"setIf"in e&&console.warn("Strict-Transport-Security middleware no longer supports the `setIf` parameter. See the documentation and <https://github.com/helmetjs/helmet/wiki/Conditionally-using-middleware> if you need help replicating this behavior.");let t=[`max-age=${aX(e.maxAge)}`];return(e.includeSubDomains===void 0||e.includeSubDomains)&&t.push("includeSubDomains"),e.preload&&t.push("preload"),t.join("; ")}function Do(e={}){let t=uX(e);return function(n,i,s){i.setHeader("Strict-Transport-Security",t),s()}}function Lo(){return function(t,r,n){r.setHeader("X-Content-Type-Options","nosniff"),n()}}function Fo(e={}){let t=e.allow?"on":"off";return function(n,i,s){i.setHeader("X-DNS-Prefetch-Control",t),s()}}function zo(){return function(t,r,n){r.setHeader("X-Download-Options","noopen"),n()}}function lX({action:e="sameorigin"}){let t=typeof e=="string"?e.toUpperCase():e;switch(t){case"SAME-ORIGIN":return"SAMEORIGIN";case"DENY":case"SAMEORIGIN":return t;default:throw new Error(`X-Frame-Options received an invalid action ${JSON.stringify(e)}`)}}function Mo(e={}){let t=lX(e);return function(n,i,s){i.setHeader("X-Frame-Options",t),s()}}var fX=new Set(["none","master-only","by-content-type","all"]);function cX({permittedPolicies:e="none"}){if(fX.has(e))return e;throw new Error(`X-Permitted-Cross-Domain-Policies does not support ${JSON.stringify(e)}`)}function Ho(e={}){let t=cX(e);return function(n,i,s){i.setHeader("X-Permitted-Cross-Domain-Policies",t),s()}}function Vo(){return function(t,r,n){r.removeHeader("X-Powered-By"),n()}}function Uo(){return function(t,r,n){r.setHeader("X-XSS-Protection","0"),n()}}function hX(e){var t,r,n,i,s,o,a,u;let l=[];switch(e.contentSecurityPolicy){case void 0:case!0:l.push(jo());break;case!1:break;default:l.push(jo(e.contentSecurityPolicy));break}switch(e.crossOriginEmbedderPolicy){case void 0:case!0:l.push(Tc());break;case!1:break;default:l.push(Tc(e.crossOriginEmbedderPolicy));break}switch(e.crossOriginOpenerPolicy){case void 0:case!0:l.push(Oc());break;case!1:break;default:l.push(Oc(e.crossOriginOpenerPolicy));break}switch(e.crossOriginResourcePolicy){case void 0:case!0:l.push(Ac());break;case!1:break;default:l.push(Ac(e.crossOriginResourcePolicy));break}switch(e.expectCt){case void 0:case!1:break;case!0:l.push($c());break;default:l.push($c(e.expectCt));break}switch(e.originAgentCluster){case void 0:case!0:l.push(Cc());break;case!1:break;default:console.warn("Origin-Agent-Cluster does not take options. Remove the property to silence this warning."),l.push(Cc());break}switch(e.referrerPolicy){case void 0:case!0:l.push(Ic());break;case!1:break;default:l.push(Ic(e.referrerPolicy));break}if("strictTransportSecurity"in e&&"hsts"in e)throw new Error("Strict-Transport-Security option was specified twice. Remove `hsts` to silence this warning.");let f=(t=e.strictTransportSecurity)!==null&&t!==void 0?t:e.hsts;switch(f){case void 0:case!0:l.push(Do());break;case!1:break;default:l.push(Do(f));break}if("xContentTypeOptions"in e&&"noSniff"in e)throw new Error("X-Content-Type-Options option was specified twice. Remove `noSniff` to silence this warning.");switch((r=e.xContentTypeOptions)!==null&&r!==void 0?r:e.noSniff){case void 0:case!0:l.push(Lo());break;case!1:break;default:console.warn("X-Content-Type-Options does not take options. Remove the property to silence this warning."),l.push(Lo());break}if("xDnsPrefetchControl"in e&&"dnsPrefetchControl"in e)throw new Error("X-DNS-Prefetch-Control option was specified twice. Remove `dnsPrefetchControl` to silence this warning.");let h=(n=e.xDnsPrefetchControl)!==null&&n!==void 0?n:e.dnsPrefetchControl;switch(h){case void 0:case!0:l.push(Fo());break;case!1:break;default:l.push(Fo(h));break}if("xDownloadOptions"in e&&"ieNoOpen"in e)throw new Error("X-Download-Options option was specified twice. Remove `ieNoOpen` to silence this warning.");switch((i=e.xDownloadOptions)!==null&&i!==void 0?i:e.ieNoOpen){case void 0:case!0:l.push(zo());break;case!1:break;default:console.warn("X-Download-Options does not take options. Remove the property to silence this warning."),l.push(zo());break}if("xFrameOptions"in e&&"frameguard"in e)throw new Error("X-Frame-Options option was specified twice. Remove `frameguard` to silence this warning.");let p=(s=e.xFrameOptions)!==null&&s!==void 0?s:e.frameguard;switch(p){case void 0:case!0:l.push(Mo());break;case!1:break;default:l.push(Mo(p));break}if("xPermittedCrossDomainPolicies"in e&&"permittedCrossDomainPolicies"in e)throw new Error("X-Permitted-Cross-Domain-Policies option was specified twice. Remove `permittedCrossDomainPolicies` to silence this warning.");let y=(o=e.xPermittedCrossDomainPolicies)!==null&&o!==void 0?o:e.permittedCrossDomainPolicies;switch(y){case void 0:case!0:l.push(Ho());break;case!1:break;default:l.push(Ho(y));break}if("xPoweredBy"in e&&"hidePoweredBy"in e)throw new Error("X-Powered-By option was specified twice. Remove `hidePoweredBy` to silence this warning.");switch((a=e.xPoweredBy)!==null&&a!==void 0?a:e.hidePoweredBy){case void 0:case!0:l.push(Vo());break;case!1:break;default:console.warn("X-Powered-By does not take options. Remove the property to silence this warning."),l.push(Vo());break}if("xXssProtection"in e&&"xssFilter"in e)throw new Error("X-XSS-Protection option was specified twice. Remove `xssFilter` to silence this warning.");switch((u=e.xXssProtection)!==null&&u!==void 0?u:e.xssFilter){case void 0:case!0:l.push(Uo());break;case!1:break;default:console.warn("X-XSS-Protection does not take options. Remove the property to silence this warning."),l.push(Uo());break}return l}var v0=Object.assign(function(t={}){var r;if(((r=t.constructor)===null||r===void 0?void 0:r.name)==="IncomingMessage")throw new Error("It appears you have done something like `app.use(helmet)`, but it should be `app.use(helmet())`.");let n=hX(t);return function(s,o,a){let u=0;(function l(f){if(f){a(f);return}let c=n[u];c?(u++,c(s,o,l)):a()})()}},{contentSecurityPolicy:jo,crossOriginEmbedderPolicy:Tc,crossOriginOpenerPolicy:Oc,crossOriginResourcePolicy:Ac,expectCt:$c,originAgentCluster:Cc,referrerPolicy:Ic,strictTransportSecurity:Do,xContentTypeOptions:Lo,xDnsPrefetchControl:Fo,xDownloadOptions:zo,xFrameOptions:Mo,xPermittedCrossDomainPolicies:Ho,xPoweredBy:Vo,xXssProtection:Uo,dnsPrefetchControl:Fo,xssFilter:Uo,permittedCrossDomainPolicies:Ho,ieNoOpen:zo,noSniff:Lo,frameguard:Mo,hidePoweredBy:Vo,hsts:Do});Le.contentSecurityPolicy=jo;Le.crossOriginEmbedderPolicy=Tc;Le.crossOriginOpenerPolicy=Oc;Le.crossOriginResourcePolicy=Ac;Le.default=v0;Le.dnsPrefetchControl=Fo;Le.expectCt=$c;Le.frameguard=Mo;Le.hidePoweredBy=Vo;Le.hsts=Do;Le.ieNoOpen=zo;Le.noSniff=Lo;Le.originAgentCluster=Cc;Le.permittedCrossDomainPolicies=Ho;Le.referrerPolicy=Ic;Le.strictTransportSecurity=Do;Le.xContentTypeOptions=Lo;Le.xDnsPrefetchControl=Fo;Le.xDownloadOptions=zo;Le.xFrameOptions=Mo;Le.xPermittedCrossDomainPolicies=Ho;Le.xPoweredBy=Vo;Le.xXssProtection=Uo;Le.xssFilter=Uo;_0.exports=v0;_0.exports.default=v0});var qN=v((Pne,ju)=>{"use strict";var{randomBytes:NN}=require("crypto"),dX=kg(),qu=IN();async function S0(e,t){let{enableCSPNonces:r,global:n,...i}=t,s=typeof n=="boolean"?n:!0;e.hasReplyDecorator("helmet")||e.decorateReply("helmet",null),e.hasReplyDecorator("cspNonce")||e.decorateReply("cspNonce",null),e.addHook("onRoute",o=>{if(typeof o.helmet<"u")if(typeof o.helmet=="object")o.config=Object.assign(o.config||Object.create(null),{helmet:o.helmet});else if(o.helmet===!1)o.config=Object.assign(o.config||Object.create(null),{helmet:{skipRoute:!0}});else throw new Error("Unknown value for route helmet configuration")}),e.addHook("onRequest",async(o,a)=>{let{helmet:u}=o.routeConfig||o.context.config;if(typeof u<"u"){let{enableCSPNonces:l,skipRoute:f,...c}=u,h=Object.assign(Object.create(null),i,c);return kN(o,a,h,l)}else return kN(o,a,i,r)}),e.addHook("onRequest",(o,a,u)=>{let{helmet:l}=o.routeConfig||o.context.config;if(typeof l<"u"){let{enableCSPNonces:f,skipRoute:c,...h}=l;if(c!==!0){let d=Object.assign(Object.create(null),i,h);return xN(o,a,d,f)}return u()}else if(s)return xN(o,a,i,r);return u()})}async function kN(e,t,r,n){n&&(t.cspNonce={script:NN(16).toString("hex"),style:NN(16).toString("hex")}),t.helmet=function(i){let s=i?Object.assign(Object.create(null),r,i):r;return qu(s)(e.raw,t.raw,w0)}}async function xN(e,t,r,n){if(n===!0){let i=r.contentSecurityPolicy?r.contentSecurityPolicy.directives:qu.contentSecurityPolicy.getDefaultDirectives(),s=r.contentSecurityPolicy?r.contentSecurityPolicy.reportOnly:void 0,o=r.contentSecurityPolicy?r.contentSecurityPolicy.useDefaults:void 0,{script:a,style:u}=t.cspNonce,l={...i},f=Array.isArray(l["script-src"])?"script-src":"scriptSrc";l[f]=Array.isArray(l[f])?[...l[f]]:[],l[f].push(`'nonce-${a}'`);let c=Array.isArray(l["style-src"])?"style-src":"styleSrc";l[c]=Array.isArray(l[c])?[...l[c]]:[],l[c].push(`'nonce-${u}'`);let d=Object.assign(Object.create(null),r,{contentSecurityPolicy:{directives:l,reportOnly:s,useDefaults:o}});qu(d)(e.raw,t.raw,w0)}else qu(r)(e.raw,t.raw,w0)}function w0(e){if(e)throw e}ju.exports=dX(S0,{fastify:"4.x",name:"@fastify/helmet"});ju.exports.default=S0;ju.exports.fastifyHelmet=S0;ju.exports.contentSecurityPolicy=qu.contentSecurityPolicy});var yX={};nk(yX,{getApplication:()=>mX});module.exports=ik(yX);var DN=xc(B$()),LN=xc(ON()),FN=xc(qN());var pX=async e=>{e.route({url:"/",method:"GET",handler:(t,r)=>{t.log.debug(t),r.code(200).send("OK")}}),e.route({url:"/example",method:"POST",schema:{body:{type:"object",required:["customer_id"],properties:{customer_id:{type:"string"}}}},handler:function(t,r){r.code(200).send(t.body)}})},jN=pX;var mX=()=>{let e=(0,DN.default)({logger:{level:"debug"}});return e.register(FN.default),e.register(LN.default,{origin:"*"}),e.register(function(t,r,n){e.register(jN),n()},{prefix:"/v1"}),e};0&&(module.exports={getApplication});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

tiny-lru/dist/tiny-lru.cjs:
  (**
   * tiny-lru
   *
   * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 11.0.0
   *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
//# sourceMappingURL=app.js.map
